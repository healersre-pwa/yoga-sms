(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function Z1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var qg={exports:{}},Bc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ob;function XS(){if(Ob)return Bc;Ob=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:u,ref:o!==void 0?o:null,props:c}}return Bc.Fragment=e,Bc.jsx=t,Bc.jsxs=t,Bc}var Vb;function WS(){return Vb||(Vb=1,qg.exports=XS()),qg.exports}var d=WS(),Fg={exports:{}},tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function JS(){if(zb)return tt;zb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),A=Symbol.iterator;function j(D){return D===null||typeof D!="object"?null:(D=A&&D[A]||D["@@iterator"],typeof D=="function"?D:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,P={};function ie(D,B,J){this.props=D,this.context=B,this.refs=P,this.updater=J||U}ie.prototype.isReactComponent={},ie.prototype.setState=function(D,B){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,B,"setState")},ie.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function ve(){}ve.prototype=ie.prototype;function be(D,B,J){this.props=D,this.context=B,this.refs=P,this.updater=J||U}var he=be.prototype=new ve;he.constructor=be,q(he,ie.prototype),he.isPureReactComponent=!0;var we=Array.isArray;function de(){}var N={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function C(D,B,J){var fe=J.ref;return{$$typeof:i,type:D,key:B,ref:fe!==void 0?fe:null,props:J}}function k(D,B){return C(D.type,B,D.props)}function I(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function O(D){var B={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(J){return B[J]})}var T=/\/+/g;function ue(D,B){return typeof D=="object"&&D!==null&&D.key!=null?O(""+D.key):B.toString(36)}function me(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(de,de):(D.status="pending",D.then(function(B){D.status==="pending"&&(D.status="fulfilled",D.value=B)},function(B){D.status==="pending"&&(D.status="rejected",D.reason=B)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function V(D,B,J,fe,ce){var Ce=typeof D;(Ce==="undefined"||Ce==="boolean")&&(D=null);var He=!1;if(D===null)He=!0;else switch(Ce){case"bigint":case"string":case"number":He=!0;break;case"object":switch(D.$$typeof){case i:case e:He=!0;break;case v:return He=D._init,V(He(D._payload),B,J,fe,ce)}}if(He)return ce=ce(D),He=fe===""?"."+ue(D,0):fe,we(ce)?(J="",He!=null&&(J=He.replace(T,"$&/")+"/"),V(ce,B,J,"",function(Lt){return Lt})):ce!=null&&(I(ce)&&(ce=k(ce,J+(ce.key==null||D&&D.key===ce.key?"":(""+ce.key).replace(T,"$&/")+"/")+He)),B.push(ce)),1;He=0;var it=fe===""?".":fe+":";if(we(D))for(var at=0;at<D.length;at++)fe=D[at],Ce=it+ue(fe,at),He+=V(fe,B,J,Ce,ce);else if(at=j(D),typeof at=="function")for(D=at.call(D),at=0;!(fe=D.next()).done;)fe=fe.value,Ce=it+ue(fe,at++),He+=V(fe,B,J,Ce,ce);else if(Ce==="object"){if(typeof D.then=="function")return V(me(D),B,J,fe,ce);throw B=String(D),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return He}function W(D,B,J){if(D==null)return D;var fe=[],ce=0;return V(D,fe,"","",function(Ce){return B.call(J,Ce,ce++)}),fe}function re(D){if(D._status===-1){var B=D._result;B=B(),B.then(function(J){(D._status===0||D._status===-1)&&(D._status=1,D._result=J)},function(J){(D._status===0||D._status===-1)&&(D._status=2,D._result=J)}),D._status===-1&&(D._status=0,D._result=B)}if(D._status===1)return D._result.default;throw D._result}var ye=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},ge={map:W,forEach:function(D,B,J){W(D,function(){B.apply(this,arguments)},J)},count:function(D){var B=0;return W(D,function(){B++}),B},toArray:function(D){return W(D,function(B){return B})||[]},only:function(D){if(!I(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return tt.Activity=w,tt.Children=ge,tt.Component=ie,tt.Fragment=t,tt.Profiler=o,tt.PureComponent=be,tt.StrictMode=r,tt.Suspense=p,tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,tt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return N.H.useMemoCache(D)}},tt.cache=function(D){return function(){return D.apply(null,arguments)}},tt.cacheSignal=function(){return null},tt.cloneElement=function(D,B,J){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var fe=q({},D.props),ce=D.key;if(B!=null)for(Ce in B.key!==void 0&&(ce=""+B.key),B)!R.call(B,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&B.ref===void 0||(fe[Ce]=B[Ce]);var Ce=arguments.length-2;if(Ce===1)fe.children=J;else if(1<Ce){for(var He=Array(Ce),it=0;it<Ce;it++)He[it]=arguments[it+2];fe.children=He}return C(D.type,ce,fe)},tt.createContext=function(D){return D={$$typeof:u,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},tt.createElement=function(D,B,J){var fe,ce={},Ce=null;if(B!=null)for(fe in B.key!==void 0&&(Ce=""+B.key),B)R.call(B,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(ce[fe]=B[fe]);var He=arguments.length-2;if(He===1)ce.children=J;else if(1<He){for(var it=Array(He),at=0;at<He;at++)it[at]=arguments[at+2];ce.children=it}if(D&&D.defaultProps)for(fe in He=D.defaultProps,He)ce[fe]===void 0&&(ce[fe]=He[fe]);return C(D,Ce,ce)},tt.createRef=function(){return{current:null}},tt.forwardRef=function(D){return{$$typeof:g,render:D}},tt.isValidElement=I,tt.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:re}},tt.memo=function(D,B){return{$$typeof:y,type:D,compare:B===void 0?null:B}},tt.startTransition=function(D){var B=N.T,J={};N.T=J;try{var fe=D(),ce=N.S;ce!==null&&ce(J,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(de,ye)}catch(Ce){ye(Ce)}finally{B!==null&&J.types!==null&&(B.types=J.types),N.T=B}},tt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},tt.use=function(D){return N.H.use(D)},tt.useActionState=function(D,B,J){return N.H.useActionState(D,B,J)},tt.useCallback=function(D,B){return N.H.useCallback(D,B)},tt.useContext=function(D){return N.H.useContext(D)},tt.useDebugValue=function(){},tt.useDeferredValue=function(D,B){return N.H.useDeferredValue(D,B)},tt.useEffect=function(D,B){return N.H.useEffect(D,B)},tt.useEffectEvent=function(D){return N.H.useEffectEvent(D)},tt.useId=function(){return N.H.useId()},tt.useImperativeHandle=function(D,B,J){return N.H.useImperativeHandle(D,B,J)},tt.useInsertionEffect=function(D,B){return N.H.useInsertionEffect(D,B)},tt.useLayoutEffect=function(D,B){return N.H.useLayoutEffect(D,B)},tt.useMemo=function(D,B){return N.H.useMemo(D,B)},tt.useOptimistic=function(D,B){return N.H.useOptimistic(D,B)},tt.useReducer=function(D,B,J){return N.H.useReducer(D,B,J)},tt.useRef=function(D){return N.H.useRef(D)},tt.useState=function(D){return N.H.useState(D)},tt.useSyncExternalStore=function(D,B,J){return N.H.useSyncExternalStore(D,B,J)},tt.useTransition=function(){return N.H.useTransition()},tt.version="19.2.3",tt}var Pb;function $p(){return Pb||(Pb=1,Fg.exports=JS()),Fg.exports}var te=$p();const ew=Z1(te);var Hg={exports:{}},qc={},Gg={exports:{}},Kg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ub;function ZS(){return Ub||(Ub=1,(function(i){function e(V,W){var re=V.length;V.push(W);e:for(;0<re;){var ye=re-1>>>1,ge=V[ye];if(0<o(ge,W))V[ye]=W,V[re]=ge,re=ye;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var W=V[0],re=V.pop();if(re!==W){V[0]=re;e:for(var ye=0,ge=V.length,D=ge>>>1;ye<D;){var B=2*(ye+1)-1,J=V[B],fe=B+1,ce=V[fe];if(0>o(J,re))fe<ge&&0>o(ce,J)?(V[ye]=ce,V[fe]=re,ye=fe):(V[ye]=J,V[B]=re,ye=B);else if(fe<ge&&0>o(ce,re))V[ye]=ce,V[fe]=re,ye=fe;else break e}}return W}function o(V,W){var re=V.sortIndex-W.sortIndex;return re!==0?re:V.id-W.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var u=Date,g=u.now();i.unstable_now=function(){return u.now()-g}}var p=[],y=[],v=1,w=null,A=3,j=!1,U=!1,q=!1,P=!1,ie=typeof setTimeout=="function"?setTimeout:null,ve=typeof clearTimeout=="function"?clearTimeout:null,be=typeof setImmediate<"u"?setImmediate:null;function he(V){for(var W=t(y);W!==null;){if(W.callback===null)r(y);else if(W.startTime<=V)r(y),W.sortIndex=W.expirationTime,e(p,W);else break;W=t(y)}}function we(V){if(q=!1,he(V),!U)if(t(p)!==null)U=!0,de||(de=!0,O());else{var W=t(y);W!==null&&me(we,W.startTime-V)}}var de=!1,N=-1,R=5,C=-1;function k(){return P?!0:!(i.unstable_now()-C<R)}function I(){if(P=!1,de){var V=i.unstable_now();C=V;var W=!0;try{e:{U=!1,q&&(q=!1,ve(N),N=-1),j=!0;var re=A;try{t:{for(he(V),w=t(p);w!==null&&!(w.expirationTime>V&&k());){var ye=w.callback;if(typeof ye=="function"){w.callback=null,A=w.priorityLevel;var ge=ye(w.expirationTime<=V);if(V=i.unstable_now(),typeof ge=="function"){w.callback=ge,he(V),W=!0;break t}w===t(p)&&r(p),he(V)}else r(p);w=t(p)}if(w!==null)W=!0;else{var D=t(y);D!==null&&me(we,D.startTime-V),W=!1}}break e}finally{w=null,A=re,j=!1}W=void 0}}finally{W?O():de=!1}}}var O;if(typeof be=="function")O=function(){be(I)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,ue=T.port2;T.port1.onmessage=I,O=function(){ue.postMessage(null)}}else O=function(){ie(I,0)};function me(V,W){N=ie(function(){V(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(V){V.callback=null},i.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<V?Math.floor(1e3/V):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(V){switch(A){case 1:case 2:case 3:var W=3;break;default:W=A}var re=A;A=W;try{return V()}finally{A=re}},i.unstable_requestPaint=function(){P=!0},i.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var re=A;A=V;try{return W()}finally{A=re}},i.unstable_scheduleCallback=function(V,W,re){var ye=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ye+re:ye):re=ye,V){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=re+ge,V={id:v++,callback:W,priorityLevel:V,startTime:re,expirationTime:ge,sortIndex:-1},re>ye?(V.sortIndex=re,e(y,V),t(p)===null&&V===t(y)&&(q?(ve(N),N=-1):q=!0,me(we,re-ye))):(V.sortIndex=ge,e(p,V),U||j||(U=!0,de||(de=!0,O()))),V},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(V){var W=A;return function(){var re=A;A=W;try{return V.apply(this,arguments)}finally{A=re}}}})(Kg)),Kg}var Lb;function eA(){return Lb||(Lb=1,Gg.exports=ZS()),Gg.exports}var $g={exports:{}},Pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb;function tA(){if(Bb)return Pn;Bb=1;var i=$p();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,y,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:y,implementation:v}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Pn.createPortal=function(p,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(p,y,null,v)},Pn.flushSync=function(p){var y=u.T,v=r.p;try{if(u.T=null,r.p=2,p)return p()}finally{u.T=y,r.p=v,r.d.f()}},Pn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(p,y))},Pn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Pn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var v=y.as,w=g(v,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,j=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?r.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:A,fetchPriority:j}):v==="script"&&r.d.X(p,{crossOrigin:w,integrity:A,fetchPriority:j,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Pn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=g(y.as,y.crossOrigin);r.d.M(p,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(p)},Pn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,w=g(v,y.crossOrigin);r.d.L(p,v,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Pn.preloadModule=function(p,y){if(typeof p=="string")if(y){var v=g(y.as,y.crossOrigin);r.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(p)},Pn.requestFormReset=function(p){r.d.r(p)},Pn.unstable_batchedUpdates=function(p,y){return p(y)},Pn.useFormState=function(p,y,v){return u.H.useFormState(p,y,v)},Pn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Pn.version="19.2.3",Pn}var qb;function nA(){if(qb)return $g.exports;qb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),$g.exports=tA(),$g.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function sA(){if(Fb)return qc;Fb=1;var i=eA(),e=$p(),t=nA();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(c(n)!==n)throw Error(r(188))}function y(n){var s=n.alternate;if(!s){if(s=c(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,l=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return p(f),n;if(m===l)return p(f),s;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=m;else{for(var x=!1,E=f.child;E;){if(E===a){x=!0,a=f,l=m;break}if(E===l){x=!0,l=f,a=m;break}E=E.sibling}if(!x){for(E=m.child;E;){if(E===a){x=!0,a=m,l=f;break}if(E===l){x=!0,l=m,a=f;break}E=E.sibling}if(!x)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var w=Object.assign,A=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),ve=Symbol.for("react.consumer"),be=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function O(n){return n===null||typeof n!="object"?null:(n=I&&n[I]||n["@@iterator"],typeof n=="function"?n:null)}var T=Symbol.for("react.client.reference");function ue(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===T?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case q:return"Fragment";case ie:return"Profiler";case P:return"StrictMode";case we:return"Suspense";case de:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case U:return"Portal";case be:return n.displayName||"Context";case ve:return(n._context.displayName||"Context")+".Consumer";case he:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case N:return s=n.displayName||null,s!==null?s:ue(n.type)||"Memo";case R:s=n._payload,n=n._init;try{return ue(n(s))}catch{}}return null}var me=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},ye=[],ge=-1;function D(n){return{current:n}}function B(n){0>ge||(n.current=ye[ge],ye[ge]=null,ge--)}function J(n,s){ge++,ye[ge]=n.current,n.current=s}var fe=D(null),ce=D(null),Ce=D(null),He=D(null);function it(n,s){switch(J(Ce,s),J(ce,n),J(fe,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?rb(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=rb(s),n=ib(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}B(fe),J(fe,n)}function at(){B(fe),B(ce),B(Ce)}function Lt(n){n.memoizedState!==null&&J(He,n);var s=fe.current,a=ib(s,n.type);s!==a&&(J(ce,n),J(fe,a))}function Bt(n){ce.current===n&&(B(fe),B(ce)),He.current===n&&(B(He),zc._currentValue=re)}var Zt,Tn;function Pt(n){if(Zt===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Zt=s&&s[1]||"",Tn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zt+n+Tn}var oe=!1;function Ve(n,s){if(!n||oe)return"";oe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(X){var Q=X}Reflect.construct(n,[],le)}else{try{le.call()}catch(X){Q=X}n.call(le.prototype)}}else{try{throw Error()}catch(X){Q=X}(le=n())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(X){if(X&&Q&&typeof X.stack=="string")return[X.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),x=m[0],E=m[1];if(x&&E){var M=x.split(`
`),K=E.split(`
`);for(f=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;f<K.length&&!K[f].includes("DetermineComponentFrameRoot");)f++;if(l===M.length||f===K.length)for(l=M.length-1,f=K.length-1;1<=l&&0<=f&&M[l]!==K[f];)f--;for(;1<=l&&0<=f;l--,f--)if(M[l]!==K[f]){if(l!==1||f!==1)do if(l--,f--,0>f||M[l]!==K[f]){var se=`
`+M[l].replace(" at new "," at ");return n.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",n.displayName)),se}while(1<=l&&0<=f);break}}}finally{oe=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Pt(a):""}function Me(n,s){switch(n.tag){case 26:case 27:case 5:return Pt(n.type);case 16:return Pt("Lazy");case 13:return n.child!==s&&s!==null?Pt("Suspense Fallback"):Pt("Suspense");case 19:return Pt("SuspenseList");case 0:case 15:return Ve(n.type,!1);case 11:return Ve(n.type.render,!1);case 1:return Ve(n.type,!0);case 31:return Pt("Activity");default:return""}}function Ye(n){try{var s="",a=null;do s+=Me(n,a),a=n,n=n.return;while(n);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ge=Object.prototype.hasOwnProperty,_e=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,$=i.unstable_shouldYield,ee=i.unstable_requestPaint,Z=i.unstable_now,xe=i.unstable_getCurrentPriorityLevel,Te=i.unstable_ImmediatePriority,Re=i.unstable_UserBlockingPriority,Le=i.unstable_NormalPriority,Ne=i.unstable_LowPriority,lt=i.unstable_IdlePriority,pe=i.log,De=i.unstable_setDisableYieldValue,Fe=null,ke=null;function Qe(n){if(typeof pe=="function"&&De(n),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(Fe,n)}catch{}}var Je=Math.clz32?Math.clz32:wt,Ze=Math.log,vt=Math.LN2;function wt(n){return n>>>=0,n===0?32:31-(Ze(n)/vt|0)|0}var qt=256,ln=262144,xt=4194304;function sn(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function xn(n,s,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,m=n.suspendedLanes,x=n.pingedLanes;n=n.warmLanes;var E=l&134217727;return E!==0?(l=E&~m,l!==0?f=sn(l):(x&=E,x!==0?f=sn(x):a||(a=E&~n,a!==0&&(f=sn(a))))):(E=l&~m,E!==0?f=sn(E):x!==0?f=sn(x):a||(a=l&~n,a!==0&&(f=sn(a)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:f}function Hn(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function si(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bl(){var n=xt;return xt<<=1,(xt&62914560)===0&&(xt=4194304),n}function ys(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function br(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function $f(n,s,a,l,f,m){var x=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var E=n.entanglements,M=n.expirationTimes,K=n.hiddenUpdates;for(a=x&~a;0<a;){var se=31-Je(a),le=1<<se;E[se]=0,M[se]=-1;var Q=K[se];if(Q!==null)for(K[se]=null,se=0;se<Q.length;se++){var X=Q[se];X!==null&&(X.lane&=-536870913)}a&=~le}l!==0&&ia(n,l,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(x&~s))}function ia(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-Je(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function ql(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var l=31-Je(a),f=1<<l;f&s|n[l]&s&&(n[l]|=s),a&=~f}}function Fl(n,s){var a=s&-s;return a=(a&42)!==0?1:aa(a),(a&(n.suspendedLanes|s))!==0?0:a}function aa(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function vr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Zu(){var n=W.p;return n!==0?n:(n=window.event,n===void 0?32:Nb(n.type))}function Ms(n,s){var a=W.p;try{return W.p=n,s()}finally{W.p=a}}var Os=Math.random().toString(36).slice(2),cn="__reactFiber$"+Os,Sn="__reactProps$"+Os,Ys="__reactContainer$"+Os,uo="__reactEvents$"+Os,Qf="__reactListeners$"+Os,eh="__reactHandles$"+Os,th="__reactResources$"+Os,Xs="__reactMarker$"+Os;function ho(n){delete n[cn],delete n[Sn],delete n[uo],delete n[Qf],delete n[eh]}function Ws(n){var s=n[cn];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Ys]||a[cn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=db(n);n!==null;){if(a=n[cn])return a;n=db(n)}return s}n=a,a=n.parentNode}return null}function _s(n){if(n=n[cn]||n[Ys]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function ss(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function Js(n){var s=n[th];return s||(s=n[th]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function un(n){n[Xs]=!0}var Hl=new Set,Gl={};function Zs(n,s){er(n,s),er(n+"Capture",s)}function er(n,s){for(Gl[n]=s,n=0;n<s.length;n++)Hl.add(s[n])}var Kl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$l={},Ql={};function nh(n){return Ge.call(Ql,n)?!0:Ge.call($l,n)?!1:Kl.test(n)?Ql[n]=!0:($l[n]=!0,!1)}function fo(n,s,a){if(nh(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function rs(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function hn(n,s,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+l)}}function An(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ri(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Yl(n,s,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(x){a=""+x,m.call(this,x)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function It(n){if(!n._valueTracker){var s=ri(n)?"checked":"value";n._valueTracker=Yl(n,s,""+n[s])}}function oa(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return n&&(l=ri(n)?n.checked?"true":"false":n.value),n=l,n!==a?(s.setValue(n),!0):!1}function tr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var la=/[\n"\\]/g;function Qn(n){return n.replace(la,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function mo(n,s,a,l,f,m,x,E){n.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.type=x:n.removeAttribute("type"),s!=null?x==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+An(s)):n.value!==""+An(s)&&(n.value=""+An(s)):x!=="submit"&&x!=="reset"||n.removeAttribute("value"),s!=null?Xl(n,x,An(s)):a!=null?Xl(n,x,An(a)):l!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+An(E):n.removeAttribute("name")}function sh(n,s,a,l,f,m,x,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){It(n);return}a=a!=null?""+An(a):"",s=s!=null?""+An(s):a,E||s===n.value||(n.value=s),n.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=E?n.checked:!!l,n.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.name=x),It(n)}function Xl(n,s,a){s==="number"&&tr(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function ii(n,s,a,l){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+An(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function rh(n,s,a){if(s!=null&&(s=""+An(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+An(a):""}function ai(n,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(me(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=An(s),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),It(n)}function Yn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var ih=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wl(n,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,a):typeof a!="number"||a===0||ih.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function Jl(n,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&a[f]!==l&&Wl(n,f,l)}else for(var m in s)s.hasOwnProperty(m)&&Wl(n,m,s[m])}function go(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ah=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function po(n){return oi.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Vs(){}var Zl=null;function xs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var li=null,nr=null;function ca(n){var s=_s(n);if(s&&(n=s.stateNode)){var a=n[Sn]||null;e:switch(n=s.stateNode,s.type){case"input":if(mo(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Qn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==n&&l.form===n.form){var f=l[Sn]||null;if(!f)throw Error(r(90));mo(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===n.form&&oa(l)}break e;case"textarea":rh(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&ii(n,!!a.multiple,s,!1)}}}var yo=!1;function ci(n,s,a){if(yo)return n(s,a);yo=!0;try{var l=n(s);return l}finally{if(yo=!1,(li!==null||nr!==null)&&(Zh(),li&&(s=li,n=nr,nr=li=null,ca(s),n)))for(s=0;s<n.length;s++)ca(n[s])}}function zs(n,s){var a=n.stateNode;if(a===null)return null;var l=a[Sn]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ua=!1;if(bs)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){ua=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch{ua=!1}var sr=null,ec=null,ha=null;function tc(){if(ha)return ha;var n,s=ec,a=s.length,l,f="value"in sr?sr.value:sr.textContent,m=f.length;for(n=0;n<a&&s[n]===f[n];n++);var x=a-n;for(l=1;l<=x&&s[a-l]===f[m-l];l++);return ha=f.slice(n,1<l?1-l:void 0)}function da(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function wr(){return!0}function Ps(){return!1}function Rn(n){function s(a,l,f,m,x){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(a=n[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?wr:Ps,this.isPropagationStopped=Ps,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=wr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=wr)},persist:function(){},isPersistent:wr}),s}var Er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rr=Rn(Er),ui=w({},Er,{view:0,detail:0}),nc=Rn(ui),hi,_o,ir,xo=w({},ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:di,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ir&&(ir&&n.type==="mousemove"?(hi=n.screenX-ir.screenX,_o=n.screenY-ir.screenY):_o=hi=0,ir=n),hi)},movementY:function(n){return"movementY"in n?n.movementY:_o}}),sc=Rn(xo),fa=w({},xo,{dataTransfer:0}),oh=Rn(fa),lh=w({},ui,{relatedTarget:0}),ma=Rn(lh),rc=w({},Er,{animationName:0,elapsedTime:0,pseudoElement:0}),ch=Rn(rc),bo=w({},Er,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),uh=Rn(bo),hh=w({},Er,{data:0}),ar=Rn(hh),dh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gh(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=mh[n])?!!s[n]:!1}function di(){return gh}var Gn=w({},ui,{key:function(n){if(n.key){var s=dh[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=da(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?fh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:di,charCode:function(n){return n.type==="keypress"?da(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?da(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ph=Rn(Gn),yh=w({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tr=Rn(yh),h=w({},ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:di}),_=Rn(h),b=w({},Er,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Rn(b),H=w({},xo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Rn(H),Ae=w({},Er,{newState:0,oldState:0}),nt=Rn(Ae),rn=[9,13,27,32],St=bs&&"CompositionEvent"in window,Gt=null;bs&&"documentMode"in document&&(Gt=document.documentMode);var vs=bs&&"TextEvent"in window&&!Gt,or=bs&&(!St||Gt&&8<Gt&&11>=Gt),Us=" ",Ls=!1;function ga(n,s){switch(n){case"keyup":return rn.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var wo=!1;function b2(n,s){switch(n){case"compositionend":return vo(s);case"keypress":return s.which!==32?null:(Ls=!0,Us);case"textInput":return n=s.data,n===Us&&Ls?null:n;default:return null}}function v2(n,s){if(wo)return n==="compositionend"||!St&&ga(n,s)?(n=tc(),ha=ec=sr=null,wo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return or&&s.locale!=="ko"?null:s.data;default:return null}}var w2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g0(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!w2[n.type]:s==="textarea"}function p0(n,s,a,l){li?nr?nr.push(l):nr=[l]:li=l,s=ad(s,"onChange"),0<s.length&&(a=new rr("onChange","change",null,a,l),n.push({event:a,listeners:s}))}var ic=null,ac=null;function E2(n){Jx(n,0)}function _h(n){var s=ss(n);if(oa(s))return n}function y0(n,s){if(n==="change")return s}var _0=!1;if(bs){var Yf;if(bs){var Xf="oninput"in document;if(!Xf){var x0=document.createElement("div");x0.setAttribute("oninput","return;"),Xf=typeof x0.oninput=="function"}Yf=Xf}else Yf=!1;_0=Yf&&(!document.documentMode||9<document.documentMode)}function b0(){ic&&(ic.detachEvent("onpropertychange",v0),ac=ic=null)}function v0(n){if(n.propertyName==="value"&&_h(ac)){var s=[];p0(s,ac,n,xs(n)),ci(E2,s)}}function T2(n,s,a){n==="focusin"?(b0(),ic=s,ac=a,ic.attachEvent("onpropertychange",v0)):n==="focusout"&&b0()}function S2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return _h(ac)}function A2(n,s){if(n==="click")return _h(s)}function I2(n,s){if(n==="input"||n==="change")return _h(s)}function N2(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var is=typeof Object.is=="function"?Object.is:N2;function oc(n,s){if(is(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Ge.call(s,f)||!is(n[f],s[f]))return!1}return!0}function w0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function E0(n,s){var a=w0(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=s&&l>=s)return{node:a,offset:s-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=w0(a)}}function T0(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?T0(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function S0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=tr(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=tr(n.document)}return s}function Wf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var C2=bs&&"documentMode"in document&&11>=document.documentMode,Eo=null,Jf=null,lc=null,Zf=!1;function A0(n,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Zf||Eo==null||Eo!==tr(l)||(l=Eo,"selectionStart"in l&&Wf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),lc&&oc(lc,l)||(lc=l,l=ad(Jf,"onSelect"),0<l.length&&(s=new rr("onSelect","select",null,s,a),n.push({event:s,listeners:l}),s.target=Eo)))}function pa(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var To={animationend:pa("Animation","AnimationEnd"),animationiteration:pa("Animation","AnimationIteration"),animationstart:pa("Animation","AnimationStart"),transitionrun:pa("Transition","TransitionRun"),transitionstart:pa("Transition","TransitionStart"),transitioncancel:pa("Transition","TransitionCancel"),transitionend:pa("Transition","TransitionEnd")},em={},I0={};bs&&(I0=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function ya(n){if(em[n])return em[n];if(!To[n])return n;var s=To[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in I0)return em[n]=s[a];return n}var N0=ya("animationend"),C0=ya("animationiteration"),R0=ya("animationstart"),R2=ya("transitionrun"),D2=ya("transitionstart"),j2=ya("transitioncancel"),D0=ya("transitionend"),j0=new Map,tm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tm.push("scrollEnd");function Bs(n,s){j0.set(n,s),Zs(s,[n])}var xh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},ws=[],So=0,nm=0;function bh(){for(var n=So,s=nm=So=0;s<n;){var a=ws[s];ws[s++]=null;var l=ws[s];ws[s++]=null;var f=ws[s];ws[s++]=null;var m=ws[s];if(ws[s++]=null,l!==null&&f!==null){var x=l.pending;x===null?f.next=f:(f.next=x.next,x.next=f),l.pending=f}m!==0&&k0(a,f,m)}}function vh(n,s,a,l){ws[So++]=n,ws[So++]=s,ws[So++]=a,ws[So++]=l,nm|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function sm(n,s,a,l){return vh(n,s,a,l),wh(n)}function _a(n,s){return vh(n,null,null,s),wh(n)}function k0(n,s,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=n.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&s!==null&&(f=31-Je(a),n=m.hiddenUpdates,l=n[f],l===null?n[f]=[s]:l.push(s),s.lane=a|536870912),m):null}function wh(n){if(50<Rc)throw Rc=0,dg=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ao={};function k2(n,s,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function as(n,s,a,l){return new k2(n,s,a,l)}function rm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Sr(n,s){var a=n.alternate;return a===null?(a=as(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function M0(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Eh(n,s,a,l,f,m){var x=0;if(l=n,typeof n=="function")rm(n)&&(x=1);else if(typeof n=="string")x=PS(n,a,fe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=as(31,a,s,f),n.elementType=C,n.lanes=m,n;case q:return xa(a.children,f,m,s);case P:x=8,f|=24;break;case ie:return n=as(12,a,s,f|2),n.elementType=ie,n.lanes=m,n;case we:return n=as(13,a,s,f),n.elementType=we,n.lanes=m,n;case de:return n=as(19,a,s,f),n.elementType=de,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case be:x=10;break e;case ve:x=9;break e;case he:x=11;break e;case N:x=14;break e;case R:x=16,l=null;break e}x=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return s=as(x,a,s,f),s.elementType=n,s.type=l,s.lanes=m,s}function xa(n,s,a,l){return n=as(7,n,l,s),n.lanes=a,n}function im(n,s,a){return n=as(6,n,null,s),n.lanes=a,n}function O0(n){var s=as(18,null,null,0);return s.stateNode=n,s}function am(n,s,a){return s=as(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var V0=new WeakMap;function Es(n,s){if(typeof n=="object"&&n!==null){var a=V0.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Ye(s)},V0.set(n,s),s)}return{value:n,source:s,stack:Ye(s)}}var Io=[],No=0,Th=null,cc=0,Ts=[],Ss=0,fi=null,lr=1,cr="";function Ar(n,s){Io[No++]=cc,Io[No++]=Th,Th=n,cc=s}function z0(n,s,a){Ts[Ss++]=lr,Ts[Ss++]=cr,Ts[Ss++]=fi,fi=n;var l=lr;n=cr;var f=32-Je(l)-1;l&=~(1<<f),a+=1;var m=32-Je(s)+f;if(30<m){var x=f-f%5;m=(l&(1<<x)-1).toString(32),l>>=x,f-=x,lr=1<<32-Je(s)+f|a<<f|l,cr=m+n}else lr=1<<m|a<<f|l,cr=n}function om(n){n.return!==null&&(Ar(n,1),z0(n,1,0))}function lm(n){for(;n===Th;)Th=Io[--No],Io[No]=null,cc=Io[--No],Io[No]=null;for(;n===fi;)fi=Ts[--Ss],Ts[Ss]=null,cr=Ts[--Ss],Ts[Ss]=null,lr=Ts[--Ss],Ts[Ss]=null}function P0(n,s){Ts[Ss++]=lr,Ts[Ss++]=cr,Ts[Ss++]=fi,lr=s.id,cr=s.overflow,fi=n}var Dn=null,Ft=null,pt=!1,mi=null,As=!1,cm=Error(r(519));function gi(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw uc(Es(s,n)),cm}function U0(n){var s=n.stateNode,a=n.type,l=n.memoizedProps;switch(s[cn]=n,s[Sn]=l,a){case"dialog":ht("cancel",s),ht("close",s);break;case"iframe":case"object":case"embed":ht("load",s);break;case"video":case"audio":for(a=0;a<jc.length;a++)ht(jc[a],s);break;case"source":ht("error",s);break;case"img":case"image":case"link":ht("error",s),ht("load",s);break;case"details":ht("toggle",s);break;case"input":ht("invalid",s),sh(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ht("invalid",s);break;case"textarea":ht("invalid",s),ai(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||nb(s.textContent,a)?(l.popover!=null&&(ht("beforetoggle",s),ht("toggle",s)),l.onScroll!=null&&ht("scroll",s),l.onScrollEnd!=null&&ht("scrollend",s),l.onClick!=null&&(s.onclick=Vs),s=!0):s=!1,s||gi(n,!0)}function L0(n){for(Dn=n.return;Dn;)switch(Dn.tag){case 5:case 31:case 13:As=!1;return;case 27:case 3:As=!0;return;default:Dn=Dn.return}}function Co(n){if(n!==Dn)return!1;if(!pt)return L0(n),pt=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Ig(n.type,n.memoizedProps)),a=!a),a&&Ft&&gi(n),L0(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Ft=hb(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Ft=hb(n)}else s===27?(s=Ft,Ci(n.type)?(n=jg,jg=null,Ft=n):Ft=s):Ft=Dn?Ns(n.stateNode.nextSibling):null;return!0}function ba(){Ft=Dn=null,pt=!1}function um(){var n=mi;return n!==null&&(Zn===null?Zn=n:Zn.push.apply(Zn,n),mi=null),n}function uc(n){mi===null?mi=[n]:mi.push(n)}var hm=D(null),va=null,Ir=null;function pi(n,s,a){J(hm,s._currentValue),s._currentValue=a}function Nr(n){n._currentValue=hm.current,B(hm)}function dm(n,s,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===a)break;n=n.return}}function fm(n,s,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var M=0;M<s.length;M++)if(E.context===s[M]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),dm(m.return,a,n),l||(x=null);break e}m=E.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(r(341));x.lanes|=a,m=x.alternate,m!==null&&(m.lanes|=a),dm(x,a,n),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===n){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function Ro(n,s,a,l){n=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var E=f.type;is(f.pendingProps.value,x.value)||(n!==null?n.push(E):n=[E])}}else if(f===He.current){if(x=f.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(zc):n=[zc])}f=f.return}n!==null&&fm(s,n,a,l),s.flags|=262144}function Sh(n){for(n=n.firstContext;n!==null;){if(!is(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function wa(n){va=n,Ir=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function jn(n){return B0(va,n)}function Ah(n,s){return va===null&&wa(n),B0(n,s)}function B0(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Ir===null){if(n===null)throw Error(r(308));Ir=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Ir=Ir.next=s;return a}var M2=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},O2=i.unstable_scheduleCallback,V2=i.unstable_NormalPriority,dn={$$typeof:be,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mm(){return{controller:new M2,data:new Map,refCount:0}}function hc(n){n.refCount--,n.refCount===0&&O2(V2,function(){n.controller.abort()})}var dc=null,gm=0,Do=0,jo=null;function z2(n,s){if(dc===null){var a=dc=[];gm=0,Do=_g(),jo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return gm++,s.then(q0,q0),s}function q0(){if(--gm===0&&dc!==null){jo!==null&&(jo.status="fulfilled");var n=dc;dc=null,Do=0,jo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function P2(n,s){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var F0=V.S;V.S=function(n,s){Ax=Z(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&z2(n,s),F0!==null&&F0(n,s)};var Ea=D(null);function pm(){var n=Ea.current;return n!==null?n:Ut.pooledCache}function Ih(n,s){s===null?J(Ea,Ea.current):J(Ea,s.pool)}function H0(){var n=pm();return n===null?null:{parent:dn._currentValue,pool:n}}var ko=Error(r(460)),ym=Error(r(474)),Nh=Error(r(542)),Ch={then:function(){}};function G0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function K0(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(Vs,Vs),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Q0(n),n;default:if(typeof s.status=="string")s.then(Vs,Vs);else{if(n=Ut,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Q0(n),n}throw Sa=s,ko}}function Ta(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Sa=a,ko):a}}var Sa=null;function $0(){if(Sa===null)throw Error(r(459));var n=Sa;return Sa=null,n}function Q0(n){if(n===ko||n===Nh)throw Error(r(483))}var Mo=null,fc=0;function Rh(n){var s=fc;return fc+=1,Mo===null&&(Mo=[]),K0(Mo,n,s)}function mc(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Dh(n,s){throw s.$$typeof===A?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Y0(n){function s(L,z){if(n){var G=L.deletions;G===null?(L.deletions=[z],L.flags|=16):G.push(z)}}function a(L,z){if(!n)return null;for(;z!==null;)s(L,z),z=z.sibling;return null}function l(L){for(var z=new Map;L!==null;)L.key!==null?z.set(L.key,L):z.set(L.index,L),L=L.sibling;return z}function f(L,z){return L=Sr(L,z),L.index=0,L.sibling=null,L}function m(L,z,G){return L.index=G,n?(G=L.alternate,G!==null?(G=G.index,G<z?(L.flags|=67108866,z):G):(L.flags|=67108866,z)):(L.flags|=1048576,z)}function x(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function E(L,z,G,ae){return z===null||z.tag!==6?(z=im(G,L.mode,ae),z.return=L,z):(z=f(z,G),z.return=L,z)}function M(L,z,G,ae){var qe=G.type;return qe===q?se(L,z,G.props.children,ae,G.key):z!==null&&(z.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===R&&Ta(qe)===z.type)?(z=f(z,G.props),mc(z,G),z.return=L,z):(z=Eh(G.type,G.key,G.props,null,L.mode,ae),mc(z,G),z.return=L,z)}function K(L,z,G,ae){return z===null||z.tag!==4||z.stateNode.containerInfo!==G.containerInfo||z.stateNode.implementation!==G.implementation?(z=am(G,L.mode,ae),z.return=L,z):(z=f(z,G.children||[]),z.return=L,z)}function se(L,z,G,ae,qe){return z===null||z.tag!==7?(z=xa(G,L.mode,ae,qe),z.return=L,z):(z=f(z,G),z.return=L,z)}function le(L,z,G){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=im(""+z,L.mode,G),z.return=L,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case j:return G=Eh(z.type,z.key,z.props,null,L.mode,G),mc(G,z),G.return=L,G;case U:return z=am(z,L.mode,G),z.return=L,z;case R:return z=Ta(z),le(L,z,G)}if(me(z)||O(z))return z=xa(z,L.mode,G,null),z.return=L,z;if(typeof z.then=="function")return le(L,Rh(z),G);if(z.$$typeof===be)return le(L,Ah(L,z),G);Dh(L,z)}return null}function Q(L,z,G,ae){var qe=z!==null?z.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return qe!==null?null:E(L,z,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case j:return G.key===qe?M(L,z,G,ae):null;case U:return G.key===qe?K(L,z,G,ae):null;case R:return G=Ta(G),Q(L,z,G,ae)}if(me(G)||O(G))return qe!==null?null:se(L,z,G,ae,null);if(typeof G.then=="function")return Q(L,z,Rh(G),ae);if(G.$$typeof===be)return Q(L,z,Ah(L,G),ae);Dh(L,G)}return null}function X(L,z,G,ae,qe){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return L=L.get(G)||null,E(z,L,""+ae,qe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case j:return L=L.get(ae.key===null?G:ae.key)||null,M(z,L,ae,qe);case U:return L=L.get(ae.key===null?G:ae.key)||null,K(z,L,ae,qe);case R:return ae=Ta(ae),X(L,z,G,ae,qe)}if(me(ae)||O(ae))return L=L.get(G)||null,se(z,L,ae,qe,null);if(typeof ae.then=="function")return X(L,z,G,Rh(ae),qe);if(ae.$$typeof===be)return X(L,z,G,Ah(z,ae),qe);Dh(z,ae)}return null}function Oe(L,z,G,ae){for(var qe=null,Et=null,Ue=z,ot=z=0,ft=null;Ue!==null&&ot<G.length;ot++){Ue.index>ot?(ft=Ue,Ue=null):ft=Ue.sibling;var Tt=Q(L,Ue,G[ot],ae);if(Tt===null){Ue===null&&(Ue=ft);break}n&&Ue&&Tt.alternate===null&&s(L,Ue),z=m(Tt,z,ot),Et===null?qe=Tt:Et.sibling=Tt,Et=Tt,Ue=ft}if(ot===G.length)return a(L,Ue),pt&&Ar(L,ot),qe;if(Ue===null){for(;ot<G.length;ot++)Ue=le(L,G[ot],ae),Ue!==null&&(z=m(Ue,z,ot),Et===null?qe=Ue:Et.sibling=Ue,Et=Ue);return pt&&Ar(L,ot),qe}for(Ue=l(Ue);ot<G.length;ot++)ft=X(Ue,L,ot,G[ot],ae),ft!==null&&(n&&ft.alternate!==null&&Ue.delete(ft.key===null?ot:ft.key),z=m(ft,z,ot),Et===null?qe=ft:Et.sibling=ft,Et=ft);return n&&Ue.forEach(function(Mi){return s(L,Mi)}),pt&&Ar(L,ot),qe}function $e(L,z,G,ae){if(G==null)throw Error(r(151));for(var qe=null,Et=null,Ue=z,ot=z=0,ft=null,Tt=G.next();Ue!==null&&!Tt.done;ot++,Tt=G.next()){Ue.index>ot?(ft=Ue,Ue=null):ft=Ue.sibling;var Mi=Q(L,Ue,Tt.value,ae);if(Mi===null){Ue===null&&(Ue=ft);break}n&&Ue&&Mi.alternate===null&&s(L,Ue),z=m(Mi,z,ot),Et===null?qe=Mi:Et.sibling=Mi,Et=Mi,Ue=ft}if(Tt.done)return a(L,Ue),pt&&Ar(L,ot),qe;if(Ue===null){for(;!Tt.done;ot++,Tt=G.next())Tt=le(L,Tt.value,ae),Tt!==null&&(z=m(Tt,z,ot),Et===null?qe=Tt:Et.sibling=Tt,Et=Tt);return pt&&Ar(L,ot),qe}for(Ue=l(Ue);!Tt.done;ot++,Tt=G.next())Tt=X(Ue,L,ot,Tt.value,ae),Tt!==null&&(n&&Tt.alternate!==null&&Ue.delete(Tt.key===null?ot:Tt.key),z=m(Tt,z,ot),Et===null?qe=Tt:Et.sibling=Tt,Et=Tt);return n&&Ue.forEach(function(YS){return s(L,YS)}),pt&&Ar(L,ot),qe}function zt(L,z,G,ae){if(typeof G=="object"&&G!==null&&G.type===q&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case j:e:{for(var qe=G.key;z!==null;){if(z.key===qe){if(qe=G.type,qe===q){if(z.tag===7){a(L,z.sibling),ae=f(z,G.props.children),ae.return=L,L=ae;break e}}else if(z.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===R&&Ta(qe)===z.type){a(L,z.sibling),ae=f(z,G.props),mc(ae,G),ae.return=L,L=ae;break e}a(L,z);break}else s(L,z);z=z.sibling}G.type===q?(ae=xa(G.props.children,L.mode,ae,G.key),ae.return=L,L=ae):(ae=Eh(G.type,G.key,G.props,null,L.mode,ae),mc(ae,G),ae.return=L,L=ae)}return x(L);case U:e:{for(qe=G.key;z!==null;){if(z.key===qe)if(z.tag===4&&z.stateNode.containerInfo===G.containerInfo&&z.stateNode.implementation===G.implementation){a(L,z.sibling),ae=f(z,G.children||[]),ae.return=L,L=ae;break e}else{a(L,z);break}else s(L,z);z=z.sibling}ae=am(G,L.mode,ae),ae.return=L,L=ae}return x(L);case R:return G=Ta(G),zt(L,z,G,ae)}if(me(G))return Oe(L,z,G,ae);if(O(G)){if(qe=O(G),typeof qe!="function")throw Error(r(150));return G=qe.call(G),$e(L,z,G,ae)}if(typeof G.then=="function")return zt(L,z,Rh(G),ae);if(G.$$typeof===be)return zt(L,z,Ah(L,G),ae);Dh(L,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,z!==null&&z.tag===6?(a(L,z.sibling),ae=f(z,G),ae.return=L,L=ae):(a(L,z),ae=im(G,L.mode,ae),ae.return=L,L=ae),x(L)):a(L,z)}return function(L,z,G,ae){try{fc=0;var qe=zt(L,z,G,ae);return Mo=null,qe}catch(Ue){if(Ue===ko||Ue===Nh)throw Ue;var Et=as(29,Ue,null,L.mode);return Et.lanes=ae,Et.return=L,Et}finally{}}}var Aa=Y0(!0),X0=Y0(!1),yi=!1;function _m(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function _i(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function xi(n,s,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(At&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=wh(n),k0(n,null,a),s}return vh(n,l,s,a),wh(n)}function gc(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,ql(n,a)}}function bm(n,s){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var vm=!1;function pc(){if(vm){var n=jo;if(n!==null)throw n}}function yc(n,s,a,l){vm=!1;var f=n.updateQueue;yi=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var M=E,K=M.next;M.next=null,x===null?m=K:x.next=K,x=M;var se=n.alternate;se!==null&&(se=se.updateQueue,E=se.lastBaseUpdate,E!==x&&(E===null?se.firstBaseUpdate=K:E.next=K,se.lastBaseUpdate=M))}if(m!==null){var le=f.baseState;x=0,se=K=M=null,E=m;do{var Q=E.lane&-536870913,X=Q!==E.lane;if(X?(dt&Q)===Q:(l&Q)===Q){Q!==0&&Q===Do&&(vm=!0),se!==null&&(se=se.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Oe=n,$e=E;Q=s;var zt=a;switch($e.tag){case 1:if(Oe=$e.payload,typeof Oe=="function"){le=Oe.call(zt,le,Q);break e}le=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=$e.payload,Q=typeof Oe=="function"?Oe.call(zt,le,Q):Oe,Q==null)break e;le=w({},le,Q);break e;case 2:yi=!0}}Q=E.callback,Q!==null&&(n.flags|=64,X&&(n.flags|=8192),X=f.callbacks,X===null?f.callbacks=[Q]:X.push(Q))}else X={lane:Q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},se===null?(K=se=X,M=le):se=se.next=X,x|=Q;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;X=E,E=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);se===null&&(M=le),f.baseState=M,f.firstBaseUpdate=K,f.lastBaseUpdate=se,m===null&&(f.shared.lanes=0),Ti|=x,n.lanes=x,n.memoizedState=le}}function W0(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function J0(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)W0(a[n],s)}var Oo=D(null),jh=D(0);function Z0(n,s){n=zr,J(jh,n),J(Oo,s),zr=n|s.baseLanes}function wm(){J(jh,zr),J(Oo,Oo.current)}function Em(){zr=jh.current,B(Oo),B(jh)}var os=D(null),Is=null;function bi(n){var s=n.alternate;J(an,an.current&1),J(os,n),Is===null&&(s===null||Oo.current!==null||s.memoizedState!==null)&&(Is=n)}function Tm(n){J(an,an.current),J(os,n),Is===null&&(Is=n)}function e_(n){n.tag===22?(J(an,an.current),J(os,n),Is===null&&(Is=n)):vi()}function vi(){J(an,an.current),J(os,os.current)}function ls(n){B(os),Is===n&&(Is=null),B(an)}var an=D(0);function kh(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Rg(a)||Dg(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Cr=0,st=null,Ot=null,fn=null,Mh=!1,Vo=!1,Ia=!1,Oh=0,_c=0,zo=null,U2=0;function en(){throw Error(r(321))}function Sm(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!is(n[a],s[a]))return!1;return!0}function Am(n,s,a,l,f,m){return Cr=m,st=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,V.H=n===null||n.memoizedState===null?z_:Bm,Ia=!1,m=a(l,f),Ia=!1,Vo&&(m=n_(s,a,l,f)),t_(n),m}function t_(n){V.H=vc;var s=Ot!==null&&Ot.next!==null;if(Cr=0,fn=Ot=st=null,Mh=!1,_c=0,zo=null,s)throw Error(r(300));n===null||mn||(n=n.dependencies,n!==null&&Sh(n)&&(mn=!0))}function n_(n,s,a,l){st=n;var f=0;do{if(Vo&&(zo=null),_c=0,Vo=!1,25<=f)throw Error(r(301));if(f+=1,fn=Ot=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}V.H=P_,m=s(a,l)}while(Vo);return m}function L2(){var n=V.H,s=n.useState()[0];return s=typeof s.then=="function"?xc(s):s,n=n.useState()[0],(Ot!==null?Ot.memoizedState:null)!==n&&(st.flags|=1024),s}function Im(){var n=Oh!==0;return Oh=0,n}function Nm(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function Cm(n){if(Mh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Mh=!1}Cr=0,fn=Ot=st=null,Vo=!1,_c=Oh=0,zo=null}function Kn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?st.memoizedState=fn=n:fn=fn.next=n,fn}function on(){if(Ot===null){var n=st.alternate;n=n!==null?n.memoizedState:null}else n=Ot.next;var s=fn===null?st.memoizedState:fn.next;if(s!==null)fn=s,Ot=n;else{if(n===null)throw st.alternate===null?Error(r(467)):Error(r(310));Ot=n,n={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},fn===null?st.memoizedState=fn=n:fn=fn.next=n}return fn}function Vh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xc(n){var s=_c;return _c+=1,zo===null&&(zo=[]),n=K0(zo,n,s),s=st,(fn===null?s.memoizedState:fn.next)===null&&(s=s.alternate,V.H=s===null||s.memoizedState===null?z_:Bm),n}function zh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return xc(n);if(n.$$typeof===be)return jn(n)}throw Error(r(438,String(n)))}function Rm(n){var s=null,a=st.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=st.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Vh(),st.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),l=0;l<n;l++)a[l]=k;return s.index++,a}function Rr(n,s){return typeof s=="function"?s(n):s}function Ph(n){var s=on();return Dm(s,Ot,n)}function Dm(n,s,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,m=l.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}s.baseQueue=f=m,l.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{s=f.next;var E=x=null,M=null,K=s,se=!1;do{var le=K.lane&-536870913;if(le!==K.lane?(dt&le)===le:(Cr&le)===le){var Q=K.revertLane;if(Q===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),le===Do&&(se=!0);else if((Cr&Q)===Q){K=K.next,Q===Do&&(se=!0);continue}else le={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},M===null?(E=M=le,x=m):M=M.next=le,st.lanes|=Q,Ti|=Q;le=K.action,Ia&&a(m,le),m=K.hasEagerState?K.eagerState:a(m,le)}else Q={lane:le,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},M===null?(E=M=Q,x=m):M=M.next=Q,st.lanes|=le,Ti|=le;K=K.next}while(K!==null&&K!==s);if(M===null?x=m:M.next=E,!is(m,n.memoizedState)&&(mn=!0,se&&(a=jo,a!==null)))throw a;n.memoizedState=m,n.baseState=x,n.baseQueue=M,l.lastRenderedState=m}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function jm(n){var s=on(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var x=f=f.next;do m=n(m,x.action),x=x.next;while(x!==f);is(m,s.memoizedState)||(mn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function s_(n,s,a){var l=st,f=on(),m=pt;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var x=!is((Ot||f).memoizedState,a);if(x&&(f.memoizedState=a,mn=!0),f=f.queue,Om(a_.bind(null,l,f,n),[n]),f.getSnapshot!==s||x||fn!==null&&fn.memoizedState.tag&1){if(l.flags|=2048,Po(9,{destroy:void 0},i_.bind(null,l,f,a,s),null),Ut===null)throw Error(r(349));m||(Cr&127)!==0||r_(l,s,a)}return a}function r_(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=st.updateQueue,s===null?(s=Vh(),st.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function i_(n,s,a,l){s.value=a,s.getSnapshot=l,o_(s)&&l_(n)}function a_(n,s,a){return a(function(){o_(s)&&l_(n)})}function o_(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!is(n,a)}catch{return!0}}function l_(n){var s=_a(n,2);s!==null&&es(s,n,2)}function km(n){var s=Kn();if(typeof n=="function"){var a=n;if(n=a(),Ia){Qe(!0);try{a()}finally{Qe(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:n},s}function c_(n,s,a,l){return n.baseState=a,Dm(n,Ot,typeof l=="function"?l:Rr)}function B2(n,s,a,l,f){if(Bh(n))throw Error(r(485));if(n=s.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};V.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,u_(s,m)):(m.next=a.next,s.pending=a.next=m)}}function u_(n,s){var a=s.action,l=s.payload,f=n.state;if(s.isTransition){var m=V.T,x={};V.T=x;try{var E=a(f,l),M=V.S;M!==null&&M(x,E),h_(n,s,E)}catch(K){Mm(n,s,K)}finally{m!==null&&x.types!==null&&(m.types=x.types),V.T=m}}else try{m=a(f,l),h_(n,s,m)}catch(K){Mm(n,s,K)}}function h_(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){d_(n,s,l)},function(l){return Mm(n,s,l)}):d_(n,s,a)}function d_(n,s,a){s.status="fulfilled",s.value=a,f_(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,u_(n,a)))}function Mm(n,s,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,f_(s),s=s.next;while(s!==l)}n.action=null}function f_(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function m_(n,s){return s}function g_(n,s){if(pt){var a=Ut.formState;if(a!==null){e:{var l=st;if(pt){if(Ft){t:{for(var f=Ft,m=As;f.nodeType!==8;){if(!m){f=null;break t}if(f=Ns(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ft=Ns(f.nextSibling),l=f.data==="F!";break e}}gi(l)}l=!1}l&&(s=a[0])}}return a=Kn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m_,lastRenderedState:s},a.queue=l,a=M_.bind(null,st,l),l.dispatch=a,l=km(!1),m=Lm.bind(null,st,!1,l.queue),l=Kn(),f={state:s,dispatch:null,action:n,pending:null},l.queue=f,a=B2.bind(null,st,f,m,a),f.dispatch=a,l.memoizedState=n,[s,a,!1]}function p_(n){var s=on();return y_(s,Ot,n)}function y_(n,s,a){if(s=Dm(n,s,m_)[0],n=Ph(Rr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=xc(s)}catch(x){throw x===ko?Nh:x}else l=s;s=on();var f=s.queue,m=f.dispatch;return a!==s.memoizedState&&(st.flags|=2048,Po(9,{destroy:void 0},q2.bind(null,f,a),null)),[l,m,n]}function q2(n,s){n.action=s}function __(n){var s=on(),a=Ot;if(a!==null)return y_(s,a,n);on(),s=s.memoizedState,a=on();var l=a.queue.dispatch;return a.memoizedState=n,[s,l,!1]}function Po(n,s,a,l){return n={tag:n,create:a,deps:l,inst:s,next:null},s=st.updateQueue,s===null&&(s=Vh(),st.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,s.lastEffect=n),n}function x_(){return on().memoizedState}function Uh(n,s,a,l){var f=Kn();st.flags|=n,f.memoizedState=Po(1|s,{destroy:void 0},a,l===void 0?null:l)}function Lh(n,s,a,l){var f=on();l=l===void 0?null:l;var m=f.memoizedState.inst;Ot!==null&&l!==null&&Sm(l,Ot.memoizedState.deps)?f.memoizedState=Po(s,m,a,l):(st.flags|=n,f.memoizedState=Po(1|s,m,a,l))}function b_(n,s){Uh(8390656,8,n,s)}function Om(n,s){Lh(2048,8,n,s)}function F2(n){st.flags|=4;var s=st.updateQueue;if(s===null)s=Vh(),st.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function v_(n){var s=on().memoizedState;return F2({ref:s,nextImpl:n}),function(){if((At&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function w_(n,s){return Lh(4,2,n,s)}function E_(n,s){return Lh(4,4,n,s)}function T_(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function S_(n,s,a){a=a!=null?a.concat([n]):null,Lh(4,4,T_.bind(null,s,n),a)}function Vm(){}function A_(n,s){var a=on();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Sm(s,l[1])?l[0]:(a.memoizedState=[n,s],n)}function I_(n,s){var a=on();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Sm(s,l[1]))return l[0];if(l=n(),Ia){Qe(!0);try{n()}finally{Qe(!1)}}return a.memoizedState=[l,s],l}function zm(n,s,a){return a===void 0||(Cr&1073741824)!==0&&(dt&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=Nx(),st.lanes|=n,Ti|=n,a)}function N_(n,s,a,l){return is(a,s)?a:Oo.current!==null?(n=zm(n,a,l),is(n,s)||(mn=!0),n):(Cr&42)===0||(Cr&1073741824)!==0&&(dt&261930)===0?(mn=!0,n.memoizedState=a):(n=Nx(),st.lanes|=n,Ti|=n,s)}function C_(n,s,a,l,f){var m=W.p;W.p=m!==0&&8>m?m:8;var x=V.T,E={};V.T=E,Lm(n,!1,s,a);try{var M=f(),K=V.S;if(K!==null&&K(E,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var se=P2(M,l);bc(n,s,se,hs(n))}else bc(n,s,l,hs(n))}catch(le){bc(n,s,{then:function(){},status:"rejected",reason:le},hs())}finally{W.p=m,x!==null&&E.types!==null&&(x.types=E.types),V.T=x}}function H2(){}function Pm(n,s,a,l){if(n.tag!==5)throw Error(r(476));var f=R_(n).queue;C_(n,f,s,re,a===null?H2:function(){return D_(n),a(l)})}function R_(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:re},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function D_(n){var s=R_(n);s.next===null&&(s=n.alternate.memoizedState),bc(n,s.next.queue,{},hs())}function Um(){return jn(zc)}function j_(){return on().memoizedState}function k_(){return on().memoizedState}function G2(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=hs();n=_i(a);var l=xi(s,n,a);l!==null&&(es(l,s,a),gc(l,s,a)),s={cache:mm()},n.payload=s;return}s=s.return}}function K2(n,s,a){var l=hs();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Bh(n)?O_(s,a):(a=sm(n,s,a,l),a!==null&&(es(a,n,l),V_(a,s,l)))}function M_(n,s,a){var l=hs();bc(n,s,a,l)}function bc(n,s,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Bh(n))O_(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var x=s.lastRenderedState,E=m(x,a);if(f.hasEagerState=!0,f.eagerState=E,is(E,x))return vh(n,s,f,0),Ut===null&&bh(),!1}catch{}finally{}if(a=sm(n,s,f,l),a!==null)return es(a,n,l),V_(a,s,l),!0}return!1}function Lm(n,s,a,l){if(l={lane:2,revertLane:_g(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Bh(n)){if(s)throw Error(r(479))}else s=sm(n,a,l,2),s!==null&&es(s,n,2)}function Bh(n){var s=n.alternate;return n===st||s!==null&&s===st}function O_(n,s){Vo=Mh=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function V_(n,s,a){if((a&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,ql(n,a)}}var vc={readContext:jn,use:zh,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useLayoutEffect:en,useInsertionEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useSyncExternalStore:en,useId:en,useHostTransitionStatus:en,useFormState:en,useActionState:en,useOptimistic:en,useMemoCache:en,useCacheRefresh:en};vc.useEffectEvent=en;var z_={readContext:jn,use:zh,useCallback:function(n,s){return Kn().memoizedState=[n,s===void 0?null:s],n},useContext:jn,useEffect:b_,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Uh(4194308,4,T_.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Uh(4194308,4,n,s)},useInsertionEffect:function(n,s){Uh(4,2,n,s)},useMemo:function(n,s){var a=Kn();s=s===void 0?null:s;var l=n();if(Ia){Qe(!0);try{n()}finally{Qe(!1)}}return a.memoizedState=[l,s],l},useReducer:function(n,s,a){var l=Kn();if(a!==void 0){var f=a(s);if(Ia){Qe(!0);try{a(s)}finally{Qe(!1)}}}else f=s;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=K2.bind(null,st,n),[l.memoizedState,n]},useRef:function(n){var s=Kn();return n={current:n},s.memoizedState=n},useState:function(n){n=km(n);var s=n.queue,a=M_.bind(null,st,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:Vm,useDeferredValue:function(n,s){var a=Kn();return zm(a,n,s)},useTransition:function(){var n=km(!1);return n=C_.bind(null,st,n.queue,!0,!1),Kn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var l=st,f=Kn();if(pt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),Ut===null)throw Error(r(349));(dt&127)!==0||r_(l,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,b_(a_.bind(null,l,m,n),[n]),l.flags|=2048,Po(9,{destroy:void 0},i_.bind(null,l,m,a,s),null),a},useId:function(){var n=Kn(),s=Ut.identifierPrefix;if(pt){var a=cr,l=lr;a=(l&~(1<<32-Je(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Oh++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=U2++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Um,useFormState:g_,useActionState:g_,useOptimistic:function(n){var s=Kn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Lm.bind(null,st,!0,a),a.dispatch=s,[n,s]},useMemoCache:Rm,useCacheRefresh:function(){return Kn().memoizedState=G2.bind(null,st)},useEffectEvent:function(n){var s=Kn(),a={impl:n};return s.memoizedState=a,function(){if((At&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Bm={readContext:jn,use:zh,useCallback:A_,useContext:jn,useEffect:Om,useImperativeHandle:S_,useInsertionEffect:w_,useLayoutEffect:E_,useMemo:I_,useReducer:Ph,useRef:x_,useState:function(){return Ph(Rr)},useDebugValue:Vm,useDeferredValue:function(n,s){var a=on();return N_(a,Ot.memoizedState,n,s)},useTransition:function(){var n=Ph(Rr)[0],s=on().memoizedState;return[typeof n=="boolean"?n:xc(n),s]},useSyncExternalStore:s_,useId:j_,useHostTransitionStatus:Um,useFormState:p_,useActionState:p_,useOptimistic:function(n,s){var a=on();return c_(a,Ot,n,s)},useMemoCache:Rm,useCacheRefresh:k_};Bm.useEffectEvent=v_;var P_={readContext:jn,use:zh,useCallback:A_,useContext:jn,useEffect:Om,useImperativeHandle:S_,useInsertionEffect:w_,useLayoutEffect:E_,useMemo:I_,useReducer:jm,useRef:x_,useState:function(){return jm(Rr)},useDebugValue:Vm,useDeferredValue:function(n,s){var a=on();return Ot===null?zm(a,n,s):N_(a,Ot.memoizedState,n,s)},useTransition:function(){var n=jm(Rr)[0],s=on().memoizedState;return[typeof n=="boolean"?n:xc(n),s]},useSyncExternalStore:s_,useId:j_,useHostTransitionStatus:Um,useFormState:__,useActionState:__,useOptimistic:function(n,s){var a=on();return Ot!==null?c_(a,Ot,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Rm,useCacheRefresh:k_};P_.useEffectEvent=v_;function qm(n,s,a,l){s=n.memoizedState,a=a(l,s),a=a==null?s:w({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Fm={enqueueSetState:function(n,s,a){n=n._reactInternals;var l=hs(),f=_i(l);f.payload=s,a!=null&&(f.callback=a),s=xi(n,f,l),s!==null&&(es(s,n,l),gc(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var l=hs(),f=_i(l);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=xi(n,f,l),s!==null&&(es(s,n,l),gc(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=hs(),l=_i(a);l.tag=2,s!=null&&(l.callback=s),s=xi(n,l,a),s!==null&&(es(s,n,a),gc(s,n,a))}};function U_(n,s,a,l,f,m,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,m,x):s.prototype&&s.prototype.isPureReactComponent?!oc(a,l)||!oc(f,m):!0}function L_(n,s,a,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==n&&Fm.enqueueReplaceState(s,s.state,null)}function Na(n,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(n=n.defaultProps){a===s&&(a=w({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function B_(n){xh(n)}function q_(n){console.error(n)}function F_(n){xh(n)}function qh(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function H_(n,s,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Hm(n,s,a){return a=_i(a),a.tag=3,a.payload={element:null},a.callback=function(){qh(n,s)},a}function G_(n){return n=_i(n),n.tag=3,n}function K_(n,s,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;n.payload=function(){return f(m)},n.callback=function(){H_(s,a,l)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(n.callback=function(){H_(s,a,l),typeof f!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function $2(n,s,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Ro(s,a,f,!0),a=os.current,a!==null){switch(a.tag){case 31:case 13:return Is===null?ed():a.alternate===null&&tn===0&&(tn=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Ch?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),gg(n,l,f)),!1;case 22:return a.flags|=65536,l===Ch?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),gg(n,l,f)),!1}throw Error(r(435,a.tag))}return gg(n,l,f),ed(),!1}if(pt)return s=os.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==cm&&(n=Error(r(422),{cause:l}),uc(Es(n,a)))):(l!==cm&&(s=Error(r(423),{cause:l}),uc(Es(s,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Es(l,a),f=Hm(n.stateNode,l,f),bm(n,f),tn!==4&&(tn=2)),!1;var m=Error(r(520),{cause:l});if(m=Es(m,a),Cc===null?Cc=[m]:Cc.push(m),tn!==4&&(tn=2),s===null)return!0;l=Es(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Hm(a.stateNode,l,n),bm(a,n),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Si===null||!Si.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=G_(f),K_(f,n,a,l),bm(a,f),!1}a=a.return}while(a!==null);return!1}var Gm=Error(r(461)),mn=!1;function kn(n,s,a,l){s.child=n===null?X0(s,null,a,l):Aa(s,n.child,a,l)}function $_(n,s,a,l,f){a=a.render;var m=s.ref;if("ref"in l){var x={};for(var E in l)E!=="ref"&&(x[E]=l[E])}else x=l;return wa(s),l=Am(n,s,a,x,m,f),E=Im(),n!==null&&!mn?(Nm(n,s,f),Dr(n,s,f)):(pt&&E&&om(s),s.flags|=1,kn(n,s,l,f),s.child)}function Q_(n,s,a,l,f){if(n===null){var m=a.type;return typeof m=="function"&&!rm(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,Y_(n,s,m,l,f)):(n=Eh(a.type,null,l,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!Zm(n,f)){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:oc,a(x,l)&&n.ref===s.ref)return Dr(n,s,f)}return s.flags|=1,n=Sr(m,l),n.ref=s.ref,n.return=s,s.child=n}function Y_(n,s,a,l,f){if(n!==null){var m=n.memoizedProps;if(oc(m,l)&&n.ref===s.ref)if(mn=!1,s.pendingProps=l=m,Zm(n,f))(n.flags&131072)!==0&&(mn=!0);else return s.lanes=n.lanes,Dr(n,s,f)}return Km(n,s,a,l,f)}function X_(n,s,a,l){var f=l.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,n!==null){for(l=s.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,s.child=null;return W_(n,s,m,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ih(s,m!==null?m.cachePool:null),m!==null?Z0(s,m):wm(),e_(s);else return l=s.lanes=536870912,W_(n,s,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(Ih(s,m.cachePool),Z0(s,m),vi(),s.memoizedState=null):(n!==null&&Ih(s,null),wm(),vi());return kn(n,s,f,a),s.child}function wc(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function W_(n,s,a,l,f){var m=pm();return m=m===null?null:{parent:dn._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},n!==null&&Ih(s,null),wm(),e_(s),n!==null&&Ro(n,s,l,!0),s.childLanes=f,null}function Fh(n,s){return s=Gh({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function J_(n,s,a){return Aa(s,n.child,null,a),n=Fh(s,s.pendingProps),n.flags|=2,ls(s),s.memoizedState=null,n}function Q2(n,s,a){var l=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(pt){if(l.mode==="hidden")return n=Fh(s,l),s.lanes=536870912,wc(null,n);if(Tm(s),(n=Ft)?(n=ub(n,As),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:fi!==null?{id:lr,overflow:cr}:null,retryLane:536870912,hydrationErrors:null},a=O0(n),a.return=s,s.child=a,Dn=s,Ft=null)):n=null,n===null)throw gi(s);return s.lanes=536870912,null}return Fh(s,l)}var m=n.memoizedState;if(m!==null){var x=m.dehydrated;if(Tm(s),f)if(s.flags&256)s.flags&=-257,s=J_(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(mn||Ro(n,s,a,!1),f=(a&n.childLanes)!==0,mn||f){if(l=Ut,l!==null&&(x=Fl(l,a),x!==0&&x!==m.retryLane))throw m.retryLane=x,_a(n,x),es(l,n,x),Gm;ed(),s=J_(n,s,a)}else n=m.treeContext,Ft=Ns(x.nextSibling),Dn=s,pt=!0,mi=null,As=!1,n!==null&&P0(s,n),s=Fh(s,l),s.flags|=4096;return s}return n=Sr(n.child,{mode:l.mode,children:l.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Hh(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function Km(n,s,a,l,f){return wa(s),a=Am(n,s,a,l,void 0,f),l=Im(),n!==null&&!mn?(Nm(n,s,f),Dr(n,s,f)):(pt&&l&&om(s),s.flags|=1,kn(n,s,a,f),s.child)}function Z_(n,s,a,l,f,m){return wa(s),s.updateQueue=null,a=n_(s,l,a,f),t_(n),l=Im(),n!==null&&!mn?(Nm(n,s,m),Dr(n,s,m)):(pt&&l&&om(s),s.flags|=1,kn(n,s,a,m),s.child)}function ex(n,s,a,l,f){if(wa(s),s.stateNode===null){var m=Ao,x=a.contextType;typeof x=="object"&&x!==null&&(m=jn(x)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Fm,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},_m(s),x=a.contextType,m.context=typeof x=="object"&&x!==null?jn(x):Ao,m.state=s.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(qm(s,a,x,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&Fm.enqueueReplaceState(m,m.state,null),yc(s,l,m,f),pc(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){m=s.stateNode;var E=s.memoizedProps,M=Na(a,E);m.props=M;var K=m.context,se=a.contextType;x=Ao,typeof se=="object"&&se!==null&&(x=jn(se));var le=a.getDerivedStateFromProps;se=typeof le=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,se||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||K!==x)&&L_(s,m,l,x),yi=!1;var Q=s.memoizedState;m.state=Q,yc(s,l,m,f),pc(),K=s.memoizedState,E||Q!==K||yi?(typeof le=="function"&&(qm(s,a,le,l),K=s.memoizedState),(M=yi||U_(s,a,M,l,Q,K,x))?(se||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=K),m.props=l,m.state=K,m.context=x,l=M):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,xm(n,s),x=s.memoizedProps,se=Na(a,x),m.props=se,le=s.pendingProps,Q=m.context,K=a.contextType,M=Ao,typeof K=="object"&&K!==null&&(M=jn(K)),E=a.getDerivedStateFromProps,(K=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==le||Q!==M)&&L_(s,m,l,M),yi=!1,Q=s.memoizedState,m.state=Q,yc(s,l,m,f),pc();var X=s.memoizedState;x!==le||Q!==X||yi||n!==null&&n.dependencies!==null&&Sh(n.dependencies)?(typeof E=="function"&&(qm(s,a,E,l),X=s.memoizedState),(se=yi||U_(s,a,se,l,Q,X,M)||n!==null&&n.dependencies!==null&&Sh(n.dependencies))?(K||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,X,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,X,M)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=X),m.props=l,m.state=X,m.context=M,l=se):(typeof m.componentDidUpdate!="function"||x===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),l=!1)}return m=l,Hh(n,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&l?(s.child=Aa(s,n.child,null,f),s.child=Aa(s,null,a,f)):kn(n,s,a,f),s.memoizedState=m.state,n=s.child):n=Dr(n,s,f),n}function tx(n,s,a,l){return ba(),s.flags|=256,kn(n,s,a,l),s.child}var $m={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qm(n){return{baseLanes:n,cachePool:H0()}}function Ym(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=us),n}function nx(n,s,a){var l=s.pendingProps,f=!1,m=(s.flags&128)!==0,x;if((x=m)||(x=n!==null&&n.memoizedState===null?!1:(an.current&2)!==0),x&&(f=!0,s.flags&=-129),x=(s.flags&32)!==0,s.flags&=-33,n===null){if(pt){if(f?bi(s):vi(),(n=Ft)?(n=ub(n,As),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:fi!==null?{id:lr,overflow:cr}:null,retryLane:536870912,hydrationErrors:null},a=O0(n),a.return=s,s.child=a,Dn=s,Ft=null)):n=null,n===null)throw gi(s);return Dg(n)?s.lanes=32:s.lanes=536870912,null}var E=l.children;return l=l.fallback,f?(vi(),f=s.mode,E=Gh({mode:"hidden",children:E},f),l=xa(l,f,a,null),E.return=s,l.return=s,E.sibling=l,s.child=E,l=s.child,l.memoizedState=Qm(a),l.childLanes=Ym(n,x,a),s.memoizedState=$m,wc(null,l)):(bi(s),Xm(s,E))}var M=n.memoizedState;if(M!==null&&(E=M.dehydrated,E!==null)){if(m)s.flags&256?(bi(s),s.flags&=-257,s=Wm(n,s,a)):s.memoizedState!==null?(vi(),s.child=n.child,s.flags|=128,s=null):(vi(),E=l.fallback,f=s.mode,l=Gh({mode:"visible",children:l.children},f),E=xa(E,f,a,null),E.flags|=2,l.return=s,E.return=s,l.sibling=E,s.child=l,Aa(s,n.child,null,a),l=s.child,l.memoizedState=Qm(a),l.childLanes=Ym(n,x,a),s.memoizedState=$m,s=wc(null,l));else if(bi(s),Dg(E)){if(x=E.nextSibling&&E.nextSibling.dataset,x)var K=x.dgst;x=K,l=Error(r(419)),l.stack="",l.digest=x,uc({value:l,source:null,stack:null}),s=Wm(n,s,a)}else if(mn||Ro(n,s,a,!1),x=(a&n.childLanes)!==0,mn||x){if(x=Ut,x!==null&&(l=Fl(x,a),l!==0&&l!==M.retryLane))throw M.retryLane=l,_a(n,l),es(x,n,l),Gm;Rg(E)||ed(),s=Wm(n,s,a)}else Rg(E)?(s.flags|=192,s.child=n.child,s=null):(n=M.treeContext,Ft=Ns(E.nextSibling),Dn=s,pt=!0,mi=null,As=!1,n!==null&&P0(s,n),s=Xm(s,l.children),s.flags|=4096);return s}return f?(vi(),E=l.fallback,f=s.mode,M=n.child,K=M.sibling,l=Sr(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,K!==null?E=Sr(K,E):(E=xa(E,f,a,null),E.flags|=2),E.return=s,l.return=s,l.sibling=E,s.child=l,wc(null,l),l=s.child,E=n.child.memoizedState,E===null?E=Qm(a):(f=E.cachePool,f!==null?(M=dn._currentValue,f=f.parent!==M?{parent:M,pool:M}:f):f=H0(),E={baseLanes:E.baseLanes|a,cachePool:f}),l.memoizedState=E,l.childLanes=Ym(n,x,a),s.memoizedState=$m,wc(n.child,l)):(bi(s),a=n.child,n=a.sibling,a=Sr(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,n!==null&&(x=s.deletions,x===null?(s.deletions=[n],s.flags|=16):x.push(n)),s.child=a,s.memoizedState=null,a)}function Xm(n,s){return s=Gh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Gh(n,s){return n=as(22,n,null,s),n.lanes=0,n}function Wm(n,s,a){return Aa(s,n.child,null,a),n=Xm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function sx(n,s,a){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),dm(n.return,s,a)}function Jm(n,s,a,l,f,m){var x=n.memoizedState;x===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:m}:(x.isBackwards=s,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=a,x.tailMode=f,x.treeForkCount=m)}function rx(n,s,a){var l=s.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var x=an.current,E=(x&2)!==0;if(E?(x=x&1|2,s.flags|=128):x&=1,J(an,x),kn(n,s,l,a),l=pt?cc:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sx(n,a,s);else if(n.tag===19)sx(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&kh(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Jm(s,!1,f,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&kh(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Jm(s,!0,a,null,m,l);break;case"together":Jm(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Dr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Ti|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(Ro(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=Sr(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Sr(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Zm(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Sh(n)))}function Y2(n,s,a){switch(s.tag){case 3:it(s,s.stateNode.containerInfo),pi(s,dn,n.memoizedState.cache),ba();break;case 27:case 5:Lt(s);break;case 4:it(s,s.stateNode.containerInfo);break;case 10:pi(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Tm(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(bi(s),s.flags|=128,null):(a&s.child.childLanes)!==0?nx(n,s,a):(bi(s),n=Dr(n,s,a),n!==null?n.sibling:null);bi(s);break;case 19:var f=(n.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Ro(n,s,a,!1),l=(a&s.childLanes)!==0),f){if(l)return rx(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),J(an,an.current),l)break;return null;case 22:return s.lanes=0,X_(n,s,a,s.pendingProps);case 24:pi(s,dn,n.memoizedState.cache)}return Dr(n,s,a)}function ix(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)mn=!0;else{if(!Zm(n,a)&&(s.flags&128)===0)return mn=!1,Y2(n,s,a);mn=(n.flags&131072)!==0}else mn=!1,pt&&(s.flags&1048576)!==0&&z0(s,cc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(n=Ta(s.elementType),s.type=n,typeof n=="function")rm(n)?(l=Na(n,l),s.tag=1,s=ex(null,s,n,l,a)):(s.tag=0,s=Km(null,s,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===he){s.tag=11,s=$_(null,s,n,l,a);break e}else if(f===N){s.tag=14,s=Q_(null,s,n,l,a);break e}}throw s=ue(n)||n,Error(r(306,s,""))}}return s;case 0:return Km(n,s,s.type,s.pendingProps,a);case 1:return l=s.type,f=Na(l,s.pendingProps),ex(n,s,l,f,a);case 3:e:{if(it(s,s.stateNode.containerInfo),n===null)throw Error(r(387));l=s.pendingProps;var m=s.memoizedState;f=m.element,xm(n,s),yc(s,l,null,a);var x=s.memoizedState;if(l=x.cache,pi(s,dn,l),l!==m.cache&&fm(s,[dn],a,!0),pc(),l=x.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:x.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=tx(n,s,l,a);break e}else if(l!==f){f=Es(Error(r(424)),s),uc(f),s=tx(n,s,l,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ft=Ns(n.firstChild),Dn=s,pt=!0,mi=null,As=!0,a=X0(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ba(),l===f){s=Dr(n,s,a);break e}kn(n,s,l,a)}s=s.child}return s;case 26:return Hh(n,s),n===null?(a=pb(s.type,null,s.pendingProps,null))?s.memoizedState=a:pt||(a=s.type,n=s.pendingProps,l=od(Ce.current).createElement(a),l[cn]=s,l[Sn]=n,Mn(l,a,n),un(l),s.stateNode=l):s.memoizedState=pb(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Lt(s),n===null&&pt&&(l=s.stateNode=fb(s.type,s.pendingProps,Ce.current),Dn=s,As=!0,f=Ft,Ci(s.type)?(jg=f,Ft=Ns(l.firstChild)):Ft=f),kn(n,s,s.pendingProps.children,a),Hh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&pt&&((f=l=Ft)&&(l=SS(l,s.type,s.pendingProps,As),l!==null?(s.stateNode=l,Dn=s,Ft=Ns(l.firstChild),As=!1,f=!0):f=!1),f||gi(s)),Lt(s),f=s.type,m=s.pendingProps,x=n!==null?n.memoizedProps:null,l=m.children,Ig(f,m)?l=null:x!==null&&Ig(f,x)&&(s.flags|=32),s.memoizedState!==null&&(f=Am(n,s,L2,null,null,a),zc._currentValue=f),Hh(n,s),kn(n,s,l,a),s.child;case 6:return n===null&&pt&&((n=a=Ft)&&(a=AS(a,s.pendingProps,As),a!==null?(s.stateNode=a,Dn=s,Ft=null,n=!0):n=!1),n||gi(s)),null;case 13:return nx(n,s,a);case 4:return it(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=Aa(s,null,l,a):kn(n,s,l,a),s.child;case 11:return $_(n,s,s.type,s.pendingProps,a);case 7:return kn(n,s,s.pendingProps,a),s.child;case 8:return kn(n,s,s.pendingProps.children,a),s.child;case 12:return kn(n,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,pi(s,s.type,l.value),kn(n,s,l.children,a),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,wa(s),f=jn(f),l=l(f),s.flags|=1,kn(n,s,l,a),s.child;case 14:return Q_(n,s,s.type,s.pendingProps,a);case 15:return Y_(n,s,s.type,s.pendingProps,a);case 19:return rx(n,s,a);case 31:return Q2(n,s,a);case 22:return X_(n,s,a,s.pendingProps);case 24:return wa(s),l=jn(dn),n===null?(f=pm(),f===null&&(f=Ut,m=mm(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),s.memoizedState={parent:l,cache:f},_m(s),pi(s,dn,f)):((n.lanes&a)!==0&&(xm(n,s),yc(s,null,null,a),pc()),f=n.memoizedState,m=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),pi(s,dn,l)):(l=m.cache,pi(s,dn,l),l!==f.cache&&fm(s,[dn],a,!0))),kn(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function jr(n){n.flags|=4}function eg(n,s,a,l,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(jx())n.flags|=8192;else throw Sa=Ch,ym}else n.flags&=-16777217}function ax(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!vb(s))if(jx())n.flags|=8192;else throw Sa=Ch,ym}function Kh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Bl():536870912,n.lanes|=s,qo|=s)}function Ec(n,s){if(!pt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function Ht(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,s}function X2(n,s,a){var l=s.pendingProps;switch(lm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(s),null;case 1:return Ht(s),null;case 3:return a=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Nr(dn),at(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Co(s)?jr(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,um())),Ht(s),null;case 26:var f=s.type,m=s.memoizedState;return n===null?(jr(s),m!==null?(Ht(s),ax(s,m)):(Ht(s),eg(s,f,null,l,a))):m?m!==n.memoizedState?(jr(s),Ht(s),ax(s,m)):(Ht(s),s.flags&=-16777217):(n=n.memoizedProps,n!==l&&jr(s),Ht(s),eg(s,f,n,l,a)),null;case 27:if(Bt(s),a=Ce.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&jr(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return Ht(s),null}n=fe.current,Co(s)?U0(s):(n=fb(f,l,a),s.stateNode=n,jr(s))}return Ht(s),null;case 5:if(Bt(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&jr(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return Ht(s),null}if(m=fe.current,Co(s))U0(s);else{var x=od(Ce.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?x.createElement(f,{is:l.is}):x.createElement(f)}}m[cn]=s,m[Sn]=l;e:for(x=s.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===s)break e;for(;x.sibling===null;){if(x.return===null||x.return===s)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}s.stateNode=m;e:switch(Mn(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&jr(s)}}return Ht(s),eg(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&jr(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(n=Ce.current,Co(s)){if(n=s.stateNode,a=s.memoizedProps,l=null,f=Dn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[cn]=s,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||nb(n.nodeValue,a)),n||gi(s,!0)}else n=od(n).createTextNode(l),n[cn]=s,s.stateNode=n}return Ht(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(l=Co(s),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[cn]=s}else ba(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ht(s),n=!1}else a=um(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(ls(s),s):(ls(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Ht(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Co(s),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[cn]=s}else ba(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ht(s),f=!1}else f=um(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(ls(s),s):(ls(s),null)}return ls(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),Kh(s,s.updateQueue),Ht(s),null);case 4:return at(),n===null&&wg(s.stateNode.containerInfo),Ht(s),null;case 10:return Nr(s.type),Ht(s),null;case 19:if(B(an),l=s.memoizedState,l===null)return Ht(s),null;if(f=(s.flags&128)!==0,m=l.rendering,m===null)if(f)Ec(l,!1);else{if(tn!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=kh(n),m!==null){for(s.flags|=128,Ec(l,!1),n=m.updateQueue,s.updateQueue=n,Kh(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)M0(a,n),a=a.sibling;return J(an,an.current&1|2),pt&&Ar(s,l.treeForkCount),s.child}n=n.sibling}l.tail!==null&&Z()>Wh&&(s.flags|=128,f=!0,Ec(l,!1),s.lanes=4194304)}else{if(!f)if(n=kh(m),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,Kh(s,n),Ec(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!pt)return Ht(s),null}else 2*Z()-l.renderingStartTime>Wh&&a!==536870912&&(s.flags|=128,f=!0,Ec(l,!1),s.lanes=4194304);l.isBackwards?(m.sibling=s.child,s.child=m):(n=l.last,n!==null?n.sibling=m:s.child=m,l.last=m)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=Z(),n.sibling=null,a=an.current,J(an,f?a&1|2:a&1),pt&&Ar(s,l.treeForkCount),n):(Ht(s),null);case 22:case 23:return ls(s),Em(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(Ht(s),s.subtreeFlags&6&&(s.flags|=8192)):Ht(s),a=s.updateQueue,a!==null&&Kh(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),n!==null&&B(Ea),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Nr(dn),Ht(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function W2(n,s){switch(lm(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Nr(dn),at(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Bt(s),null;case 31:if(s.memoizedState!==null){if(ls(s),s.alternate===null)throw Error(r(340));ba()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(ls(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));ba()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return B(an),null;case 4:return at(),null;case 10:return Nr(s.type),null;case 22:case 23:return ls(s),Em(),n!==null&&B(Ea),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Nr(dn),null;case 25:return null;default:return null}}function ox(n,s){switch(lm(s),s.tag){case 3:Nr(dn),at();break;case 26:case 27:case 5:Bt(s);break;case 4:at();break;case 31:s.memoizedState!==null&&ls(s);break;case 13:ls(s);break;case 19:B(an);break;case 10:Nr(s.type);break;case 22:case 23:ls(s),Em(),n!==null&&B(Ea);break;case 24:Nr(dn)}}function Tc(n,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var m=a.create,x=a.inst;l=m(),x.destroy=l}a=a.next}while(a!==f)}}catch(E){Ct(s,s.return,E)}}function wi(n,s,a){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&n)===n){var x=l.inst,E=x.destroy;if(E!==void 0){x.destroy=void 0,f=s;var M=a,K=E;try{K()}catch(se){Ct(f,M,se)}}}l=l.next}while(l!==m)}}catch(se){Ct(s,s.return,se)}}function lx(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{J0(s,a)}catch(l){Ct(n,n.return,l)}}}function cx(n,s,a){a.props=Na(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){Ct(n,s,l)}}function Sc(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){Ct(n,s,f)}}function ur(n,s){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Ct(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Ct(n,s,f)}else a.current=null}function ux(n){var s=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Ct(n,n.return,f)}}function tg(n,s,a){try{var l=n.stateNode;xS(l,n.type,a,s),l[Sn]=s}catch(f){Ct(n,n.return,f)}}function hx(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ci(n.type)||n.tag===4}function ng(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ci(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function sg(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Vs));else if(l!==4&&(l===27&&Ci(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(sg(n,s,a),n=n.sibling;n!==null;)sg(n,s,a),n=n.sibling}function $h(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(l!==4&&(l===27&&Ci(n.type)&&(a=n.stateNode),n=n.child,n!==null))for($h(n,s,a),n=n.sibling;n!==null;)$h(n,s,a),n=n.sibling}function dx(n){var s=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Mn(s,l,a),s[cn]=n,s[Sn]=a}catch(m){Ct(n,n.return,m)}}var kr=!1,gn=!1,rg=!1,fx=typeof WeakSet=="function"?WeakSet:Set,In=null;function J2(n,s){if(n=n.containerInfo,Sg=md,n=S0(n),Wf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,E=-1,M=-1,K=0,se=0,le=n,Q=null;t:for(;;){for(var X;le!==a||f!==0&&le.nodeType!==3||(E=x+f),le!==m||l!==0&&le.nodeType!==3||(M=x+l),le.nodeType===3&&(x+=le.nodeValue.length),(X=le.firstChild)!==null;)Q=le,le=X;for(;;){if(le===n)break t;if(Q===a&&++K===f&&(E=x),Q===m&&++se===l&&(M=x),(X=le.nextSibling)!==null)break;le=Q,Q=le.parentNode}le=X}a=E===-1||M===-1?null:{start:E,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ag={focusedElem:n,selectionRange:a},md=!1,In=s;In!==null;)if(s=In,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,In=n;else for(;In!==null;){switch(s=In,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,a=s,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Oe=Na(a.type,f);n=l.getSnapshotBeforeUpdate(Oe,m),l.__reactInternalSnapshotBeforeUpdate=n}catch($e){Ct(a,a.return,$e)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)Cg(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Cg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,In=n;break}In=s.return}}function mx(n,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Or(n,a),l&4&&Tc(5,a);break;case 1:if(Or(n,a),l&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(x){Ct(a,a.return,x)}else{var f=Na(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(x){Ct(a,a.return,x)}}l&64&&lx(a),l&512&&Sc(a,a.return);break;case 3:if(Or(n,a),l&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{J0(n,s)}catch(x){Ct(a,a.return,x)}}break;case 27:s===null&&l&4&&dx(a);case 26:case 5:Or(n,a),s===null&&l&4&&ux(a),l&512&&Sc(a,a.return);break;case 12:Or(n,a);break;case 31:Or(n,a),l&4&&yx(n,a);break;case 13:Or(n,a),l&4&&_x(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=oS.bind(null,a),IS(n,a))));break;case 22:if(l=a.memoizedState!==null||kr,!l){s=s!==null&&s.memoizedState!==null||gn,f=kr;var m=gn;kr=l,(gn=s)&&!m?Vr(n,a,(a.subtreeFlags&8772)!==0):Or(n,a),kr=f,gn=m}break;case 30:break;default:Or(n,a)}}function gx(n){var s=n.alternate;s!==null&&(n.alternate=null,gx(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ho(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Kt=null,Xn=!1;function Mr(n,s,a){for(a=a.child;a!==null;)px(n,s,a),a=a.sibling}function px(n,s,a){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(Fe,a)}catch{}switch(a.tag){case 26:gn||ur(a,s),Mr(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:gn||ur(a,s);var l=Kt,f=Xn;Ci(a.type)&&(Kt=a.stateNode,Xn=!1),Mr(n,s,a),Mc(a.stateNode),Kt=l,Xn=f;break;case 5:gn||ur(a,s);case 6:if(l=Kt,f=Xn,Kt=null,Mr(n,s,a),Kt=l,Xn=f,Kt!==null)if(Xn)try{(Kt.nodeType===9?Kt.body:Kt.nodeName==="HTML"?Kt.ownerDocument.body:Kt).removeChild(a.stateNode)}catch(m){Ct(a,s,m)}else try{Kt.removeChild(a.stateNode)}catch(m){Ct(a,s,m)}break;case 18:Kt!==null&&(Xn?(n=Kt,lb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Xo(n)):lb(Kt,a.stateNode));break;case 4:l=Kt,f=Xn,Kt=a.stateNode.containerInfo,Xn=!0,Mr(n,s,a),Kt=l,Xn=f;break;case 0:case 11:case 14:case 15:wi(2,a,s),gn||wi(4,a,s),Mr(n,s,a);break;case 1:gn||(ur(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&cx(a,s,l)),Mr(n,s,a);break;case 21:Mr(n,s,a);break;case 22:gn=(l=gn)||a.memoizedState!==null,Mr(n,s,a),gn=l;break;default:Mr(n,s,a)}}function yx(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Xo(n)}catch(a){Ct(s,s.return,a)}}}function _x(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Xo(n)}catch(a){Ct(s,s.return,a)}}function Z2(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new fx),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new fx),s;default:throw Error(r(435,n.tag))}}function Qh(n,s){var a=Z2(n);s.forEach(function(l){if(!a.has(l)){a.add(l);var f=lS.bind(null,n,l);l.then(f,f)}})}function Wn(n,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=n,x=s,E=x;e:for(;E!==null;){switch(E.tag){case 27:if(Ci(E.type)){Kt=E.stateNode,Xn=!1;break e}break;case 5:Kt=E.stateNode,Xn=!1;break e;case 3:case 4:Kt=E.stateNode.containerInfo,Xn=!0;break e}E=E.return}if(Kt===null)throw Error(r(160));px(m,x,f),Kt=null,Xn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)xx(s,n),s=s.sibling}var qs=null;function xx(n,s){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Wn(s,n),Jn(n),l&4&&(wi(3,n,n.return),Tc(3,n),wi(5,n,n.return));break;case 1:Wn(s,n),Jn(n),l&512&&(gn||a===null||ur(a,a.return)),l&64&&kr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=qs;if(Wn(s,n),Jn(n),l&512&&(gn||a===null||ur(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Xs]||m[cn]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Mn(m,l,a),m[cn]=n,un(m),l=m;break e;case"link":var x=xb("link","href",f).get(l+(a.href||""));if(x){for(var E=0;E<x.length;E++)if(m=x[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(E,1);break t}}m=f.createElement(l),Mn(m,l,a),f.head.appendChild(m);break;case"meta":if(x=xb("meta","content",f).get(l+(a.content||""))){for(E=0;E<x.length;E++)if(m=x[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(E,1);break t}}m=f.createElement(l),Mn(m,l,a),f.head.appendChild(m);break;default:throw Error(r(468,l))}m[cn]=n,un(m),l=m}n.stateNode=l}else bb(f,n.type,n.stateNode);else n.stateNode=_b(f,l,n.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?bb(f,n.type,n.stateNode):_b(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&tg(n,n.memoizedProps,a.memoizedProps)}break;case 27:Wn(s,n),Jn(n),l&512&&(gn||a===null||ur(a,a.return)),a!==null&&l&4&&tg(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Wn(s,n),Jn(n),l&512&&(gn||a===null||ur(a,a.return)),n.flags&32){f=n.stateNode;try{Yn(f,"")}catch(Oe){Ct(n,n.return,Oe)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,tg(n,f,a!==null?a.memoizedProps:f)),l&1024&&(rg=!0);break;case 6:if(Wn(s,n),Jn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(Oe){Ct(n,n.return,Oe)}}break;case 3:if(ud=null,f=qs,qs=ld(s.containerInfo),Wn(s,n),qs=f,Jn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Xo(s.containerInfo)}catch(Oe){Ct(n,n.return,Oe)}rg&&(rg=!1,bx(n));break;case 4:l=qs,qs=ld(n.stateNode.containerInfo),Wn(s,n),Jn(n),qs=l;break;case 12:Wn(s,n),Jn(n);break;case 31:Wn(s,n),Jn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Qh(n,l)));break;case 13:Wn(s,n),Jn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Xh=Z()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Qh(n,l)));break;case 22:f=n.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,K=kr,se=gn;if(kr=K||f,gn=se||M,Wn(s,n),gn=se,kr=K,Jn(n),l&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||M||kr||gn||Ca(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){M=a=s;try{if(m=M.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{E=M.stateNode;var le=M.memoizedProps.style,Q=le!=null&&le.hasOwnProperty("display")?le.display:null;E.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Oe){Ct(M,M.return,Oe)}}}else if(s.tag===6){if(a===null){M=s;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(Oe){Ct(M,M.return,Oe)}}}else if(s.tag===18){if(a===null){M=s;try{var X=M.stateNode;f?cb(X,!0):cb(M.stateNode,!1)}catch(Oe){Ct(M,M.return,Oe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Qh(n,a))));break;case 19:Wn(s,n),Jn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Qh(n,l)));break;case 30:break;case 21:break;default:Wn(s,n),Jn(n)}}function Jn(n){var s=n.flags;if(s&2){try{for(var a,l=n.return;l!==null;){if(hx(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,m=ng(n);$h(n,m,f);break;case 5:var x=a.stateNode;a.flags&32&&(Yn(x,""),a.flags&=-33);var E=ng(n);$h(n,E,x);break;case 3:case 4:var M=a.stateNode.containerInfo,K=ng(n);sg(n,K,M);break;default:throw Error(r(161))}}catch(se){Ct(n,n.return,se)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function bx(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;bx(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Or(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)mx(n,s.alternate,s),s=s.sibling}function Ca(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:wi(4,s,s.return),Ca(s);break;case 1:ur(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&cx(s,s.return,a),Ca(s);break;case 27:Mc(s.stateNode);case 26:case 5:ur(s,s.return),Ca(s);break;case 22:s.memoizedState===null&&Ca(s);break;case 30:Ca(s);break;default:Ca(s)}n=n.sibling}}function Vr(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=n,m=s,x=m.flags;switch(m.tag){case 0:case 11:case 15:Vr(f,m,a),Tc(4,m);break;case 1:if(Vr(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(K){Ct(l,l.return,K)}if(l=m,f=l.updateQueue,f!==null){var E=l.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)W0(M[f],E)}catch(K){Ct(l,l.return,K)}}a&&x&64&&lx(m),Sc(m,m.return);break;case 27:dx(m);case 26:case 5:Vr(f,m,a),a&&l===null&&x&4&&ux(m),Sc(m,m.return);break;case 12:Vr(f,m,a);break;case 31:Vr(f,m,a),a&&x&4&&yx(f,m);break;case 13:Vr(f,m,a),a&&x&4&&_x(f,m);break;case 22:m.memoizedState===null&&Vr(f,m,a),Sc(m,m.return);break;case 30:break;default:Vr(f,m,a)}s=s.sibling}}function ig(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&hc(a))}function ag(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&hc(n))}function Fs(n,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)vx(n,s,a,l),s=s.sibling}function vx(n,s,a,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Fs(n,s,a,l),f&2048&&Tc(9,s);break;case 1:Fs(n,s,a,l);break;case 3:Fs(n,s,a,l),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&hc(n)));break;case 12:if(f&2048){Fs(n,s,a,l),n=s.stateNode;try{var m=s.memoizedProps,x=m.id,E=m.onPostCommit;typeof E=="function"&&E(x,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(M){Ct(s,s.return,M)}}else Fs(n,s,a,l);break;case 31:Fs(n,s,a,l);break;case 13:Fs(n,s,a,l);break;case 23:break;case 22:m=s.stateNode,x=s.alternate,s.memoizedState!==null?m._visibility&2?Fs(n,s,a,l):Ac(n,s):m._visibility&2?Fs(n,s,a,l):(m._visibility|=2,Uo(n,s,a,l,(s.subtreeFlags&10256)!==0||!1)),f&2048&&ig(x,s);break;case 24:Fs(n,s,a,l),f&2048&&ag(s.alternate,s);break;default:Fs(n,s,a,l)}}function Uo(n,s,a,l,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,x=s,E=a,M=l,K=x.flags;switch(x.tag){case 0:case 11:case 15:Uo(m,x,E,M,f),Tc(8,x);break;case 23:break;case 22:var se=x.stateNode;x.memoizedState!==null?se._visibility&2?Uo(m,x,E,M,f):Ac(m,x):(se._visibility|=2,Uo(m,x,E,M,f)),f&&K&2048&&ig(x.alternate,x);break;case 24:Uo(m,x,E,M,f),f&&K&2048&&ag(x.alternate,x);break;default:Uo(m,x,E,M,f)}s=s.sibling}}function Ac(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,l=s,f=l.flags;switch(l.tag){case 22:Ac(a,l),f&2048&&ig(l.alternate,l);break;case 24:Ac(a,l),f&2048&&ag(l.alternate,l);break;default:Ac(a,l)}s=s.sibling}}var Ic=8192;function Lo(n,s,a){if(n.subtreeFlags&Ic)for(n=n.child;n!==null;)wx(n,s,a),n=n.sibling}function wx(n,s,a){switch(n.tag){case 26:Lo(n,s,a),n.flags&Ic&&n.memoizedState!==null&&US(a,qs,n.memoizedState,n.memoizedProps);break;case 5:Lo(n,s,a);break;case 3:case 4:var l=qs;qs=ld(n.stateNode.containerInfo),Lo(n,s,a),qs=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Ic,Ic=16777216,Lo(n,s,a),Ic=l):Lo(n,s,a));break;default:Lo(n,s,a)}}function Ex(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Nc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];In=l,Sx(l,n)}Ex(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Tx(n),n=n.sibling}function Tx(n){switch(n.tag){case 0:case 11:case 15:Nc(n),n.flags&2048&&wi(9,n,n.return);break;case 3:Nc(n);break;case 12:Nc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Yh(n)):Nc(n);break;default:Nc(n)}}function Yh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];In=l,Sx(l,n)}Ex(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:wi(8,s,s.return),Yh(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Yh(s));break;default:Yh(s)}n=n.sibling}}function Sx(n,s){for(;In!==null;){var a=In;switch(a.tag){case 0:case 11:case 15:wi(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:hc(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,In=l;else e:for(a=n;In!==null;){l=In;var f=l.sibling,m=l.return;if(gx(l),l===a){In=null;break e}if(f!==null){f.return=m,In=f;break e}In=m}}}var eS={getCacheForType:function(n){var s=jn(dn),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return jn(dn).controller.signal}},tS=typeof WeakMap=="function"?WeakMap:Map,At=0,Ut=null,ut=null,dt=0,Nt=0,cs=null,Ei=!1,Bo=!1,og=!1,zr=0,tn=0,Ti=0,Ra=0,lg=0,us=0,qo=0,Cc=null,Zn=null,cg=!1,Xh=0,Ax=0,Wh=1/0,Jh=null,Si=null,bn=0,Ai=null,Fo=null,Pr=0,ug=0,hg=null,Ix=null,Rc=0,dg=null;function hs(){return(At&2)!==0&&dt!==0?dt&-dt:V.T!==null?_g():Zu()}function Nx(){if(us===0)if((dt&536870912)===0||pt){var n=ln;ln<<=1,(ln&3932160)===0&&(ln=262144),us=n}else us=536870912;return n=os.current,n!==null&&(n.flags|=32),us}function es(n,s,a){(n===Ut&&(Nt===2||Nt===9)||n.cancelPendingCommit!==null)&&(Ho(n,0),Ii(n,dt,us,!1)),br(n,a),((At&2)===0||n!==Ut)&&(n===Ut&&((At&2)===0&&(Ra|=a),tn===4&&Ii(n,dt,us,!1)),hr(n))}function Cx(n,s,a){if((At&6)!==0)throw Error(r(327));var l=!a&&(s&127)===0&&(s&n.expiredLanes)===0||Hn(n,s),f=l?rS(n,s):mg(n,s,!0),m=l;do{if(f===0){Bo&&!l&&Ii(n,s,0,!1);break}else{if(a=n.current.alternate,m&&!nS(a)){f=mg(n,s,!1),m=!1;continue}if(f===2){if(m=s,n.errorRecoveryDisabledLanes&m)var x=0;else x=n.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){s=x;e:{var E=n;f=Cc;var M=E.current.memoizedState.isDehydrated;if(M&&(Ho(E,x).flags|=256),x=mg(E,x,!1),x!==2){if(og&&!M){E.errorRecoveryDisabledLanes|=m,Ra|=m,f=4;break e}m=Zn,Zn=f,m!==null&&(Zn===null?Zn=m:Zn.push.apply(Zn,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){Ho(n,0),Ii(n,s,0,!0);break}e:{switch(l=n,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ii(l,s,us,!Ei);break e;case 2:Zn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Xh+300-Z(),10<f)){if(Ii(l,s,us,!Ei),xn(l,0,!0)!==0)break e;Pr=s,l.timeoutHandle=ab(Rx.bind(null,l,a,Zn,Jh,cg,s,us,Ra,qo,Ei,m,"Throttled",-0,0),f);break e}Rx(l,a,Zn,Jh,cg,s,us,Ra,qo,Ei,m,null,-0,0)}}break}while(!0);hr(n)}function Rx(n,s,a,l,f,m,x,E,M,K,se,le,Q,X){if(n.timeoutHandle=-1,le=s.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vs},wx(s,m,le);var Oe=(m&62914560)===m?Xh-Z():(m&4194048)===m?Ax-Z():0;if(Oe=LS(le,Oe),Oe!==null){Pr=m,n.cancelPendingCommit=Oe(Px.bind(null,n,s,m,a,l,f,x,E,M,se,le,null,Q,X)),Ii(n,m,x,!K);return}}Px(n,s,m,a,l,f,x,E,M)}function nS(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!is(m(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ii(n,s,a,l){s&=~lg,s&=~Ra,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var f=s;0<f;){var m=31-Je(f),x=1<<m;l[m]=-1,f&=~x}a!==0&&ia(n,a,s)}function Zh(){return(At&6)===0?(Dc(0),!1):!0}function fg(){if(ut!==null){if(Nt===0)var n=ut.return;else n=ut,Ir=va=null,Cm(n),Mo=null,fc=0,n=ut;for(;n!==null;)ox(n.alternate,n),n=n.return;ut=null}}function Ho(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,wS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Pr=0,fg(),Ut=n,ut=a=Sr(n.current,null),dt=s,Nt=0,cs=null,Ei=!1,Bo=Hn(n,s),og=!1,qo=us=lg=Ra=Ti=tn=0,Zn=Cc=null,cg=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var f=31-Je(l),m=1<<f;s|=n[f],l&=~m}return zr=s,bh(),a}function Dx(n,s){st=null,V.H=vc,s===ko||s===Nh?(s=$0(),Nt=3):s===ym?(s=$0(),Nt=4):Nt=s===Gm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,cs=s,ut===null&&(tn=1,qh(n,Es(s,n.current)))}function jx(){var n=os.current;return n===null?!0:(dt&4194048)===dt?Is===null:(dt&62914560)===dt||(dt&536870912)!==0?n===Is:!1}function kx(){var n=V.H;return V.H=vc,n===null?vc:n}function Mx(){var n=V.A;return V.A=eS,n}function ed(){tn=4,Ei||(dt&4194048)!==dt&&os.current!==null||(Bo=!0),(Ti&134217727)===0&&(Ra&134217727)===0||Ut===null||Ii(Ut,dt,us,!1)}function mg(n,s,a){var l=At;At|=2;var f=kx(),m=Mx();(Ut!==n||dt!==s)&&(Jh=null,Ho(n,s)),s=!1;var x=tn;e:do try{if(Nt!==0&&ut!==null){var E=ut,M=cs;switch(Nt){case 8:fg(),x=6;break e;case 3:case 2:case 9:case 6:os.current===null&&(s=!0);var K=Nt;if(Nt=0,cs=null,Go(n,E,M,K),a&&Bo){x=0;break e}break;default:K=Nt,Nt=0,cs=null,Go(n,E,M,K)}}sS(),x=tn;break}catch(se){Dx(n,se)}while(!0);return s&&n.shellSuspendCounter++,Ir=va=null,At=l,V.H=f,V.A=m,ut===null&&(Ut=null,dt=0,bh()),x}function sS(){for(;ut!==null;)Ox(ut)}function rS(n,s){var a=At;At|=2;var l=kx(),f=Mx();Ut!==n||dt!==s?(Jh=null,Wh=Z()+500,Ho(n,s)):Bo=Hn(n,s);e:do try{if(Nt!==0&&ut!==null){s=ut;var m=cs;t:switch(Nt){case 1:Nt=0,cs=null,Go(n,s,m,1);break;case 2:case 9:if(G0(m)){Nt=0,cs=null,Vx(s);break}s=function(){Nt!==2&&Nt!==9||Ut!==n||(Nt=7),hr(n)},m.then(s,s);break e;case 3:Nt=7;break e;case 4:Nt=5;break e;case 7:G0(m)?(Nt=0,cs=null,Vx(s)):(Nt=0,cs=null,Go(n,s,m,7));break;case 5:var x=null;switch(ut.tag){case 26:x=ut.memoizedState;case 5:case 27:var E=ut;if(x?vb(x):E.stateNode.complete){Nt=0,cs=null;var M=E.sibling;if(M!==null)ut=M;else{var K=E.return;K!==null?(ut=K,td(K)):ut=null}break t}}Nt=0,cs=null,Go(n,s,m,5);break;case 6:Nt=0,cs=null,Go(n,s,m,6);break;case 8:fg(),tn=6;break e;default:throw Error(r(462))}}iS();break}catch(se){Dx(n,se)}while(!0);return Ir=va=null,V.H=l,V.A=f,At=a,ut!==null?0:(Ut=null,dt=0,bh(),tn)}function iS(){for(;ut!==null&&!$();)Ox(ut)}function Ox(n){var s=ix(n.alternate,n,zr);n.memoizedProps=n.pendingProps,s===null?td(n):ut=s}function Vx(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=Z_(a,s,s.pendingProps,s.type,void 0,dt);break;case 11:s=Z_(a,s,s.pendingProps,s.type.render,s.ref,dt);break;case 5:Cm(s);default:ox(a,s),s=ut=M0(s,zr),s=ix(a,s,zr)}n.memoizedProps=n.pendingProps,s===null?td(n):ut=s}function Go(n,s,a,l){Ir=va=null,Cm(s),Mo=null,fc=0;var f=s.return;try{if($2(n,f,s,a,dt)){tn=1,qh(n,Es(a,n.current)),ut=null;return}}catch(m){if(f!==null)throw ut=f,m;tn=1,qh(n,Es(a,n.current)),ut=null;return}s.flags&32768?(pt||l===1?n=!0:Bo||(dt&536870912)!==0?n=!1:(Ei=n=!0,(l===2||l===9||l===3||l===6)&&(l=os.current,l!==null&&l.tag===13&&(l.flags|=16384))),zx(s,n)):td(s)}function td(n){var s=n;do{if((s.flags&32768)!==0){zx(s,Ei);return}n=s.return;var a=X2(s.alternate,s,zr);if(a!==null){ut=a;return}if(s=s.sibling,s!==null){ut=s;return}ut=s=n}while(s!==null);tn===0&&(tn=5)}function zx(n,s){do{var a=W2(n.alternate,n);if(a!==null){a.flags&=32767,ut=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){ut=n;return}ut=n=a}while(n!==null);tn=6,ut=null}function Px(n,s,a,l,f,m,x,E,M){n.cancelPendingCommit=null;do nd();while(bn!==0);if((At&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=nm,$f(n,a,m,x,E,M),n===Ut&&(ut=Ut=null,dt=0),Fo=s,Ai=n,Pr=a,ug=m,hg=f,Ix=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,cS(Le,function(){return Fx(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=V.T,V.T=null,f=W.p,W.p=2,x=At,At|=4;try{J2(n,s,a)}finally{At=x,W.p=f,V.T=l}}bn=1,Ux(),Lx(),Bx()}}function Ux(){if(bn===1){bn=0;var n=Ai,s=Fo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=V.T,V.T=null;var l=W.p;W.p=2;var f=At;At|=4;try{xx(s,n);var m=Ag,x=S0(n.containerInfo),E=m.focusedElem,M=m.selectionRange;if(x!==E&&E&&E.ownerDocument&&T0(E.ownerDocument.documentElement,E)){if(M!==null&&Wf(E)){var K=M.start,se=M.end;if(se===void 0&&(se=K),"selectionStart"in E)E.selectionStart=K,E.selectionEnd=Math.min(se,E.value.length);else{var le=E.ownerDocument||document,Q=le&&le.defaultView||window;if(Q.getSelection){var X=Q.getSelection(),Oe=E.textContent.length,$e=Math.min(M.start,Oe),zt=M.end===void 0?$e:Math.min(M.end,Oe);!X.extend&&$e>zt&&(x=zt,zt=$e,$e=x);var L=E0(E,$e),z=E0(E,zt);if(L&&z&&(X.rangeCount!==1||X.anchorNode!==L.node||X.anchorOffset!==L.offset||X.focusNode!==z.node||X.focusOffset!==z.offset)){var G=le.createRange();G.setStart(L.node,L.offset),X.removeAllRanges(),$e>zt?(X.addRange(G),X.extend(z.node,z.offset)):(G.setEnd(z.node,z.offset),X.addRange(G))}}}}for(le=[],X=E;X=X.parentNode;)X.nodeType===1&&le.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<le.length;E++){var ae=le[E];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}md=!!Sg,Ag=Sg=null}finally{At=f,W.p=l,V.T=a}}n.current=s,bn=2}}function Lx(){if(bn===2){bn=0;var n=Ai,s=Fo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=V.T,V.T=null;var l=W.p;W.p=2;var f=At;At|=4;try{mx(n,s.alternate,s)}finally{At=f,W.p=l,V.T=a}}bn=3}}function Bx(){if(bn===4||bn===3){bn=0,ee();var n=Ai,s=Fo,a=Pr,l=Ix;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?bn=5:(bn=0,Fo=Ai=null,qx(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Si=null),vr(a),s=s.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(Fe,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=V.T,f=W.p,W.p=2,V.T=null;try{for(var m=n.onRecoverableError,x=0;x<l.length;x++){var E=l[x];m(E.value,{componentStack:E.stack})}}finally{V.T=s,W.p=f}}(Pr&3)!==0&&nd(),hr(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===dg?Rc++:(Rc=0,dg=n):Rc=0,Dc(0)}}function qx(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,hc(s)))}function nd(){return Ux(),Lx(),Bx(),Fx()}function Fx(){if(bn!==5)return!1;var n=Ai,s=ug;ug=0;var a=vr(Pr),l=V.T,f=W.p;try{W.p=32>a?32:a,V.T=null,a=hg,hg=null;var m=Ai,x=Pr;if(bn=0,Fo=Ai=null,Pr=0,(At&6)!==0)throw Error(r(331));var E=At;if(At|=4,Tx(m.current),vx(m,m.current,x,a),At=E,Dc(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(Fe,m)}catch{}return!0}finally{W.p=f,V.T=l,qx(n,s)}}function Hx(n,s,a){s=Es(a,s),s=Hm(n.stateNode,s,2),n=xi(n,s,2),n!==null&&(br(n,2),hr(n))}function Ct(n,s,a){if(n.tag===3)Hx(n,n,a);else for(;s!==null;){if(s.tag===3){Hx(s,n,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Si===null||!Si.has(l))){n=Es(a,n),a=G_(2),l=xi(s,a,2),l!==null&&(K_(a,l,s,n),br(l,2),hr(l));break}}s=s.return}}function gg(n,s,a){var l=n.pingCache;if(l===null){l=n.pingCache=new tS;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(a)||(og=!0,f.add(a),n=aS.bind(null,n,s,a),s.then(n,n))}function aS(n,s,a){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,Ut===n&&(dt&a)===a&&(tn===4||tn===3&&(dt&62914560)===dt&&300>Z()-Xh?(At&2)===0&&Ho(n,0):lg|=a,qo===dt&&(qo=0)),hr(n)}function Gx(n,s){s===0&&(s=Bl()),n=_a(n,s),n!==null&&(br(n,s),hr(n))}function oS(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Gx(n,a)}function lS(n,s){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),Gx(n,a)}function cS(n,s){return _e(n,s)}var sd=null,Ko=null,pg=!1,rd=!1,yg=!1,Ni=0;function hr(n){n!==Ko&&n.next===null&&(Ko===null?sd=Ko=n:Ko=Ko.next=n),rd=!0,pg||(pg=!0,hS())}function Dc(n,s){if(!yg&&rd){yg=!0;do for(var a=!1,l=sd;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var x=l.suspendedLanes,E=l.pingedLanes;m=(1<<31-Je(42|n)+1)-1,m&=f&~(x&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Yx(l,m))}else m=dt,m=xn(l,l===Ut?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Hn(l,m)||(a=!0,Yx(l,m));l=l.next}while(a);yg=!1}}function uS(){Kx()}function Kx(){rd=pg=!1;var n=0;Ni!==0&&vS()&&(n=Ni);for(var s=Z(),a=null,l=sd;l!==null;){var f=l.next,m=$x(l,s);m===0?(l.next=null,a===null?sd=f:a.next=f,f===null&&(Ko=a)):(a=l,(n!==0||(m&3)!==0)&&(rd=!0)),l=f}bn!==0&&bn!==5||Dc(n),Ni!==0&&(Ni=0)}function $x(n,s){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var x=31-Je(m),E=1<<x,M=f[x];M===-1?((E&a)===0||(E&l)!==0)&&(f[x]=si(E,s)):M<=s&&(n.expiredLanes|=E),m&=~E}if(s=Ut,a=dt,a=xn(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===s&&(Nt===2||Nt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Ke(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Hn(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(l!==null&&Ke(l),vr(a)){case 2:case 8:a=Re;break;case 32:a=Le;break;case 268435456:a=lt;break;default:a=Le}return l=Qx.bind(null,n),a=_e(a,l),n.callbackPriority=s,n.callbackNode=a,s}return l!==null&&l!==null&&Ke(l),n.callbackPriority=2,n.callbackNode=null,2}function Qx(n,s){if(bn!==0&&bn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(nd()&&n.callbackNode!==a)return null;var l=dt;return l=xn(n,n===Ut?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Cx(n,l,s),$x(n,Z()),n.callbackNode!=null&&n.callbackNode===a?Qx.bind(null,n):null)}function Yx(n,s){if(nd())return null;Cx(n,s,!0)}function hS(){ES(function(){(At&6)!==0?_e(Te,uS):Kx()})}function _g(){if(Ni===0){var n=Do;n===0&&(n=qt,qt<<=1,(qt&261888)===0&&(qt=256)),Ni=n}return Ni}function Xx(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:po(""+n)}function Wx(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function dS(n,s,a,l,f){if(s==="submit"&&a&&a.stateNode===f){var m=Xx((f[Sn]||null).action),x=l.submitter;x&&(s=(s=x[Sn]||null)?Xx(s.formAction):x.getAttribute("formAction"),s!==null&&(m=s,x=null));var E=new rr("action","action",null,l,f);n.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ni!==0){var M=x?Wx(f,x):new FormData(f);Pm(a,{pending:!0,data:M,method:f.method,action:m},null,M)}}else typeof m=="function"&&(E.preventDefault(),M=x?Wx(f,x):new FormData(f),Pm(a,{pending:!0,data:M,method:f.method,action:m},m,M))},currentTarget:f}]})}}for(var xg=0;xg<tm.length;xg++){var bg=tm[xg],fS=bg.toLowerCase(),mS=bg[0].toUpperCase()+bg.slice(1);Bs(fS,"on"+mS)}Bs(N0,"onAnimationEnd"),Bs(C0,"onAnimationIteration"),Bs(R0,"onAnimationStart"),Bs("dblclick","onDoubleClick"),Bs("focusin","onFocus"),Bs("focusout","onBlur"),Bs(R2,"onTransitionRun"),Bs(D2,"onTransitionStart"),Bs(j2,"onTransitionCancel"),Bs(D0,"onTransitionEnd"),er("onMouseEnter",["mouseout","mouseover"]),er("onMouseLeave",["mouseout","mouseover"]),er("onPointerEnter",["pointerout","pointerover"]),er("onPointerLeave",["pointerout","pointerover"]),Zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jc));function Jx(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var x=l.length-1;0<=x;x--){var E=l[x],M=E.instance,K=E.currentTarget;if(E=E.listener,M!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=K;try{m(f)}catch(se){xh(se)}f.currentTarget=null,m=M}else for(x=0;x<l.length;x++){if(E=l[x],M=E.instance,K=E.currentTarget,E=E.listener,M!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=K;try{m(f)}catch(se){xh(se)}f.currentTarget=null,m=M}}}}function ht(n,s){var a=s[uo];a===void 0&&(a=s[uo]=new Set);var l=n+"__bubble";a.has(l)||(Zx(s,n,2,!1),a.add(l))}function vg(n,s,a){var l=0;s&&(l|=4),Zx(a,n,l,s)}var id="_reactListening"+Math.random().toString(36).slice(2);function wg(n){if(!n[id]){n[id]=!0,Hl.forEach(function(a){a!=="selectionchange"&&(gS.has(a)||vg(a,!1,n),vg(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[id]||(s[id]=!0,vg("selectionchange",!1,s))}}function Zx(n,s,a,l){switch(Nb(s)){case 2:var f=FS;break;case 8:f=HS;break;default:f=zg}a=f.bind(null,s,a,n),f=void 0,!ua||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function Eg(n,s,a,l,f){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var E=l.stateNode.containerInfo;if(E===f)break;if(x===4)for(x=l.return;x!==null;){var M=x.tag;if((M===3||M===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;E!==null;){if(x=Ws(E),x===null)return;if(M=x.tag,M===5||M===6||M===26||M===27){l=m=x;continue e}E=E.parentNode}}l=l.return}ci(function(){var K=m,se=xs(a),le=[];e:{var Q=j0.get(n);if(Q!==void 0){var X=rr,Oe=n;switch(n){case"keypress":if(da(a)===0)break e;case"keydown":case"keyup":X=ph;break;case"focusin":Oe="focus",X=ma;break;case"focusout":Oe="blur",X=ma;break;case"beforeblur":case"afterblur":X=ma;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=sc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=oh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=_;break;case N0:case C0:case R0:X=ch;break;case D0:X=S;break;case"scroll":case"scrollend":X=nc;break;case"wheel":X=Y;break;case"copy":case"cut":case"paste":X=uh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Tr;break;case"toggle":case"beforetoggle":X=nt}var $e=(s&4)!==0,zt=!$e&&(n==="scroll"||n==="scrollend"),L=$e?Q!==null?Q+"Capture":null:Q;$e=[];for(var z=K,G;z!==null;){var ae=z;if(G=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||G===null||L===null||(ae=zs(z,L),ae!=null&&$e.push(kc(z,ae,G))),zt)break;z=z.return}0<$e.length&&(Q=new X(Q,Oe,null,a,se),le.push({event:Q,listeners:$e}))}}if((s&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",Q&&a!==Zl&&(Oe=a.relatedTarget||a.fromElement)&&(Ws(Oe)||Oe[Ys]))break e;if((X||Q)&&(Q=se.window===se?se:(Q=se.ownerDocument)?Q.defaultView||Q.parentWindow:window,X?(Oe=a.relatedTarget||a.toElement,X=K,Oe=Oe?Ws(Oe):null,Oe!==null&&(zt=c(Oe),$e=Oe.tag,Oe!==zt||$e!==5&&$e!==27&&$e!==6)&&(Oe=null)):(X=null,Oe=K),X!==Oe)){if($e=sc,ae="onMouseLeave",L="onMouseEnter",z="mouse",(n==="pointerout"||n==="pointerover")&&($e=Tr,ae="onPointerLeave",L="onPointerEnter",z="pointer"),zt=X==null?Q:ss(X),G=Oe==null?Q:ss(Oe),Q=new $e(ae,z+"leave",X,a,se),Q.target=zt,Q.relatedTarget=G,ae=null,Ws(se)===K&&($e=new $e(L,z+"enter",Oe,a,se),$e.target=G,$e.relatedTarget=zt,ae=$e),zt=ae,X&&Oe)t:{for($e=pS,L=X,z=Oe,G=0,ae=L;ae;ae=$e(ae))G++;ae=0;for(var qe=z;qe;qe=$e(qe))ae++;for(;0<G-ae;)L=$e(L),G--;for(;0<ae-G;)z=$e(z),ae--;for(;G--;){if(L===z||z!==null&&L===z.alternate){$e=L;break t}L=$e(L),z=$e(z)}$e=null}else $e=null;X!==null&&eb(le,Q,X,$e,!1),Oe!==null&&zt!==null&&eb(le,zt,Oe,$e,!0)}}e:{if(Q=K?ss(K):window,X=Q.nodeName&&Q.nodeName.toLowerCase(),X==="select"||X==="input"&&Q.type==="file")var Et=y0;else if(g0(Q))if(_0)Et=I2;else{Et=S2;var Ue=T2}else X=Q.nodeName,!X||X.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&go(K.elementType)&&(Et=y0):Et=A2;if(Et&&(Et=Et(n,K))){p0(le,Et,a,se);break e}Ue&&Ue(n,Q,K),n==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&Xl(Q,"number",Q.value)}switch(Ue=K?ss(K):window,n){case"focusin":(g0(Ue)||Ue.contentEditable==="true")&&(Eo=Ue,Jf=K,lc=null);break;case"focusout":lc=Jf=Eo=null;break;case"mousedown":Zf=!0;break;case"contextmenu":case"mouseup":case"dragend":Zf=!1,A0(le,a,se);break;case"selectionchange":if(C2)break;case"keydown":case"keyup":A0(le,a,se)}var ot;if(St)e:{switch(n){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else wo?ga(n,a)&&(ft="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ft="onCompositionStart");ft&&(or&&a.locale!=="ko"&&(wo||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&wo&&(ot=tc()):(sr=se,ec="value"in sr?sr.value:sr.textContent,wo=!0)),Ue=ad(K,ft),0<Ue.length&&(ft=new ar(ft,n,null,a,se),le.push({event:ft,listeners:Ue}),ot?ft.data=ot:(ot=vo(a),ot!==null&&(ft.data=ot)))),(ot=vs?b2(n,a):v2(n,a))&&(ft=ad(K,"onBeforeInput"),0<ft.length&&(Ue=new ar("onBeforeInput","beforeinput",null,a,se),le.push({event:Ue,listeners:ft}),Ue.data=ot)),dS(le,n,K,a,se)}Jx(le,s)})}function kc(n,s,a){return{instance:n,listener:s,currentTarget:a}}function ad(n,s){for(var a=s+"Capture",l=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=zs(n,a),f!=null&&l.unshift(kc(n,f,m)),f=zs(n,s),f!=null&&l.push(kc(n,f,m))),n.tag===3)return l;n=n.return}return[]}function pS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function eb(n,s,a,l,f){for(var m=s._reactName,x=[];a!==null&&a!==l;){var E=a,M=E.alternate,K=E.stateNode;if(E=E.tag,M!==null&&M===l)break;E!==5&&E!==26&&E!==27||K===null||(M=K,f?(K=zs(a,m),K!=null&&x.unshift(kc(a,K,M))):f||(K=zs(a,m),K!=null&&x.push(kc(a,K,M)))),a=a.return}x.length!==0&&n.push({event:s,listeners:x})}var yS=/\r\n?/g,_S=/\u0000|\uFFFD/g;function tb(n){return(typeof n=="string"?n:""+n).replace(yS,`
`).replace(_S,"")}function nb(n,s){return s=tb(s),tb(n)===s}function Vt(n,s,a,l,f,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Yn(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Yn(n,""+l);break;case"className":rs(n,"class",l);break;case"tabIndex":rs(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":rs(n,a,l);break;case"style":Jl(n,l,m);break;case"data":if(s!=="object"){rs(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=po(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&Vt(n,s,"name",f.name,f,null),Vt(n,s,"formEncType",f.formEncType,f,null),Vt(n,s,"formMethod",f.formMethod,f,null),Vt(n,s,"formTarget",f.formTarget,f,null)):(Vt(n,s,"encType",f.encType,f,null),Vt(n,s,"method",f.method,f,null),Vt(n,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=po(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Vs);break;case"onScroll":l!=null&&ht("scroll",n);break;case"onScrollEnd":l!=null&&ht("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=po(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":ht("beforetoggle",n),ht("toggle",n),fo(n,"popover",l);break;case"xlinkActuate":hn(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":hn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":hn(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":hn(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":hn(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":hn(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":hn(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":hn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":hn(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":fo(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ah.get(a)||a,fo(n,a,l))}}function Tg(n,s,a,l,f,m){switch(a){case"style":Jl(n,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Yn(n,l):(typeof l=="number"||typeof l=="bigint")&&Yn(n,""+l);break;case"onScroll":l!=null&&ht("scroll",n);break;case"onScrollEnd":l!=null&&ht("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Vs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),m=n[Sn]||null,m=m!=null?m[a]:null,typeof m=="function"&&n.removeEventListener(s,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):fo(n,a,l)}}}function Mn(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ht("error",n),ht("load",n);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var x=a[m];if(x!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Vt(n,s,m,x,a,null)}}f&&Vt(n,s,"srcSet",a.srcSet,a,null),l&&Vt(n,s,"src",a.src,a,null);return;case"input":ht("invalid",n);var E=m=x=f=null,M=null,K=null;for(l in a)if(a.hasOwnProperty(l)){var se=a[l];if(se!=null)switch(l){case"name":f=se;break;case"type":x=se;break;case"checked":M=se;break;case"defaultChecked":K=se;break;case"value":m=se;break;case"defaultValue":E=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,s));break;default:Vt(n,s,l,se,a,null)}}sh(n,m,E,M,K,x,f,!1);return;case"select":ht("invalid",n),l=x=m=null;for(f in a)if(a.hasOwnProperty(f)&&(E=a[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":x=E;break;case"multiple":l=E;default:Vt(n,s,f,E,a,null)}s=m,a=x,n.multiple=!!l,s!=null?ii(n,!!l,s,!1):a!=null&&ii(n,!!l,a,!0);return;case"textarea":ht("invalid",n),m=f=l=null;for(x in a)if(a.hasOwnProperty(x)&&(E=a[x],E!=null))switch(x){case"value":l=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:Vt(n,s,x,E,a,null)}ai(n,l,f,m);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(l=a[M],l!=null))switch(M){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Vt(n,s,M,l,a,null)}return;case"dialog":ht("beforetoggle",n),ht("toggle",n),ht("cancel",n),ht("close",n);break;case"iframe":case"object":ht("load",n);break;case"video":case"audio":for(l=0;l<jc.length;l++)ht(jc[l],n);break;case"image":ht("error",n),ht("load",n);break;case"details":ht("toggle",n);break;case"embed":case"source":case"link":ht("error",n),ht("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(l=a[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Vt(n,s,K,l,a,null)}return;default:if(go(s)){for(se in a)a.hasOwnProperty(se)&&(l=a[se],l!==void 0&&Tg(n,s,se,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&Vt(n,s,E,l,a,null))}function xS(n,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,E=null,M=null,K=null,se=null;for(X in a){var le=a[X];if(a.hasOwnProperty(X)&&le!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":M=le;default:l.hasOwnProperty(X)||Vt(n,s,X,null,l,le)}}for(var Q in l){var X=l[Q];if(le=a[Q],l.hasOwnProperty(Q)&&(X!=null||le!=null))switch(Q){case"type":m=X;break;case"name":f=X;break;case"checked":K=X;break;case"defaultChecked":se=X;break;case"value":x=X;break;case"defaultValue":E=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,s));break;default:X!==le&&Vt(n,s,Q,X,l,le)}}mo(n,x,E,M,K,se,m,f);return;case"select":X=x=E=Q=null;for(m in a)if(M=a[m],a.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":X=M;default:l.hasOwnProperty(m)||Vt(n,s,m,null,l,M)}for(f in l)if(m=l[f],M=a[f],l.hasOwnProperty(f)&&(m!=null||M!=null))switch(f){case"value":Q=m;break;case"defaultValue":E=m;break;case"multiple":x=m;default:m!==M&&Vt(n,s,f,m,l,M)}s=E,a=x,l=X,Q!=null?ii(n,!!a,Q,!1):!!l!=!!a&&(s!=null?ii(n,!!a,s,!0):ii(n,!!a,a?[]:"",!1));return;case"textarea":X=Q=null;for(E in a)if(f=a[E],a.hasOwnProperty(E)&&f!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Vt(n,s,E,null,l,f)}for(x in l)if(f=l[x],m=a[x],l.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":Q=f;break;case"defaultValue":X=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&Vt(n,s,x,f,l,m)}rh(n,Q,X);return;case"option":for(var Oe in a)if(Q=a[Oe],a.hasOwnProperty(Oe)&&Q!=null&&!l.hasOwnProperty(Oe))switch(Oe){case"selected":n.selected=!1;break;default:Vt(n,s,Oe,null,l,Q)}for(M in l)if(Q=l[M],X=a[M],l.hasOwnProperty(M)&&Q!==X&&(Q!=null||X!=null))switch(M){case"selected":n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:Vt(n,s,M,Q,l,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in a)Q=a[$e],a.hasOwnProperty($e)&&Q!=null&&!l.hasOwnProperty($e)&&Vt(n,s,$e,null,l,Q);for(K in l)if(Q=l[K],X=a[K],l.hasOwnProperty(K)&&Q!==X&&(Q!=null||X!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,s));break;default:Vt(n,s,K,Q,l,X)}return;default:if(go(s)){for(var zt in a)Q=a[zt],a.hasOwnProperty(zt)&&Q!==void 0&&!l.hasOwnProperty(zt)&&Tg(n,s,zt,void 0,l,Q);for(se in l)Q=l[se],X=a[se],!l.hasOwnProperty(se)||Q===X||Q===void 0&&X===void 0||Tg(n,s,se,Q,l,X);return}}for(var L in a)Q=a[L],a.hasOwnProperty(L)&&Q!=null&&!l.hasOwnProperty(L)&&Vt(n,s,L,null,l,Q);for(le in l)Q=l[le],X=a[le],!l.hasOwnProperty(le)||Q===X||Q==null&&X==null||Vt(n,s,le,Q,l,X)}function sb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],m=f.transferSize,x=f.initiatorType,E=f.duration;if(m&&E&&sb(x)){for(x=0,E=f.responseEnd,l+=1;l<a.length;l++){var M=a[l],K=M.startTime;if(K>E)break;var se=M.transferSize,le=M.initiatorType;se&&sb(le)&&(M=M.responseEnd,x+=se*(M<E?1:(E-K)/(M-K)))}if(--l,s+=8*(m+x)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Sg=null,Ag=null;function od(n){return n.nodeType===9?n:n.ownerDocument}function rb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ib(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Ig(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ng=null;function vS(){var n=window.event;return n&&n.type==="popstate"?n===Ng?!1:(Ng=n,!0):(Ng=null,!1)}var ab=typeof setTimeout=="function"?setTimeout:void 0,wS=typeof clearTimeout=="function"?clearTimeout:void 0,ob=typeof Promise=="function"?Promise:void 0,ES=typeof queueMicrotask=="function"?queueMicrotask:typeof ob<"u"?function(n){return ob.resolve(null).then(n).catch(TS)}:ab;function TS(n){setTimeout(function(){throw n})}function Ci(n){return n==="head"}function lb(n,s){var a=s,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),Xo(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Mc(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,Mc(a);for(var m=a.firstChild;m;){var x=m.nextSibling,E=m.nodeName;m[Xs]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=x}}else a==="body"&&Mc(n.ownerDocument.body);a=f}while(a);Xo(s)}function cb(n,s){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function Cg(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Cg(a),ho(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function SS(n,s,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Xs])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Ns(n.nextSibling),n===null)break}return null}function AS(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Ns(n.nextSibling),n===null))return null;return n}function ub(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Ns(n.nextSibling),n===null))return null;return n}function Rg(n){return n.data==="$?"||n.data==="$~"}function Dg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function IS(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Ns(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var jg=null;function hb(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return Ns(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function db(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function fb(n,s,a){switch(s=od(a),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Mc(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);ho(n)}var Cs=new Map,mb=new Set;function ld(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ur=W.d;W.d={f:NS,r:CS,D:RS,C:DS,L:jS,m:kS,X:OS,S:MS,M:VS};function NS(){var n=Ur.f(),s=Zh();return n||s}function CS(n){var s=_s(n);s!==null&&s.tag===5&&s.type==="form"?D_(s):Ur.r(n)}var $o=typeof document>"u"?null:document;function gb(n,s,a){var l=$o;if(l&&typeof s=="string"&&s){var f=Qn(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),mb.has(f)||(mb.add(f),n={rel:n,crossOrigin:a,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),Mn(s,"link",n),un(s),l.head.appendChild(s)))}}function RS(n){Ur.D(n),gb("dns-prefetch",n,null)}function DS(n,s){Ur.C(n,s),gb("preconnect",n,s)}function jS(n,s,a){Ur.L(n,s,a);var l=$o;if(l&&n&&s){var f='link[rel="preload"][as="'+Qn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Qn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Qn(a.imageSizes)+'"]')):f+='[href="'+Qn(n)+'"]';var m=f;switch(s){case"style":m=Qo(n);break;case"script":m=Yo(n)}Cs.has(m)||(n=w({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),Cs.set(m,n),l.querySelector(f)!==null||s==="style"&&l.querySelector(Oc(m))||s==="script"&&l.querySelector(Vc(m))||(s=l.createElement("link"),Mn(s,"link",n),un(s),l.head.appendChild(s)))}}function kS(n,s){Ur.m(n,s);var a=$o;if(a&&n){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Qn(l)+'"][href="'+Qn(n)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Yo(n)}if(!Cs.has(m)&&(n=w({rel:"modulepreload",href:n},s),Cs.set(m,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Vc(m)))return}l=a.createElement("link"),Mn(l,"link",n),un(l),a.head.appendChild(l)}}}function MS(n,s,a){Ur.S(n,s,a);var l=$o;if(l&&n){var f=Js(l).hoistableStyles,m=Qo(n);s=s||"default";var x=f.get(m);if(!x){var E={loading:0,preload:null};if(x=l.querySelector(Oc(m)))E.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":s},a),(a=Cs.get(m))&&kg(n,a);var M=x=l.createElement("link");un(M),Mn(M,"link",n),M._p=new Promise(function(K,se){M.onload=K,M.onerror=se}),M.addEventListener("load",function(){E.loading|=1}),M.addEventListener("error",function(){E.loading|=2}),E.loading|=4,cd(x,s,l)}x={type:"stylesheet",instance:x,count:1,state:E},f.set(m,x)}}}function OS(n,s){Ur.X(n,s);var a=$o;if(a&&n){var l=Js(a).hoistableScripts,f=Yo(n),m=l.get(f);m||(m=a.querySelector(Vc(f)),m||(n=w({src:n,async:!0},s),(s=Cs.get(f))&&Mg(n,s),m=a.createElement("script"),un(m),Mn(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function VS(n,s){Ur.M(n,s);var a=$o;if(a&&n){var l=Js(a).hoistableScripts,f=Yo(n),m=l.get(f);m||(m=a.querySelector(Vc(f)),m||(n=w({src:n,async:!0,type:"module"},s),(s=Cs.get(f))&&Mg(n,s),m=a.createElement("script"),un(m),Mn(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function pb(n,s,a,l){var f=(f=Ce.current)?ld(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Qo(a.href),a=Js(f).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Qo(a.href);var m=Js(f).hoistableStyles,x=m.get(n);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,x),(m=f.querySelector(Oc(n)))&&!m._p&&(x.instance=m,x.state.loading=5),Cs.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Cs.set(n,a),m||zS(f,n,a,x.state))),s&&l===null)throw Error(r(528,""));return x}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Yo(a),a=Js(f).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Qo(n){return'href="'+Qn(n)+'"'}function Oc(n){return'link[rel="stylesheet"]['+n+"]"}function yb(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function zS(n,s,a,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Mn(s,"link",a),un(s),n.head.appendChild(s))}function Yo(n){return'[src="'+Qn(n)+'"]'}function Vc(n){return"script[async]"+n}function _b(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+Qn(a.href)+'"]');if(l)return s.instance=l,un(l),l;var f=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),un(l),Mn(l,"style",f),cd(l,a.precedence,n),s.instance=l;case"stylesheet":f=Qo(a.href);var m=n.querySelector(Oc(f));if(m)return s.state.loading|=4,s.instance=m,un(m),m;l=yb(a),(f=Cs.get(f))&&kg(l,f),m=(n.ownerDocument||n).createElement("link"),un(m);var x=m;return x._p=new Promise(function(E,M){x.onload=E,x.onerror=M}),Mn(m,"link",l),s.state.loading|=4,cd(m,a.precedence,n),s.instance=m;case"script":return m=Yo(a.src),(f=n.querySelector(Vc(m)))?(s.instance=f,un(f),f):(l=a,(f=Cs.get(m))&&(l=w({},a),Mg(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),un(f),Mn(f,"link",l),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,cd(l,a.precedence,n));return s.instance}function cd(n,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,x=0;x<l.length;x++){var E=l[x];if(E.dataset.precedence===s)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function kg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Mg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var ud=null;function xb(n,s,a){if(ud===null){var l=new Map,f=ud=new Map;f.set(a,l)}else f=ud,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var m=a[f];if(!(m[Xs]||m[cn]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(s)||"";x=n+x;var E=l.get(x);E?E.push(m):l.set(x,[m])}}return l}function bb(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function PS(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function vb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function US(n,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Qo(l.href),m=s.querySelector(Oc(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=hd.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=m,un(m);return}m=s.ownerDocument||s,l=yb(l),(f=Cs.get(f))&&kg(l,f),m=m.createElement("link"),un(m);var x=m;x._p=new Promise(function(E,M){x.onload=E,x.onerror=M}),Mn(m,"link",l),a.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=hd.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var Og=0;function LS(n,s){return n.stylesheets&&n.count===0&&fd(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&fd(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&Og===0&&(Og=62500*bS());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&fd(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Og?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function hd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var dd=null;function fd(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,dd=new Map,s.forEach(BS,n),dd=null,hd.call(n))}function BS(n,s){if(!(s.state.loading&4)){var a=dd.get(n);if(a)var l=a.get(null);else{a=new Map,dd.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),l=x)}l&&a.set(null,l)}f=s.instance,x=f.getAttribute("data-precedence"),m=a.get(x)||l,m===l&&a.set(null,f),a.set(x,f),this.count++,l=hd.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var zc={$$typeof:be,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function qS(n,s,a,l,f,m,x,E,M){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ys(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ys(0),this.hiddenUpdates=ys(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function wb(n,s,a,l,f,m,x,E,M,K,se,le){return n=new qS(n,s,a,x,M,K,se,le,E),s=1,m===!0&&(s|=24),m=as(3,null,null,s),n.current=m,m.stateNode=n,s=mm(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},_m(m),n}function Eb(n){return n?(n=Ao,n):Ao}function Tb(n,s,a,l,f,m){f=Eb(f),l.context===null?l.context=f:l.pendingContext=f,l=_i(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=xi(n,l,s),a!==null&&(es(a,n,s),gc(a,n,s))}function Sb(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Vg(n,s){Sb(n,s),(n=n.alternate)&&Sb(n,s)}function Ab(n){if(n.tag===13||n.tag===31){var s=_a(n,67108864);s!==null&&es(s,n,67108864),Vg(n,67108864)}}function Ib(n){if(n.tag===13||n.tag===31){var s=hs();s=aa(s);var a=_a(n,s);a!==null&&es(a,n,s),Vg(n,s)}}var md=!0;function FS(n,s,a,l){var f=V.T;V.T=null;var m=W.p;try{W.p=2,zg(n,s,a,l)}finally{W.p=m,V.T=f}}function HS(n,s,a,l){var f=V.T;V.T=null;var m=W.p;try{W.p=8,zg(n,s,a,l)}finally{W.p=m,V.T=f}}function zg(n,s,a,l){if(md){var f=Pg(l);if(f===null)Eg(n,s,l,gd,a),Cb(n,l);else if(KS(f,n,s,a,l))l.stopPropagation();else if(Cb(n,l),s&4&&-1<GS.indexOf(n)){for(;f!==null;){var m=_s(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=sn(m.pendingLanes);if(x!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var M=1<<31-Je(x);E.entanglements[1]|=M,x&=~M}hr(m),(At&6)===0&&(Wh=Z()+500,Dc(0))}}break;case 31:case 13:E=_a(m,2),E!==null&&es(E,m,2),Zh(),Vg(m,2)}if(m=Pg(l),m===null&&Eg(n,s,l,gd,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else Eg(n,s,l,null,a)}}function Pg(n){return n=xs(n),Ug(n)}var gd=null;function Ug(n){if(gd=null,n=Ws(n),n!==null){var s=c(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=u(s),n!==null)return n;n=null}else if(a===31){if(n=g(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return gd=n,null}function Nb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xe()){case Te:return 2;case Re:return 8;case Le:case Ne:return 32;case lt:return 268435456;default:return 32}default:return 32}}var Lg=!1,Ri=null,Di=null,ji=null,Pc=new Map,Uc=new Map,ki=[],GS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cb(n,s){switch(n){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Di=null;break;case"mouseover":case"mouseout":ji=null;break;case"pointerover":case"pointerout":Pc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uc.delete(s.pointerId)}}function Lc(n,s,a,l,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},s!==null&&(s=_s(s),s!==null&&Ab(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function KS(n,s,a,l,f){switch(s){case"focusin":return Ri=Lc(Ri,n,s,a,l,f),!0;case"dragenter":return Di=Lc(Di,n,s,a,l,f),!0;case"mouseover":return ji=Lc(ji,n,s,a,l,f),!0;case"pointerover":var m=f.pointerId;return Pc.set(m,Lc(Pc.get(m)||null,n,s,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Uc.set(m,Lc(Uc.get(m)||null,n,s,a,l,f)),!0}return!1}function Rb(n){var s=Ws(n.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){n.blockedOn=s,Ms(n.priority,function(){Ib(a)});return}}else if(s===31){if(s=g(a),s!==null){n.blockedOn=s,Ms(n.priority,function(){Ib(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function pd(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Pg(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Zl=l,a.target.dispatchEvent(l),Zl=null}else return s=_s(a),s!==null&&Ab(s),n.blockedOn=a,!1;s.shift()}return!0}function Db(n,s,a){pd(n)&&a.delete(s)}function $S(){Lg=!1,Ri!==null&&pd(Ri)&&(Ri=null),Di!==null&&pd(Di)&&(Di=null),ji!==null&&pd(ji)&&(ji=null),Pc.forEach(Db),Uc.forEach(Db)}function yd(n,s){n.blockedOn===s&&(n.blockedOn=null,Lg||(Lg=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,$S)))}var _d=null;function jb(n){_d!==n&&(_d=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){_d===n&&(_d=null);for(var s=0;s<n.length;s+=3){var a=n[s],l=n[s+1],f=n[s+2];if(typeof l!="function"){if(Ug(l||a)===null)continue;break}var m=_s(a);m!==null&&(n.splice(s,3),s-=3,Pm(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Xo(n){function s(M){return yd(M,n)}Ri!==null&&yd(Ri,n),Di!==null&&yd(Di,n),ji!==null&&yd(ji,n),Pc.forEach(s),Uc.forEach(s);for(var a=0;a<ki.length;a++){var l=ki[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<ki.length&&(a=ki[0],a.blockedOn===null);)Rb(a),a.blockedOn===null&&ki.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],x=f[Sn]||null;if(typeof m=="function")x||jb(a);else if(x){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[Sn]||null)E=x.formAction;else if(Ug(f)!==null)continue}else E=x.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),jb(a)}}}function kb(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Bg(n){this._internalRoot=n}xd.prototype.render=Bg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=hs();Tb(a,l,n,s,null,null)},xd.prototype.unmount=Bg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Tb(n.current,2,null,n,null,null),Zh(),s[Ys]=null}};function xd(n){this._internalRoot=n}xd.prototype.unstable_scheduleHydration=function(n){if(n){var s=Zu();n={blockedOn:null,target:n,priority:s};for(var a=0;a<ki.length&&s!==0&&s<ki[a].priority;a++);ki.splice(a,0,n),a===0&&Rb(n)}};var Mb=e.version;if(Mb!=="19.2.3")throw Error(r(527,Mb,"19.2.3"));W.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=y(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var QS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bd.isDisabled&&bd.supportsFiber)try{Fe=bd.inject(QS),ke=bd}catch{}}return qc.createRoot=function(n,s){if(!o(n))throw Error(r(299));var a=!1,l="",f=B_,m=q_,x=F_;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError)),s=wb(n,1,!1,null,null,a,l,null,f,m,x,kb),n[Ys]=s.current,wg(n),new Bg(s)},qc.hydrateRoot=function(n,s,a){if(!o(n))throw Error(r(299));var l=!1,f="",m=B_,x=q_,E=F_,M=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),s=wb(n,1,!0,s,a??null,l,f,M,m,x,E,kb),s.context=Eb(null),a=s.current,l=hs(),l=aa(l),f=_i(l),f.callback=null,xi(a,f,l),a=l,s.current.lanes=a,br(s,a),hr(s),n[Ys]=s.current,wg(n),new xd(s)},qc.version="19.2.3",qc}var Hb;function rA(){if(Hb)return Hg.exports;Hb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Hg.exports=sA(),Hg.exports}var iA=rA();const aA=Z1(iA);var yt=(i=>(i.GUEST="GUEST",i.STUDENT="STUDENT",i.ADMIN="ADMIN",i))(yt||{});const oA=()=>{};var Gb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},lA=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[t++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[t++],u=i[t++],g=i[t++],p=((o&7)<<18|(c&63)<<12|(u&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const c=i[t++],u=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},nw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],u=o+1<i.length,g=u?i[o+1]:0,p=o+2<i.length,y=p?i[o+2]:0,v=c>>2,w=(c&3)<<4|g>>4;let A=(g&15)<<2|y>>6,j=y&63;p||(j=64,u||(A=64)),r.push(t[v],t[w],t[A],t[j])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(tw(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):lA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=t[i.charAt(o++)],g=o<i.length?t[i.charAt(o)]:0;++o;const y=o<i.length?t[i.charAt(o)]:64;++o;const w=o<i.length?t[i.charAt(o)]:64;if(++o,c==null||g==null||y==null||w==null)throw new cA;const A=c<<2|g>>4;if(r.push(A),y!==64){const j=g<<4&240|y>>2;if(r.push(j),w!==64){const U=y<<6&192|w;r.push(U)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class cA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uA=function(i){const e=tw(i);return nw.encodeByteArray(e,!0)},Yd=function(i){return uA(i).replace(/\./g,"")},sw=function(i){try{return nw.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=()=>rw().__FIREBASE_DEFAULTS__,dA=()=>{if(typeof process>"u"||typeof Gb>"u")return;const i=Gb.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},fA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&sw(i[1]);return e&&JSON.parse(e)},wf=()=>{try{return oA()||hA()||dA()||fA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},iw=i=>{var e,t;return(t=(e=wf())==null?void 0:e.emulatorHosts)==null?void 0:t[i]},mA=i=>{const e=iw(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},aw=()=>{var i;return(i=wf())==null?void 0:i.config},ow=i=>{var e;return(e=wf())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lw(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Yd(JSON.stringify(t)),Yd(JSON.stringify(u)),""].join(".")}const tu={};function yA(){const i={prod:[],emulator:[]};for(const e of Object.keys(tu))tu[e]?i.emulator.push(e):i.prod.push(e);return i}function _A(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Kb=!1;function cw(i,e){if(typeof window>"u"||typeof document>"u"||!Dl(window.location.host)||tu[i]===e||tu[i]||Kb)return;tu[i]=e;function t(A){return`__firebase__banner__${A}`}const r="__firebase__banner",c=yA().prod.length>0;function u(){const A=document.getElementById(r);A&&A.remove()}function g(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,j){A.setAttribute("width","24"),A.setAttribute("id",j),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Kb=!0,u()},A}function v(A,j){A.setAttribute("id",j),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function w(){const A=_A(r),j=t("text"),U=document.getElementById(j)||document.createElement("span"),q=t("learnmore"),P=document.getElementById(q)||document.createElement("a"),ie=t("preprendIcon"),ve=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const be=A.element;g(be),v(P,q);const he=y();p(ve,ie),be.append(ve,U,P,he),document.body.appendChild(be)}c?(U.innerText="Preview backend disconnected.",ve.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ve.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function uw(){var e;const i=(e=wf())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function wA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EA(){const i=wn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function hw(){return!uw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dw(){return!uw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function fw(){try{return typeof indexedDB=="object"}catch{return!1}}function TA(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="FirebaseError";class Wr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=SA,Object.setPrototypeOf(this,Wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Du.prototype.create)}}class Du{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?AA(c,r):"Error",g=`${this.serviceName}: ${u} (${o}).`;return new Wr(o,g,r)}}function AA(i,e){return i.replace(IA,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const IA=/\{\$([^}]+)}/g;function NA(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ka(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const c=i[o],u=e[o];if($b(c)&&$b(u)){if(!Ka(c,u))return!1}else if(c!==u)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function $b(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Xc(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function CA(i,e){const t=new RA(i,e);return t.subscribe.bind(t)}class RA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");DA(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Qg),o.error===void 0&&(o.error=Qg),o.complete===void 0&&(o.complete=Qg);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DA(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Qg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(i){return i&&i._delegate?i._delegate:i}class $a{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new gA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MA(e))try{this.getOrInitializeService({instanceIdentifier:ka})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=ka){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ka){return this.instances.has(e)}getOptions(e=ka){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,u]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);r===g&&u.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ka){return this.component?this.component.multipleInstances?e:ka:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kA(i){return i===ka?void 0:i}function MA(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new jA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(mt||(mt={}));const VA={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},zA=mt.INFO,PA={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},UA=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=PA[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qp{constructor(e){this.name=e,this._logLevel=zA,this._logHandler=UA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...e),this._logHandler(this,mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...e),this._logHandler(this,mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...e),this._logHandler(this,mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...e),this._logHandler(this,mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...e),this._logHandler(this,mt.ERROR,...e)}}const LA=(i,e)=>e.some(t=>i instanceof t);let Qb,Yb;function BA(){return Qb||(Qb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qA(){return Yb||(Yb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mw=new WeakMap,hp=new WeakMap,gw=new WeakMap,Yg=new WeakMap,Yp=new WeakMap;function FA(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",u)},c=()=>{t(Gi(i.result)),o()},u=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&mw.set(t,i)}).catch(()=>{}),Yp.set(e,i),e}function HA(i){if(hp.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",u),i.removeEventListener("abort",u)},c=()=>{t(),o()},u=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",u),i.addEventListener("abort",u)});hp.set(i,e)}let dp={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return hp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||gw.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gi(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function GA(i){dp=i(dp)}function KA(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Xg(this),e,...t);return gw.set(r,e.sort?e.sort():[e]),Gi(r)}:qA().includes(i)?function(...e){return i.apply(Xg(this),e),Gi(mw.get(this))}:function(...e){return Gi(i.apply(Xg(this),e))}}function $A(i){return typeof i=="function"?KA(i):(i instanceof IDBTransaction&&HA(i),LA(i,BA())?new Proxy(i,dp):i)}function Gi(i){if(i instanceof IDBRequest)return FA(i);if(Yg.has(i))return Yg.get(i);const e=$A(i);return e!==i&&(Yg.set(i,e),Yp.set(e,i)),e}const Xg=i=>Yp.get(i);function QA(i,e,{blocked:t,upgrade:r,blocking:o,terminated:c}={}){const u=indexedDB.open(i,e),g=Gi(u);return r&&u.addEventListener("upgradeneeded",p=>{r(Gi(u.result),p.oldVersion,p.newVersion,Gi(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const YA=["get","getKey","getAll","getAllKeys","count"],XA=["put","add","delete","clear"],Wg=new Map;function Xb(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Wg.get(e))return Wg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=XA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||YA.includes(t)))return;const c=async function(u,...g){const p=this.transaction(u,o?"readwrite":"readonly");let y=p.store;return r&&(y=y.index(g.shift())),(await Promise.all([y[t](...g),o&&p.done]))[0]};return Wg.set(e,c),c}GA(i=>({...i,get:(e,t,r)=>Xb(e,t)||i.get(e,t,r),has:(e,t)=>!!Xb(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(JA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function JA(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fp="@firebase/app",Wb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new Qp("@firebase/app"),ZA="@firebase/app-compat",eI="@firebase/analytics-compat",tI="@firebase/analytics",nI="@firebase/app-check-compat",sI="@firebase/app-check",rI="@firebase/auth",iI="@firebase/auth-compat",aI="@firebase/database",oI="@firebase/data-connect",lI="@firebase/database-compat",cI="@firebase/functions",uI="@firebase/functions-compat",hI="@firebase/installations",dI="@firebase/installations-compat",fI="@firebase/messaging",mI="@firebase/messaging-compat",gI="@firebase/performance",pI="@firebase/performance-compat",yI="@firebase/remote-config",_I="@firebase/remote-config-compat",xI="@firebase/storage",bI="@firebase/storage-compat",vI="@firebase/firestore",wI="@firebase/ai",EI="@firebase/firestore-compat",TI="firebase",SI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="[DEFAULT]",AI={[fp]:"fire-core",[ZA]:"fire-core-compat",[tI]:"fire-analytics",[eI]:"fire-analytics-compat",[sI]:"fire-app-check",[nI]:"fire-app-check-compat",[rI]:"fire-auth",[iI]:"fire-auth-compat",[aI]:"fire-rtdb",[oI]:"fire-data-connect",[lI]:"fire-rtdb-compat",[cI]:"fire-fn",[uI]:"fire-fn-compat",[hI]:"fire-iid",[dI]:"fire-iid-compat",[fI]:"fire-fcm",[mI]:"fire-fcm-compat",[gI]:"fire-perf",[pI]:"fire-perf-compat",[yI]:"fire-rc",[_I]:"fire-rc-compat",[xI]:"fire-gcs",[bI]:"fire-gcs-compat",[vI]:"fire-fst",[EI]:"fire-fst-compat",[wI]:"fire-vertex","fire-js":"fire-js",[TI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=new Map,gp=new Map,pp=new Map;function Jb(i,e){try{i.container.addComponent(e)}catch(t){$r.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function pl(i){const e=i.name;if(pp.has(e))return $r.debug(`There were multiple attempts to register component ${e}.`),!1;pp.set(e,i);for(const t of Qa.values())Jb(t,i);for(const t of gp.values())Jb(t,i);return!0}function Xp(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function fs(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ki=new Du("app","Firebase",II);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ki.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=SI;function Wp(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:mp,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Ki.create("bad-app-name",{appName:String(o)});if(t||(t=aw()),!t)throw Ki.create("no-options");const c=Qa.get(o);if(c){if(Ka(t,c.options)&&Ka(r,c.config))return c;throw Ki.create("duplicate-app",{appName:o})}const u=new OA(o);for(const p of pp.values())u.addComponent(p);const g=new NI(t,r,u);return Qa.set(o,g),g}function Jp(i=mp){const e=Qa.get(i);if(!e&&i===mp&&aw())return Wp();if(!e)throw Ki.create("no-app",{appName:i});return e}function CI(){return Array.from(Qa.values())}async function RI(i){let e=!1;const t=i.name;Qa.has(t)?(e=!0,Qa.delete(t)):gp.has(t)&&i.decRefCount()<=0&&(gp.delete(t),e=!0),e&&(await Promise.all(i.container.getProviders().map(r=>r.delete())),i.isDeleted=!0)}function $i(i,e,t){let r=AI[i]??i;t&&(r+=`-${t}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$r.warn(u.join(" "));return}pl(new $a(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="firebase-heartbeat-database",jI=1,hu="firebase-heartbeat-store";let Jg=null;function pw(){return Jg||(Jg=QA(DI,jI,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(hu)}catch(t){console.warn(t)}}}}).catch(i=>{throw Ki.create("idb-open",{originalErrorMessage:i.message})})),Jg}async function kI(i){try{const t=(await pw()).transaction(hu),r=await t.objectStore(hu).get(yw(i));return await t.done,r}catch(e){if(e instanceof Wr)$r.warn(e.message);else{const t=Ki.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$r.warn(t.message)}}}async function Zb(i,e){try{const r=(await pw()).transaction(hu,"readwrite");await r.objectStore(hu).put(e,yw(i)),await r.done}catch(t){if(t instanceof Wr)$r.warn(t.message);else{const r=Ki.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});$r.warn(r.message)}}}function yw(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=1024,OI=30;class VI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new PI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=ev();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(u=>u.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>OI){const u=UI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){$r.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ev(),{heartbeatsToSend:r,unsentEntries:o}=zI(this._heartbeatsCache.heartbeats),c=Yd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return $r.warn(t),""}}}function ev(){return new Date().toISOString().substring(0,10)}function zI(i,e=MI){const t=[];let r=i.slice();for(const o of i){const c=t.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),tv(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),tv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class PI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fw()?TA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Zb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Zb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function tv(i){return Yd(JSON.stringify({version:2,heartbeats:i})).length}function UI(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(i){pl(new $a("platform-logger",e=>new WA(e),"PRIVATE")),pl(new $a("heartbeat",e=>new VI(e),"PRIVATE")),$i(fp,Wb,i),$i(fp,Wb,"esm2020"),$i("fire-js","")}LI("");var BI="firebase",qI="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$i(BI,qI,"app");var nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qi,_w;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,R){function C(){}C.prototype=R.prototype,N.F=R.prototype,N.prototype=new C,N.prototype.constructor=N,N.D=function(k,I,O){for(var T=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)T[ue-2]=arguments[ue];return R.prototype[I].apply(k,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,R,C){C||(C=0);const k=Array(16);if(typeof R=="string")for(var I=0;I<16;++I)k[I]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(I=0;I<16;++I)k[I]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=N.g[0],C=N.g[1],I=N.g[2];let O=N.g[3],T;T=R+(O^C&(I^O))+k[0]+3614090360&4294967295,R=C+(T<<7&4294967295|T>>>25),T=O+(I^R&(C^I))+k[1]+3905402710&4294967295,O=R+(T<<12&4294967295|T>>>20),T=I+(C^O&(R^C))+k[2]+606105819&4294967295,I=O+(T<<17&4294967295|T>>>15),T=C+(R^I&(O^R))+k[3]+3250441966&4294967295,C=I+(T<<22&4294967295|T>>>10),T=R+(O^C&(I^O))+k[4]+4118548399&4294967295,R=C+(T<<7&4294967295|T>>>25),T=O+(I^R&(C^I))+k[5]+1200080426&4294967295,O=R+(T<<12&4294967295|T>>>20),T=I+(C^O&(R^C))+k[6]+2821735955&4294967295,I=O+(T<<17&4294967295|T>>>15),T=C+(R^I&(O^R))+k[7]+4249261313&4294967295,C=I+(T<<22&4294967295|T>>>10),T=R+(O^C&(I^O))+k[8]+1770035416&4294967295,R=C+(T<<7&4294967295|T>>>25),T=O+(I^R&(C^I))+k[9]+2336552879&4294967295,O=R+(T<<12&4294967295|T>>>20),T=I+(C^O&(R^C))+k[10]+4294925233&4294967295,I=O+(T<<17&4294967295|T>>>15),T=C+(R^I&(O^R))+k[11]+2304563134&4294967295,C=I+(T<<22&4294967295|T>>>10),T=R+(O^C&(I^O))+k[12]+1804603682&4294967295,R=C+(T<<7&4294967295|T>>>25),T=O+(I^R&(C^I))+k[13]+4254626195&4294967295,O=R+(T<<12&4294967295|T>>>20),T=I+(C^O&(R^C))+k[14]+2792965006&4294967295,I=O+(T<<17&4294967295|T>>>15),T=C+(R^I&(O^R))+k[15]+1236535329&4294967295,C=I+(T<<22&4294967295|T>>>10),T=R+(I^O&(C^I))+k[1]+4129170786&4294967295,R=C+(T<<5&4294967295|T>>>27),T=O+(C^I&(R^C))+k[6]+3225465664&4294967295,O=R+(T<<9&4294967295|T>>>23),T=I+(R^C&(O^R))+k[11]+643717713&4294967295,I=O+(T<<14&4294967295|T>>>18),T=C+(O^R&(I^O))+k[0]+3921069994&4294967295,C=I+(T<<20&4294967295|T>>>12),T=R+(I^O&(C^I))+k[5]+3593408605&4294967295,R=C+(T<<5&4294967295|T>>>27),T=O+(C^I&(R^C))+k[10]+38016083&4294967295,O=R+(T<<9&4294967295|T>>>23),T=I+(R^C&(O^R))+k[15]+3634488961&4294967295,I=O+(T<<14&4294967295|T>>>18),T=C+(O^R&(I^O))+k[4]+3889429448&4294967295,C=I+(T<<20&4294967295|T>>>12),T=R+(I^O&(C^I))+k[9]+568446438&4294967295,R=C+(T<<5&4294967295|T>>>27),T=O+(C^I&(R^C))+k[14]+3275163606&4294967295,O=R+(T<<9&4294967295|T>>>23),T=I+(R^C&(O^R))+k[3]+4107603335&4294967295,I=O+(T<<14&4294967295|T>>>18),T=C+(O^R&(I^O))+k[8]+1163531501&4294967295,C=I+(T<<20&4294967295|T>>>12),T=R+(I^O&(C^I))+k[13]+2850285829&4294967295,R=C+(T<<5&4294967295|T>>>27),T=O+(C^I&(R^C))+k[2]+4243563512&4294967295,O=R+(T<<9&4294967295|T>>>23),T=I+(R^C&(O^R))+k[7]+1735328473&4294967295,I=O+(T<<14&4294967295|T>>>18),T=C+(O^R&(I^O))+k[12]+2368359562&4294967295,C=I+(T<<20&4294967295|T>>>12),T=R+(C^I^O)+k[5]+4294588738&4294967295,R=C+(T<<4&4294967295|T>>>28),T=O+(R^C^I)+k[8]+2272392833&4294967295,O=R+(T<<11&4294967295|T>>>21),T=I+(O^R^C)+k[11]+1839030562&4294967295,I=O+(T<<16&4294967295|T>>>16),T=C+(I^O^R)+k[14]+4259657740&4294967295,C=I+(T<<23&4294967295|T>>>9),T=R+(C^I^O)+k[1]+2763975236&4294967295,R=C+(T<<4&4294967295|T>>>28),T=O+(R^C^I)+k[4]+1272893353&4294967295,O=R+(T<<11&4294967295|T>>>21),T=I+(O^R^C)+k[7]+4139469664&4294967295,I=O+(T<<16&4294967295|T>>>16),T=C+(I^O^R)+k[10]+3200236656&4294967295,C=I+(T<<23&4294967295|T>>>9),T=R+(C^I^O)+k[13]+681279174&4294967295,R=C+(T<<4&4294967295|T>>>28),T=O+(R^C^I)+k[0]+3936430074&4294967295,O=R+(T<<11&4294967295|T>>>21),T=I+(O^R^C)+k[3]+3572445317&4294967295,I=O+(T<<16&4294967295|T>>>16),T=C+(I^O^R)+k[6]+76029189&4294967295,C=I+(T<<23&4294967295|T>>>9),T=R+(C^I^O)+k[9]+3654602809&4294967295,R=C+(T<<4&4294967295|T>>>28),T=O+(R^C^I)+k[12]+3873151461&4294967295,O=R+(T<<11&4294967295|T>>>21),T=I+(O^R^C)+k[15]+530742520&4294967295,I=O+(T<<16&4294967295|T>>>16),T=C+(I^O^R)+k[2]+3299628645&4294967295,C=I+(T<<23&4294967295|T>>>9),T=R+(I^(C|~O))+k[0]+4096336452&4294967295,R=C+(T<<6&4294967295|T>>>26),T=O+(C^(R|~I))+k[7]+1126891415&4294967295,O=R+(T<<10&4294967295|T>>>22),T=I+(R^(O|~C))+k[14]+2878612391&4294967295,I=O+(T<<15&4294967295|T>>>17),T=C+(O^(I|~R))+k[5]+4237533241&4294967295,C=I+(T<<21&4294967295|T>>>11),T=R+(I^(C|~O))+k[12]+1700485571&4294967295,R=C+(T<<6&4294967295|T>>>26),T=O+(C^(R|~I))+k[3]+2399980690&4294967295,O=R+(T<<10&4294967295|T>>>22),T=I+(R^(O|~C))+k[10]+4293915773&4294967295,I=O+(T<<15&4294967295|T>>>17),T=C+(O^(I|~R))+k[1]+2240044497&4294967295,C=I+(T<<21&4294967295|T>>>11),T=R+(I^(C|~O))+k[8]+1873313359&4294967295,R=C+(T<<6&4294967295|T>>>26),T=O+(C^(R|~I))+k[15]+4264355552&4294967295,O=R+(T<<10&4294967295|T>>>22),T=I+(R^(O|~C))+k[6]+2734768916&4294967295,I=O+(T<<15&4294967295|T>>>17),T=C+(O^(I|~R))+k[13]+1309151649&4294967295,C=I+(T<<21&4294967295|T>>>11),T=R+(I^(C|~O))+k[4]+4149444226&4294967295,R=C+(T<<6&4294967295|T>>>26),T=O+(C^(R|~I))+k[11]+3174756917&4294967295,O=R+(T<<10&4294967295|T>>>22),T=I+(R^(O|~C))+k[2]+718787259&4294967295,I=O+(T<<15&4294967295|T>>>17),T=C+(O^(I|~R))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+R&4294967295,N.g[1]=N.g[1]+(I+(T<<21&4294967295|T>>>11))&4294967295,N.g[2]=N.g[2]+I&4294967295,N.g[3]=N.g[3]+O&4294967295}r.prototype.v=function(N,R){R===void 0&&(R=N.length);const C=R-this.blockSize,k=this.C;let I=this.h,O=0;for(;O<R;){if(I==0)for(;O<=C;)o(this,N,O),O+=this.blockSize;if(typeof N=="string"){for(;O<R;)if(k[I++]=N.charCodeAt(O++),I==this.blockSize){o(this,k),I=0;break}}else for(;O<R;)if(k[I++]=N[O++],I==this.blockSize){o(this,k),I=0;break}}this.h=I,this.o+=R},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var R=1;R<N.length-8;++R)N[R]=0;R=this.o*8;for(var C=N.length-8;C<N.length;++C)N[C]=R&255,R/=256;for(this.v(N),N=Array(16),R=0,C=0;C<4;++C)for(let k=0;k<32;k+=8)N[R++]=this.g[C]>>>k&255;return N};function c(N,R){var C=g;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=R(N)}function u(N,R){this.h=R;const C=[];let k=!0;for(let I=N.length-1;I>=0;I--){const O=N[I]|0;k&&O==R||(C[I]=O,k=!1)}this.g=C}var g={};function p(N){return-128<=N&&N<128?c(N,function(R){return new u([R|0],R<0?-1:0)}):new u([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return w;if(N<0)return P(y(-N));const R=[];let C=1;for(let k=0;N>=C;k++)R[k]=N/C|0,C*=4294967296;return new u(R,0)}function v(N,R){if(N.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(N.charAt(0)=="-")return P(v(N.substring(1),R));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(R,8));let k=w;for(let O=0;O<N.length;O+=8){var I=Math.min(8,N.length-O);const T=parseInt(N.substring(O,O+I),R);I<8?(I=y(Math.pow(R,I)),k=k.j(I).add(y(T))):(k=k.j(C),k=k.add(y(T)))}return k}var w=p(0),A=p(1),j=p(16777216);i=u.prototype,i.m=function(){if(q(this))return-P(this).m();let N=0,R=1;for(let C=0;C<this.g.length;C++){const k=this.i(C);N+=(k>=0?k:4294967296+k)*R,R*=4294967296}return N},i.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(U(this))return"0";if(q(this))return"-"+P(this).toString(N);const R=y(Math.pow(N,6));var C=this;let k="";for(;;){const I=he(C,R).g;C=ie(C,I.j(R));let O=((C.g.length>0?C.g[0]:C.h)>>>0).toString(N);if(C=I,U(C))return O+k;for(;O.length<6;)O="0"+O;k=O+k}},i.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function U(N){if(N.h!=0)return!1;for(let R=0;R<N.g.length;R++)if(N.g[R]!=0)return!1;return!0}function q(N){return N.h==-1}i.l=function(N){return N=ie(this,N),q(N)?-1:U(N)?0:1};function P(N){const R=N.g.length,C=[];for(let k=0;k<R;k++)C[k]=~N.g[k];return new u(C,~N.h).add(A)}i.abs=function(){return q(this)?P(this):this},i.add=function(N){const R=Math.max(this.g.length,N.g.length),C=[];let k=0;for(let I=0;I<=R;I++){let O=k+(this.i(I)&65535)+(N.i(I)&65535),T=(O>>>16)+(this.i(I)>>>16)+(N.i(I)>>>16);k=T>>>16,O&=65535,T&=65535,C[I]=T<<16|O}return new u(C,C[C.length-1]&-2147483648?-1:0)};function ie(N,R){return N.add(P(R))}i.j=function(N){if(U(this)||U(N))return w;if(q(this))return q(N)?P(this).j(P(N)):P(P(this).j(N));if(q(N))return P(this.j(P(N)));if(this.l(j)<0&&N.l(j)<0)return y(this.m()*N.m());const R=this.g.length+N.g.length,C=[];for(var k=0;k<2*R;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(let I=0;I<N.g.length;I++){const O=this.i(k)>>>16,T=this.i(k)&65535,ue=N.i(I)>>>16,me=N.i(I)&65535;C[2*k+2*I]+=T*me,ve(C,2*k+2*I),C[2*k+2*I+1]+=O*me,ve(C,2*k+2*I+1),C[2*k+2*I+1]+=T*ue,ve(C,2*k+2*I+1),C[2*k+2*I+2]+=O*ue,ve(C,2*k+2*I+2)}for(N=0;N<R;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=R;N<2*R;N++)C[N]=0;return new u(C,0)};function ve(N,R){for(;(N[R]&65535)!=N[R];)N[R+1]+=N[R]>>>16,N[R]&=65535,R++}function be(N,R){this.g=N,this.h=R}function he(N,R){if(U(R))throw Error("division by zero");if(U(N))return new be(w,w);if(q(N))return R=he(P(N),R),new be(P(R.g),P(R.h));if(q(R))return R=he(N,P(R)),new be(P(R.g),R.h);if(N.g.length>30){if(q(N)||q(R))throw Error("slowDivide_ only works with positive integers.");for(var C=A,k=R;k.l(N)<=0;)C=we(C),k=we(k);var I=de(C,1),O=de(k,1);for(k=de(k,2),C=de(C,2);!U(k);){var T=O.add(k);T.l(N)<=0&&(I=I.add(C),O=T),k=de(k,1),C=de(C,1)}return R=ie(N,I.j(R)),new be(I,R)}for(I=w;N.l(R)>=0;){for(C=Math.max(1,Math.floor(N.m()/R.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),O=y(C),T=O.j(R);q(T)||T.l(N)>0;)C-=k,O=y(C),T=O.j(R);U(O)&&(O=A),I=I.add(O),N=ie(N,T)}return new be(I,N)}i.B=function(N){return he(this,N).h},i.and=function(N){const R=Math.max(this.g.length,N.g.length),C=[];for(let k=0;k<R;k++)C[k]=this.i(k)&N.i(k);return new u(C,this.h&N.h)},i.or=function(N){const R=Math.max(this.g.length,N.g.length),C=[];for(let k=0;k<R;k++)C[k]=this.i(k)|N.i(k);return new u(C,this.h|N.h)},i.xor=function(N){const R=Math.max(this.g.length,N.g.length),C=[];for(let k=0;k<R;k++)C[k]=this.i(k)^N.i(k);return new u(C,this.h^N.h)};function we(N){const R=N.g.length+1,C=[];for(let k=0;k<R;k++)C[k]=N.i(k)<<1|N.i(k-1)>>>31;return new u(C,N.h)}function de(N,R){const C=R>>5;R%=32;const k=N.g.length-C,I=[];for(let O=0;O<k;O++)I[O]=R>0?N.i(O+C)>>>R|N.i(O+C+1)<<32-R:N.i(O+C);return new u(I,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,_w=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,Qi=u}).apply(typeof nv<"u"?nv:typeof self<"u"?self:typeof window<"u"?window:{});var vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xw,Wc,bw,kd,yp,vw,ww,Ew;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof vd=="object"&&vd];for(var _=0;_<h.length;++_){var b=h[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function o(h,_){if(_)e:{var b=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var H=h[S];if(!(H in b))break e;b=b[H]}h=h[h.length-1],S=b[h],_=_(S),_!=S&&_!=null&&e(b,h,{configurable:!0,writable:!0,value:_})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(_){var b=[],S;for(S in _)Object.prototype.hasOwnProperty.call(_,S)&&b.push([S,_[S]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function g(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function p(h,_,b){return h.call.apply(h.bind,arguments)}function y(h,_,b){return y=p,y.apply(null,arguments)}function v(h,_){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function w(h,_){function b(){}b.prototype=_.prototype,h.Z=_.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(S,H,Y){for(var Ae=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)Ae[nt-2]=arguments[nt];return _.prototype[H].apply(S,Ae)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function j(h){const _=h.length;if(_>0){const b=Array(_);for(let S=0;S<_;S++)b[S]=h[S];return b}return[]}function U(h,_){for(let S=1;S<arguments.length;S++){const H=arguments[S];var b=typeof H;if(b=b!="object"?b:H?Array.isArray(H)?"array":b:"null",b=="array"||b=="object"&&typeof H.length=="number"){b=h.length||0;const Y=H.length||0;h.length=b+Y;for(let Ae=0;Ae<Y;Ae++)h[b+Ae]=H[Ae]}else h.push(H)}}class q{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function P(h){u.setTimeout(()=>{throw h},0)}function ie(){var h=N;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class ve{constructor(){this.h=this.g=null}add(_,b){const S=be.get();S.set(_,b),this.h?this.h.next=S:this.g=S,this.h=S}}var be=new q(()=>new he,h=>h.reset());class he{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let we,de=!1,N=new ve,R=()=>{const h=Promise.resolve(void 0);we=()=>{h.then(C)}};function C(){for(var h;h=ie();){try{h.h.call(h.g)}catch(b){P(b)}var _=be;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}de=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};u.addEventListener("test",b,_),u.removeEventListener("test",b,_)}catch{}return h})();function T(h){return/^[\s\xa0]*$/.test(h)}function ue(h,_){I.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}w(ue,I),ue.prototype.init=function(h,_){const b=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(b=="mouseover"?_=h.fromElement:b=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ue.Z.h.call(this)},ue.prototype.h=function(){ue.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),V=0;function W(h,_,b,S,H){this.listener=h,this.proxy=null,this.src=_,this.type=b,this.capture=!!S,this.ha=H,this.key=++V,this.da=this.fa=!1}function re(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ye(h,_,b){for(const S in h)_.call(b,h[S],S,h)}function ge(h,_){for(const b in h)_.call(void 0,h[b],b,h)}function D(h){const _={};for(const b in h)_[b]=h[b];return _}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(h,_){let b,S;for(let H=1;H<arguments.length;H++){S=arguments[H];for(b in S)h[b]=S[b];for(let Y=0;Y<B.length;Y++)b=B[Y],Object.prototype.hasOwnProperty.call(S,b)&&(h[b]=S[b])}}function fe(h){this.src=h,this.g={},this.h=0}fe.prototype.add=function(h,_,b,S,H){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const Ae=Ce(h,_,S,H);return Ae>-1?(_=h[Ae],b||(_.fa=!1)):(_=new W(_,this.src,Y,!!S,H),_.fa=b,h.push(_)),_};function ce(h,_){const b=_.type;if(b in h.g){var S=h.g[b],H=Array.prototype.indexOf.call(S,_,void 0),Y;(Y=H>=0)&&Array.prototype.splice.call(S,H,1),Y&&(re(_),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Ce(h,_,b,S){for(let H=0;H<h.length;++H){const Y=h[H];if(!Y.da&&Y.listener==_&&Y.capture==!!b&&Y.ha==S)return H}return-1}var He="closure_lm_"+(Math.random()*1e6|0),it={};function at(h,_,b,S,H){if(Array.isArray(_)){for(let Y=0;Y<_.length;Y++)at(h,_[Y],b,S,H);return null}return b=Ye(b),h&&h[me]?h.J(_,b,g(S)?!!S.capture:!1,H):Lt(h,_,b,!1,S,H)}function Lt(h,_,b,S,H,Y){if(!_)throw Error("Invalid event type");const Ae=g(H)?!!H.capture:!!H;let nt=Ve(h);if(nt||(h[He]=nt=new fe(h)),b=nt.add(_,b,S,Ae,Y),b.proxy)return b;if(S=Bt(),b.proxy=S,S.src=h,S.listener=b,h.addEventListener)O||(H=Ae),H===void 0&&(H=!1),h.addEventListener(_.toString(),S,H);else if(h.attachEvent)h.attachEvent(Pt(_.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Bt(){function h(b){return _.call(h.src,h.listener,b)}const _=oe;return h}function Zt(h,_,b,S,H){if(Array.isArray(_))for(var Y=0;Y<_.length;Y++)Zt(h,_[Y],b,S,H);else S=g(S)?!!S.capture:!!S,b=Ye(b),h&&h[me]?(h=h.i,Y=String(_).toString(),Y in h.g&&(_=h.g[Y],b=Ce(_,b,S,H),b>-1&&(re(_[b]),Array.prototype.splice.call(_,b,1),_.length==0&&(delete h.g[Y],h.h--)))):h&&(h=Ve(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ce(_,b,S,H)),(b=h>-1?_[h]:null)&&Tn(b))}function Tn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[me])ce(_.i,h);else{var b=h.type,S=h.proxy;_.removeEventListener?_.removeEventListener(b,S,h.capture):_.detachEvent?_.detachEvent(Pt(b),S):_.addListener&&_.removeListener&&_.removeListener(S),(b=Ve(_))?(ce(b,h),b.h==0&&(b.src=null,_[He]=null)):re(h)}}}function Pt(h){return h in it?it[h]:it[h]="on"+h}function oe(h,_){if(h.da)h=!0;else{_=new ue(_,this);const b=h.listener,S=h.ha||h.src;h.fa&&Tn(h),h=b.call(S,_)}return h}function Ve(h){return h=h[He],h instanceof fe?h:null}var Me="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ye(h){return typeof h=="function"?h:(h[Me]||(h[Me]=function(_){return h.handleEvent(_)}),h[Me])}function Ge(){k.call(this),this.i=new fe(this),this.M=this,this.G=null}w(Ge,k),Ge.prototype[me]=!0,Ge.prototype.removeEventListener=function(h,_,b,S){Zt(this,h,_,b,S)};function _e(h,_){var b,S=h.G;if(S)for(b=[];S;S=S.G)b.push(S);if(h=h.M,S=_.type||_,typeof _=="string")_=new I(_,h);else if(_ instanceof I)_.target=_.target||h;else{var H=_;_=new I(S,h),J(_,H)}H=!0;let Y,Ae;if(b)for(Ae=b.length-1;Ae>=0;Ae--)Y=_.g=b[Ae],H=Ke(Y,S,!0,_)&&H;if(Y=_.g=h,H=Ke(Y,S,!0,_)&&H,H=Ke(Y,S,!1,_)&&H,b)for(Ae=0;Ae<b.length;Ae++)Y=_.g=b[Ae],H=Ke(Y,S,!1,_)&&H}Ge.prototype.N=function(){if(Ge.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const b=h.g[_];for(let S=0;S<b.length;S++)re(b[S]);delete h.g[_],h.h--}}this.G=null},Ge.prototype.J=function(h,_,b,S){return this.i.add(String(h),_,!1,b,S)},Ge.prototype.K=function(h,_,b,S){return this.i.add(String(h),_,!0,b,S)};function Ke(h,_,b,S){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let H=!0;for(let Y=0;Y<_.length;++Y){const Ae=_[Y];if(Ae&&!Ae.da&&Ae.capture==b){const nt=Ae.listener,rn=Ae.ha||Ae.src;Ae.fa&&ce(h.i,Ae),H=nt.call(rn,S)!==!1&&H}}return H&&!S.defaultPrevented}function $(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(h,_||0)}function ee(h){h.g=$(()=>{h.g=null,h.i&&(h.i=!1,ee(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Z extends k{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xe(h){k.call(this),this.h=h,this.g={}}w(xe,k);var Te=[];function Re(h){ye(h.g,function(_,b){this.g.hasOwnProperty(b)&&Tn(_)},h),h.g={}}xe.prototype.N=function(){xe.Z.N.call(this),Re(this)},xe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Le=u.JSON.stringify,Ne=u.JSON.parse,lt=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function pe(){}function De(){}var Fe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ke(){I.call(this,"d")}w(ke,I);function Qe(){I.call(this,"c")}w(Qe,I);var Je={},Ze=null;function vt(){return Ze=Ze||new Ge}Je.Ia="serverreachability";function wt(h){I.call(this,Je.Ia,h)}w(wt,I);function qt(h){const _=vt();_e(_,new wt(_))}Je.STAT_EVENT="statevent";function ln(h,_){I.call(this,Je.STAT_EVENT,h),this.stat=_}w(ln,I);function xt(h){const _=vt();_e(_,new ln(_,h))}Je.Ja="timingevent";function sn(h,_){I.call(this,Je.Ja,h),this.size=_}w(sn,I);function xn(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},_)}function Hn(){this.g=!0}Hn.prototype.ua=function(){this.g=!1};function si(h,_,b,S,H,Y){h.info(function(){if(h.g)if(Y){var Ae="",nt=Y.split("&");for(let St=0;St<nt.length;St++){var rn=nt[St].split("=");if(rn.length>1){const Gt=rn[0];rn=rn[1];const vs=Gt.split("_");Ae=vs.length>=2&&vs[1]=="type"?Ae+(Gt+"="+rn+"&"):Ae+(Gt+"=redacted&")}}}else Ae=null;else Ae=Y;return"XMLHTTP REQ ("+S+") [attempt "+H+"]: "+_+`
`+b+`
`+Ae})}function Bl(h,_,b,S,H,Y,Ae){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+H+"]: "+_+`
`+b+`
`+Y+" "+Ae})}function ys(h,_,b,S){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+$f(h,b)+(S?" "+S:"")})}function br(h,_){h.info(function(){return"TIMEOUT: "+_})}Hn.prototype.info=function(){};function $f(h,_){if(!h.g)return _;if(!_)return null;try{const Y=JSON.parse(_);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var b=Y[h];if(!(b.length<2)){var S=b[1];if(Array.isArray(S)&&!(S.length<1)){var H=S[0];if(H!="noop"&&H!="stop"&&H!="close")for(let Ae=1;Ae<S.length;Ae++)S[Ae]=""}}}}return Le(Y)}catch{return _}}var ia={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ql={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fl;function aa(){}w(aa,pe),aa.prototype.g=function(){return new XMLHttpRequest},Fl=new aa;function vr(h){return encodeURIComponent(String(h))}function Zu(h){var _=1;h=h.split(":");const b=[];for(;_>0&&h.length;)b.push(h.shift()),_--;return h.length&&b.push(h.join(":")),b}function Ms(h,_,b,S){this.j=h,this.i=_,this.l=b,this.S=S||1,this.V=new xe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Os}function Os(){this.i=null,this.g="",this.h=!1}var cn={},Sn={};function Ys(h,_,b){h.M=1,h.A=oa(hn(_)),h.u=b,h.R=!0,uo(h,null)}function uo(h,_){h.F=Date.now(),Xs(h),h.B=hn(h.A);var b=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),go(b.i,"t",S),h.C=0,b=h.j.L,h.h=new Os,h.g=mh(h.j,b?_:null,!h.u),h.P>0&&(h.O=new Z(y(h.Y,h,h.g),h.P)),_=h.V,b=h.g,S=h.ba;var H="readystatechange";Array.isArray(H)||(H&&(Te[0]=H.toString()),H=Te);for(let Y=0;Y<H.length;Y++){const Ae=at(b,H[Y],S||_.handleEvent,!1,_.h||_);if(!Ae)break;_.g[Ae.key]=Ae}_=h.J?D(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),qt(),si(h.i,h.v,h.B,h.l,h.S,h.u)}Ms.prototype.ba=function(h){h=h.target;const _=this.O;_&&Ps(h)==3?_.j():this.Y(h)},Ms.prototype.Y=function(h){try{if(h==this.g)e:{const nt=Ps(this.g),rn=this.g.ya(),St=this.g.ca();if(!(nt<3)&&(nt!=3||this.g&&(this.h.h||this.g.la()||Rn(this.g)))){this.K||nt!=4||rn==7||(rn==8||St<=0?qt(3):qt(2)),Ws(this);var _=this.g.ca();this.X=_;var b=Qf(this);if(this.o=_==200,Bl(this.i,this.v,this.B,this.l,this.S,nt,_),this.o){if(this.U&&!this.L){t:{if(this.g){var S,H=this.g;if((S=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(S)){var Y=S;break t}}Y=null}if(h=Y)ys(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Js(this,h);else{this.o=!1,this.m=3,xt(12),ss(this),_s(this);break e}}if(this.R){h=!0;let Gt;for(;!this.K&&this.C<b.length;)if(Gt=th(this,b),Gt==Sn){nt==4&&(this.m=4,xt(14),h=!1),ys(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==cn){this.m=4,xt(15),ys(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else ys(this.i,this.l,Gt,null),Js(this,Gt);if(eh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||b.length!=0||this.h.h||(this.m=1,xt(16),h=!1),this.o=this.o&&h,!h)ys(this.i,this.l,b,"[Invalid Chunked Response]"),ss(this),_s(this);else if(b.length>0&&!this.W){this.W=!0;var Ae=this.j;Ae.g==this&&Ae.aa&&!Ae.P&&(Ae.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),rc(Ae),Ae.P=!0,xt(11))}}else ys(this.i,this.l,b,null),Js(this,b);nt==4&&ss(this),this.o&&!this.K&&(nt==4?uh(this.j,this):(this.o=!1,Xs(this)))}else Er(this.g),_==400&&b.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),ss(this),_s(this)}}}catch{}finally{}};function Qf(h){if(!eh(h))return h.g.la();const _=Rn(h.g);if(_==="")return"";let b="";const S=_.length,H=Ps(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ss(h),_s(h),"";h.h.i=new u.TextDecoder}for(let Y=0;Y<S;Y++)h.h.h=!0,b+=h.h.i.decode(_[Y],{stream:!(H&&Y==S-1)});return _.length=0,h.h.g+=b,h.C=0,h.h.g}function eh(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function th(h,_){var b=h.C,S=_.indexOf(`
`,b);return S==-1?Sn:(b=Number(_.substring(b,S)),isNaN(b)?cn:(S+=1,S+b>_.length?Sn:(_=_.slice(S,S+b),h.C=S+b,_)))}Ms.prototype.cancel=function(){this.K=!0,ss(this)};function Xs(h){h.T=Date.now()+h.H,ho(h,h.H)}function ho(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=xn(y(h.aa,h),_)}function Ws(h){h.D&&(u.clearTimeout(h.D),h.D=null)}Ms.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(br(this.i,this.B),this.M!=2&&(qt(),xt(17)),ss(this),this.m=2,_s(this)):ho(this,this.T-h)};function _s(h){h.j.I==0||h.K||uh(h.j,h)}function ss(h){Ws(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Re(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function Js(h,_){try{var b=h.j;if(b.I!=0&&(b.g==h||er(b.h,h))){if(!h.L&&er(b.h,h)&&b.I==3){try{var S=b.Ba.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var H=S;if(H[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)bo(b),hi(b);else break e;ma(b),xt(18)}}else b.xa=H[1],0<b.xa-b.K&&H[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=xn(y(b.Va,b),6e3));Zs(b.h)<=1&&b.ta&&(b.ta=void 0)}else ar(b,11)}else if((h.L||b.g==h)&&bo(b),!T(_))for(H=b.Ba.g.parse(_),_=0;_<H.length;_++){let St=H[_];const Gt=St[0];if(!(Gt<=b.K))if(b.K=Gt,St=St[1],b.I==2)if(St[0]=="c"){b.M=St[1],b.ba=St[2];const vs=St[3];vs!=null&&(b.ka=vs,b.j.info("VER="+b.ka));const or=St[4];or!=null&&(b.za=or,b.j.info("SVER="+b.za));const Us=St[5];Us!=null&&typeof Us=="number"&&Us>0&&(S=1.5*Us,b.O=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const Ls=h.g;if(Ls){const ga=Ls.g?Ls.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ga){var Y=S.h;Y.g||ga.indexOf("spdy")==-1&&ga.indexOf("quic")==-1&&ga.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Kl(Y,Y.h),Y.h=null))}if(S.G){const vo=Ls.g?Ls.g.getResponseHeader("X-HTTP-Session-Id"):null;vo&&(S.wa=vo,It(S.J,S.G,vo))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),S=b;var Ae=h;if(S.na=fh(S,S.L?S.ba:null,S.W),Ae.L){$l(S.h,Ae);var nt=Ae,rn=S.O;rn&&(nt.H=rn),nt.D&&(Ws(nt),Xs(nt)),S.g=Ae}else lh(S);b.i.length>0&&ir(b)}else St[0]!="stop"&&St[0]!="close"||ar(b,7);else b.I==3&&(St[0]=="stop"||St[0]=="close"?St[0]=="stop"?ar(b,7):nc(b):St[0]!="noop"&&b.l&&b.l.qa(St),b.A=0)}}qt(4)}catch{}}var un=class{constructor(h,_){this.g=h,this.map=_}};function Hl(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Gl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Zs(h){return h.h?1:h.g?h.g.size:0}function er(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Kl(h,_){h.g?h.g.add(_):h.h=_}function $l(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Hl.prototype.cancel=function(){if(this.i=Ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ql(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const b of h.g.values())_=_.concat(b.G);return _}return j(h.i)}var nh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fo(h,_){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const S=h[b].indexOf("=");let H,Y=null;S>=0?(H=h[b].substring(0,S),Y=h[b].substring(S+1)):H=h[b],_(H,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function rs(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof rs?(this.l=h.l,An(this,h.j),this.o=h.o,this.g=h.g,ri(this,h.u),this.h=h.h,Yl(this,ah(h.i)),this.m=h.m):h&&(_=String(h).match(nh))?(this.l=!1,An(this,_[1]||"",!0),this.o=tr(_[2]||""),this.g=tr(_[3]||"",!0),ri(this,_[4]),this.h=tr(_[5]||"",!0),Yl(this,_[6]||"",!0),this.m=tr(_[7]||"")):(this.l=!1,this.i=new ai(null,this.l))}rs.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(la(_,mo,!0),":");var b=this.g;return(b||_=="file")&&(h.push("//"),(_=this.o)&&h.push(la(_,mo,!0),"@"),h.push(vr(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(la(b,b.charAt(0)=="/"?Xl:sh,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",la(b,rh)),h.join("")},rs.prototype.resolve=function(h){const _=hn(this);let b=!!h.j;b?An(_,h.j):b=!!h.o,b?_.o=h.o:b=!!h.g,b?_.g=h.g:b=h.u!=null;var S=h.h;if(b)ri(_,h.u);else if(b=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var H=_.h.lastIndexOf("/");H!=-1&&(S=_.h.slice(0,H+1)+S)}if(H=S,H==".."||H==".")S="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){S=H.lastIndexOf("/",0)==0,H=H.split("/");const Y=[];for(let Ae=0;Ae<H.length;){const nt=H[Ae++];nt=="."?S&&Ae==H.length&&Y.push(""):nt==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),S&&Ae==H.length&&Y.push("")):(Y.push(nt),S=!0)}S=Y.join("/")}else S=H}return b?_.h=S:b=h.i.toString()!=="",b?Yl(_,ah(h.i)):b=!!h.m,b&&(_.m=h.m),_};function hn(h){return new rs(h)}function An(h,_,b){h.j=b?tr(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function ri(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function Yl(h,_,b){_ instanceof ai?(h.i=_,po(h.i,h.l)):(b||(_=la(_,ii)),h.i=new ai(_,h.l))}function It(h,_,b){h.i.set(_,b)}function oa(h){return It(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function tr(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function la(h,_,b){return typeof h=="string"?(h=encodeURI(h).replace(_,Qn),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Qn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var mo=/[#\/\?@]/g,sh=/[#\?:]/g,Xl=/[#\?]/g,ii=/[#\?@]/g,rh=/#/g;function ai(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Yn(h){h.g||(h.g=new Map,h.h=0,h.i&&fo(h.i,function(_,b){h.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}i=ai.prototype,i.add=function(h,_){Yn(this),this.i=null,h=oi(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(_),this.h+=1,this};function ih(h,_){Yn(h),_=oi(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Wl(h,_){return Yn(h),_=oi(h,_),h.g.has(_)}i.forEach=function(h,_){Yn(this),this.g.forEach(function(b,S){b.forEach(function(H){h.call(_,H,S,this)},this)},this)};function Jl(h,_){Yn(h);let b=[];if(typeof _=="string")Wl(h,_)&&(b=b.concat(h.g.get(oi(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)b=b.concat(h[_]);return b}i.set=function(h,_){return Yn(this),this.i=null,h=oi(this,h),Wl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},i.get=function(h,_){return h?(h=Jl(this,h),h.length>0?String(h[0]):_):_};function go(h,_,b){ih(h,_),b.length>0&&(h.i=null,h.g.set(oi(h,_),j(b)),h.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let S=0;S<_.length;S++){var b=_[S];const H=vr(b);b=Jl(this,b);for(let Y=0;Y<b.length;Y++){let Ae=H;b[Y]!==""&&(Ae+="="+vr(b[Y])),h.push(Ae)}}return this.i=h.join("&")};function ah(h){const _=new ai;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function oi(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function po(h,_){_&&!h.j&&(Yn(h),h.i=null,h.g.forEach(function(b,S){const H=S.toLowerCase();S!=H&&(ih(this,S),go(this,H,b))},h)),h.j=_}function Vs(h,_){const b=new Hn;if(u.Image){const S=new Image;S.onload=v(xs,b,"TestLoadImage: loaded",!0,_,S),S.onerror=v(xs,b,"TestLoadImage: error",!1,_,S),S.onabort=v(xs,b,"TestLoadImage: abort",!1,_,S),S.ontimeout=v(xs,b,"TestLoadImage: timeout",!1,_,S),u.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else _(!1)}function Zl(h,_){const b=new Hn,S=new AbortController,H=setTimeout(()=>{S.abort(),xs(b,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:S.signal}).then(Y=>{clearTimeout(H),Y.ok?xs(b,"TestPingServer: ok",!0,_):xs(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(H),xs(b,"TestPingServer: error",!1,_)})}function xs(h,_,b,S,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),S(b)}catch{}}function li(){this.g=new lt}function nr(h){this.i=h.Sb||null,this.h=h.ab||!1}w(nr,pe),nr.prototype.g=function(){return new ca(this.i,this.h)};function ca(h,_){Ge.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(ca,Ge),i=ca.prototype,i.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,zs(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ci(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,zs(this)),this.g&&(this.readyState=3,zs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function yo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?ci(this):zs(this),this.readyState==3&&yo(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,ci(this))},i.Na=function(h){this.g&&(this.response=h,ci(this))},i.ga=function(){this.g&&ci(this)};function ci(h){h.readyState=4,h.l=null,h.j=null,h.B=null,zs(h)}i.setRequestHeader=function(h,_){this.A.append(h,_)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=_.next();return h.join(`\r
`)};function zs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function bs(h){let _="";return ye(h,function(b,S){_+=S,_+=":",_+=b,_+=`\r
`}),_}function ua(h,_,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=bs(b),typeof h=="string"?b!=null&&vr(b):It(h,_,b))}function Mt(h){Ge.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Mt,Ge);var sr=/^https?$/i,ec=["POST","PUT"];i=Mt.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,_,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fl.g(),this.g.onreadystatechange=A(y(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Y){ha(this,Y);return}if(h=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var H in S)b.set(H,S[H]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Y of S.keys())b.set(Y,S.get(Y));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(Y=>Y.toLowerCase()=="content-type"),H=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(ec,_,void 0)>=0)||S||H||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,Ae]of b)this.g.setRequestHeader(Y,Ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){ha(this,Y)}};function ha(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,tc(h),wr(h)}function tc(h){h.A||(h.A=!0,_e(h,"complete"),_e(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,_e(this,"complete"),_e(this,"abort"),wr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wr(this,!0)),Mt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?da(this):this.Xa())},i.Xa=function(){da(this)};function da(h){if(h.h&&typeof c<"u"){if(h.v&&Ps(h)==4)setTimeout(h.Ca.bind(h),0);else if(_e(h,"readystatechange"),Ps(h)==4){h.h=!1;try{const Y=h.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var S;if(S=Y===0){let Ae=String(h.D).match(nh)[1]||null;!Ae&&u.self&&u.self.location&&(Ae=u.self.location.protocol.slice(0,-1)),S=!sr.test(Ae?Ae.toLowerCase():"")}b=S}if(b)_e(h,"complete"),_e(h,"success");else{h.o=6;try{var H=Ps(h)>2?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.ca()+"]",tc(h)}}finally{wr(h)}}}}function wr(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,_||_e(h,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Ps(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Ps(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Ne(_)}};function Rn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Er(h){const _={};h=(h.g&&Ps(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(T(h[S]))continue;var b=Zu(h[S]);const H=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Y=_[H]||[];_[H]=Y,Y.push(b)}ge(_,function(S){return S.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function rr(h,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||_}function ui(h){this.za=0,this.i=[],this.j=new Hn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=rr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=rr("baseRetryDelayMs",5e3,h),this.Za=rr("retryDelaySeedMs",1e4,h),this.Ta=rr("forwardChannelMaxRetries",2,h),this.va=rr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Hl(h&&h.concurrentRequestLimit),this.Ba=new li,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ui.prototype,i.ka=8,i.I=1,i.connect=function(h,_,b,S){xt(0),this.W=h,this.H=_||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.J=fh(this,null,this.W),ir(this)};function nc(h){if(_o(h),h.I==3){var _=h.V++,b=hn(h.J);if(It(b,"SID",h.M),It(b,"RID",_),It(b,"TYPE","terminate"),fa(h,b),_=new Ms(h,h.j,_),_.M=2,_.A=oa(hn(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!b&&u.Image&&(new Image().src=_.A,b=!0),b||(_.g=mh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Xs(_)}dh(h)}function hi(h){h.g&&(rc(h),h.g.cancel(),h.g=null)}function _o(h){hi(h),h.v&&(u.clearTimeout(h.v),h.v=null),bo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function ir(h){if(!Gl(h.h)&&!h.m){h.m=!0;var _=h.Ea;we||R(),de||(we(),de=!0),N.add(_,h),h.D=0}}function xo(h,_){return Zs(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=xn(y(h.Ea,h,_),hh(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const H=new Ms(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=D(Y),J(Y,this.U)):Y=this.U),this.u!==null||this.R||(H.J=Y,Y=null),this.S)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,_>4096){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=oh(this,H,_),b=hn(this.J),It(b,"RID",h),It(b,"CVER",22),this.G&&It(b,"X-HTTP-Session-Id",this.G),fa(this,b),Y&&(this.R?_="headers="+vr(bs(Y))+"&"+_:this.u&&ua(b,this.u,Y)),Kl(this.h,H),this.Ra&&It(b,"TYPE","init"),this.S?(It(b,"$req",_),It(b,"SID","null"),H.U=!0,Ys(H,b,null)):Ys(H,b,_),this.I=2}}else this.I==3&&(h?sc(this,h):this.i.length==0||Gl(this.h)||sc(this))};function sc(h,_){var b;_?b=_.l:b=h.V++;const S=hn(h.J);It(S,"SID",h.M),It(S,"RID",b),It(S,"AID",h.K),fa(h,S),h.u&&h.o&&ua(S,h.u,h.o),b=new Ms(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),_&&(h.i=_.G.concat(h.i)),_=oh(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Kl(h.h,b),Ys(b,S,_)}function fa(h,_){h.H&&ye(h.H,function(b,S){It(_,S,b)}),h.l&&ye({},function(b,S){It(_,S,b)})}function oh(h,_,b){b=Math.min(h.i.length,b);const S=h.l?y(h.l.Ka,h.l,h):null;e:{var H=h.i;let nt=-1;for(;;){const rn=["count="+b];nt==-1?b>0?(nt=H[0].g,rn.push("ofs="+nt)):nt=0:rn.push("ofs="+nt);let St=!0;for(let Gt=0;Gt<b;Gt++){var Y=H[Gt].g;const vs=H[Gt].map;if(Y-=nt,Y<0)nt=Math.max(0,H[Gt].g-100),St=!1;else try{Y="req"+Y+"_"||"";try{var Ae=vs instanceof Map?vs:Object.entries(vs);for(const[or,Us]of Ae){let Ls=Us;g(Us)&&(Ls=Le(Us)),rn.push(Y+or+"="+encodeURIComponent(Ls))}}catch(or){throw rn.push(Y+"type="+encodeURIComponent("_badmap")),or}}catch{S&&S(vs)}}if(St){Ae=rn.join("&");break e}}Ae=void 0}return h=h.i.splice(0,b),_.G=h,Ae}function lh(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;we||R(),de||(we(),de=!0),N.add(_,h),h.A=0}}function ma(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=xn(y(h.Da,h),hh(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,ch(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=xn(y(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),hi(this),ch(this))};function rc(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function ch(h){h.g=new Ms(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=hn(h.na);It(_,"RID","rpc"),It(_,"SID",h.M),It(_,"AID",h.K),It(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&It(_,"TO",h.ia),It(_,"TYPE","xmlhttp"),fa(h,_),h.u&&h.o&&ua(_,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=oa(hn(_)),b.u=null,b.R=!0,uo(b,h)}i.Va=function(){this.C!=null&&(this.C=null,hi(this),ma(this),xt(19))};function bo(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function uh(h,_){var b=null;if(h.g==_){bo(h),rc(h),h.g=null;var S=2}else if(er(h.h,_))b=_.G,$l(h.h,_),S=1;else return;if(h.I!=0){if(_.o)if(S==1){b=_.u?_.u.length:0,_=Date.now()-_.F;var H=h.D;S=vt(),_e(S,new sn(S,b)),ir(h)}else lh(h);else if(H=_.m,H==3||H==0&&_.X>0||!(S==1&&xo(h,_)||S==2&&ma(h)))switch(b&&b.length>0&&(_=h.h,_.i=_.i.concat(b)),H){case 1:ar(h,5);break;case 4:ar(h,10);break;case 3:ar(h,6);break;default:ar(h,2)}}}function hh(h,_){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*_}function ar(h,_){if(h.j.info("Error code "+_),_==2){var b=y(h.bb,h),S=h.Ua;const H=!S;S=new rs(S||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||An(S,"https"),oa(S),H?Vs(S.toString(),b):Zl(S.toString(),b)}else xt(2);h.I=0,h.l&&h.l.pa(_),dh(h),_o(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function dh(h){if(h.I=0,h.ja=[],h.l){const _=Ql(h.h);(_.length!=0||h.i.length!=0)&&(U(h.ja,_),U(h.ja,h.i),h.h.i.length=0,j(h.i),h.i.length=0),h.l.oa()}}function fh(h,_,b){var S=b instanceof rs?hn(b):new rs(b);if(S.g!="")_&&(S.g=_+"."+S.g),ri(S,S.u);else{var H=u.location;S=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;const Y=new rs(null);S&&An(Y,S),_&&(Y.g=_),H&&ri(Y,H),b&&(Y.h=b),S=Y}return b=h.G,_=h.wa,b&&_&&It(S,b,_),It(S,"VER",h.ka),fa(h,S),S}function mh(h,_,b){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new Mt(new nr({ab:b})):new Mt(h.ma),_.Fa(h.L),_}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function gh(){}i=gh.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function di(){}di.prototype.g=function(h,_){return new Gn(h,_)};function Gn(h,_){Ge.call(this),this.g=new ui(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!T(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!T(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Tr(this)}w(Gn,Ge),Gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){nc(this.g)},Gn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=Le(h),h=b);_.i.push(new un(_.Ya++,h)),_.I==3&&ir(_)},Gn.prototype.N=function(){this.g.l=null,delete this.j,nc(this.g),delete this.g,Gn.Z.N.call(this)};function ph(h){ke.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const b in _){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}w(ph,ke);function yh(){Qe.call(this),this.status=1}w(yh,Qe);function Tr(h){this.g=h}w(Tr,gh),Tr.prototype.ra=function(){_e(this.g,"a")},Tr.prototype.qa=function(h){_e(this.g,new ph(h))},Tr.prototype.pa=function(h){_e(this.g,new yh)},Tr.prototype.oa=function(){_e(this.g,"b")},di.prototype.createWebChannel=di.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,Ew=function(){return new di},ww=function(){return vt()},vw=Je,yp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ia.NO_ERROR=0,ia.TIMEOUT=8,ia.HTTP_ERROR=6,kd=ia,ql.COMPLETE="complete",bw=ql,De.EventType=Fe,Fe.OPEN="a",Fe.CLOSE="b",Fe.ERROR="c",Fe.MESSAGE="d",Ge.prototype.listen=Ge.prototype.J,Wc=De,Mt.prototype.listenOnce=Mt.prototype.K,Mt.prototype.getLastError=Mt.prototype.Ha,Mt.prototype.getLastErrorCode=Mt.prototype.ya,Mt.prototype.getStatus=Mt.prototype.ca,Mt.prototype.getResponseJson=Mt.prototype.La,Mt.prototype.getResponseText=Mt.prototype.la,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Fa,xw=Mt}).apply(typeof vd<"u"?vd:typeof self<"u"?self:typeof window<"u"?window:{});const sv="@firebase/firestore",rv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let On=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=new Qp("@firebase/firestore");function il(){return Ya.logLevel}function Ee(i,...e){if(Ya.logLevel<=mt.DEBUG){const t=e.map(Zp);Ya.debug(`Firestore (${kl}): ${i}`,...t)}}function $n(i,...e){if(Ya.logLevel<=mt.ERROR){const t=e.map(Zp);Ya.error(`Firestore (${kl}): ${i}`,...t)}}function Xa(i,...e){if(Ya.logLevel<=mt.WARN){const t=e.map(Zp);Ya.warn(`Firestore (${kl}): ${i}`,...t)}}function Zp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Tw(i,r,t)}function Tw(i,e,t){let r=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw $n(r),new Error(r)}function ze(i,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,i||Tw(e,o,r)}function We(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Wr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(On.UNAUTHENTICATED)))}shutdown(){}}class HI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class GI{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ze(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let c=new Ks;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ks,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ks)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string",31837,{l:r}),new Sw(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new On(e)}}class KI{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=On.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $I{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new KI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(On.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ze(this.o===void 0,3512);const r=c=>{c.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,Ee("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new iv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=YI(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<t&&(r+=e.charAt(o[c]%62))}return r}}function et(i,e){return i<e?-1:i>e?1:0}function _p(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const o=i.charAt(r),c=e.charAt(r);if(o!==c)return Zg(o)===Zg(c)?et(o,c):Zg(o)?1:-1}return et(i.length,e.length)}const XI=55296,WI=57343;function Zg(i){const e=i.charCodeAt(0);return e>=XI&&e<=WI}function yl(i,e,t){return i.length===e.length&&i.every(((r,o)=>t(r,e[o])))}function Aw(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="__name__";class fr{constructor(e,t,r){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&je(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return fr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const c=fr.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return et(e.length,t.length)}static compareSegments(e,t){const r=fr.isNumericId(e),o=fr.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?fr.extractNumericId(e).compare(fr.extractNumericId(t)):_p(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qi.fromString(e.substring(4,e.length-2))}}class bt extends fr{construct(e,t,r){return new bt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new bt(t)}static emptyPath(){return new bt([])}}const JI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends fr{construct(e,t,r){return new Xt(e,t,r)}static isValidIdentifier(e){return JI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===av}static keyField(){return new Xt([av])}static fromServerFormat(e){const t=[];let r="",o=0;const c=()=>{if(r.length===0)throw new Se(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new Se(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Se(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else g==="`"?(u=!u,o++):g!=="."||u?(r+=g,o++):(c(),o++)}if(c(),u)throw new Se(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(bt.fromString(e))}static fromName(e){return new Ie(bt.fromString(e).popFirst(5))}static empty(){return new Ie(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(i,e,t){if(!t)throw new Se(ne.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function ZI(i,e,t,r){if(e===!0&&r===!0)throw new Se(ne.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function ov(i){if(!Ie.isDocumentKey(i))throw new Se(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function lv(i){if(Ie.isDocumentKey(i))throw new Se(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Nw(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Ef(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":je(12329,{type:typeof i})}function qn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Se(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ef(i);throw new Se(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(i,e){const t={typeString:i};return e&&(t.value=e),t}function ku(i,e){if(!Nw(i))throw new Se(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const u=i[r];if(o&&typeof u!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){t=`Expected '${r}' field to equal '${c.value}'`;break}}if(t)throw new Se(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=-62135596800,uv=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*uv);return new Dt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<cv)throw new Se(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uv}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ku(e,Dt._jsonSchema))return new Dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dt._jsonSchemaVersion="firestore/timestamp/1.0",Dt._jsonSchema={type:yn("string",Dt._jsonSchemaVersion),seconds:yn("number"),nanoseconds:yn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Dt(0,0))}static max(){return new Be(new Dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=-1;class Xd{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function xp(i){return i.fields.find((e=>e.kind===2))}function Ma(i){return i.fields.filter((e=>e.kind!==2))}Xd.UNKNOWN_ID=-1;class Md{constructor(e,t){this.fieldPath=e,this.kind=t}}class fu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fu(0,ps.min())}}function eN(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Be.fromTimestamp(r===1e9?new Dt(t+1,0):new Dt(t,r));return new ps(o,Ie.empty(),e)}function Cw(i){return new ps(i.readTime,i.key,du)}class ps{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ps(Be.min(),Ie.empty(),du)}static max(){return new ps(Be.max(),Ie.empty(),du)}}function ty(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(i.documentKey,e.documentKey),t!==0?t:et(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(i){if(i.code!==ne.FAILED_PRECONDITION||i.message!==Rw)throw i;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):F.reject(t)}static resolve(e){return new F(((t,r)=>{t(e)}))}static reject(e){return new F(((t,r)=>{r(e)}))}static waitFor(e){return new F(((t,r)=>{let o=0,c=0,u=!1;e.forEach((g=>{++o,g.next((()=>{++c,u&&c===o&&t()}),(p=>r(p)))})),u=!0,c===o&&t()}))}static or(e){let t=F.resolve(!1);for(const r of e)t=t.next((o=>o?F.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,c)=>{r.push(t.call(this,o,c))})),this.waitFor(r)}static mapArray(e,t){return new F(((r,o)=>{const c=e.length,u=new Array(c);let g=0;for(let p=0;p<c;p++){const y=p;t(e[y]).next((v=>{u[y]=v,++g,g===c&&r(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new F(((r,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):r()};c()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="SimpleDb";class Tf{static open(e,t,r,o){try{return new Tf(t,e.transaction(o,r))}catch(c){throw new nu(t,c)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ks,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new nu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=ny(r.target.error);this.S.reject(new nu(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ee(ds,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new nN(t)}}class Yi{static delete(e){return Ee(ds,"Removing database:",e),Va(rw().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!fw())return!1;if(Yi.F())return!0;const e=wn(),t=Yi.M(e),r=0<t&&t<10,o=jw(e),c=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Yi.M(wn())===12.2&&$n("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Ee(ds,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=c=>{const u=c.target.result;t(u)},o.onblocked=()=>{r(new nu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=c=>{const u=c.target.error;u.name==="VersionError"?r(new Se(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new Se(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new nu(e,u))},o.onupgradeneeded=c=>{Ee(ds,'Database "'+this.name+'" requires upgrade from version:',c.oldVersion);const u=c.target.result;this.N.k(u,o.transaction,c.oldVersion,this.version).next((()=>{Ee(ds,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,o){const c=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const g=Tf.open(this.db,e,c?"readonly":"readwrite",r),p=o(g).next((y=>(g.C(),y))).catch((y=>(g.abort(y),F.reject(y)))).toPromise();return p.catch((()=>{})),await g.D,p}catch(g){const p=g,y=p.name!=="FirebaseError"&&u<3;if(Ee(ds,"Transaction failed with error:",p.message,"Retrying:",y),this.close(),!y)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function jw(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class tN{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Va(this.U.delete())}}class nu extends Se{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function sa(i){return i.name==="IndexedDbTransactionError"}class nN{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Ee(ds,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ee(ds,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Va(r)}add(e){return Ee(ds,"ADD",this.store.name,e,e),Va(this.store.add(e))}get(e){return Va(this.store.get(e)).next((t=>(t===void 0&&(t=null),Ee(ds,"GET",this.store.name,e,t),t)))}delete(e){return Ee(ds,"DELETE",this.store.name,e),Va(this.store.delete(e))}count(){return Ee(ds,"COUNT",this.store.name),Va(this.store.count())}J(e,t){const r=this.options(e,t),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const c=o.getAll(r.range);return new F(((u,g)=>{c.onerror=p=>{g(p.target.error)},c.onsuccess=p=>{u(p.target.result)}}))}{const c=this.cursor(r),u=[];return this.H(c,((g,p)=>{u.push(p)})).next((()=>u))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new F(((o,c)=>{r.onerror=u=>{c(u.target.error)},r.onsuccess=u=>{o(u.target.result)}}))}Z(e,t){Ee(ds,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,((c,u,g)=>g.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}te(e){const t=this.cursor({});return new F(((r,o)=>{t.onerror=c=>{const u=ny(c.target.error);o(u)},t.onsuccess=c=>{const u=c.target.result;u?e(u.primaryKey,u.value).next((g=>{g?u.continue():r()})):r()}}))}H(e,t){const r=[];return new F(((o,c)=>{e.onerror=u=>{c(u.target.error)},e.onsuccess=u=>{const g=u.target.result;if(!g)return void o();const p=new tN(g),y=t(g.primaryKey,g.value,p);if(y instanceof F){const v=y.catch((w=>(p.done(),F.reject(w))));r.push(v)}p.isDone?o():p.G===null?g.continue():g.continue(p.G)}})).next((()=>F.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Va(i){return new F(((e,t)=>{i.onsuccess=r=>{const o=r.target.result;e(o)},i.onerror=r=>{const o=ny(r.target.error);t(o)}}))}let hv=!1;function ny(i){const e=Yi.M(wn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hv||(hv=!0,setTimeout((()=>{throw r}),0)),r}}return i}const su="IndexBackfiller";class sN{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Ee(su,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Ee(su,`Documents written: ${t}`)}catch(t){sa(t)?Ee(su,"Ignoring IndexedDB error during index backfill: ",t):await oo(t)}await this.re(6e4)}))}}class rN{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let o=t,c=!0;return F.doWhile((()=>c===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return Ee(su,`Processing collection: ${u}`),this.oe(e,u,o).next((g=>{o-=g,r.add(u)}));c=!1})))).next((()=>t-o))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next((c=>{const u=c.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(o,c))).next((g=>(Ee(su,`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g)))).next((()=>u.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((o,c)=>{const u=Cw(c);ty(u,r)>0&&(r=u)})),new ps(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rs.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=-1;function Mu(i){return i==null}function mu(i){return i===0&&1/i==-1/0}function iN(i){return typeof i=="number"&&Number.isInteger(i)&&!mu(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="";function Fn(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=dv(e)),e=aN(i.get(t),e);return dv(e)}function aN(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":t+="";break;case Wd:t+="";break;default:t+=c}}return t}function dv(i){return i+Wd+""}function mr(i){const e=i.length;if(ze(e>=2,64408,{path:i}),e===2)return ze(i.charAt(0)===Wd&&i.charAt(1)==="",56145,{path:i}),bt.emptyPath();const t=e-2,r=[];let o="";for(let c=0;c<e;){const u=i.indexOf(Wd,c);switch((u<0||u>t)&&je(50515,{path:i}),i.charAt(u+1)){case"":const g=i.substring(c,u);let p;o.length===0?p=g:(o+=g,p=o,o=""),r.push(p);break;case"":o+=i.substring(c,u),o+="\0";break;case"":o+=i.substring(c,u+1);break;default:je(61167,{path:i})}c=u+2}return new bt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="remoteDocuments",Ou="owner",Wo="owner",gu="mutationQueues",oN="userId",Hs="mutations",fv="batchId",La="userMutationsIndex",mv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(i,e){return[i,Fn(e)]}function kw(i,e,t){return[i,Fn(e),t]}const lN={},_l="documentMutations",Jd="remoteDocumentsV14",cN=["prefixPath","collectionGroup","readTime","documentId"],Vd="documentKeyIndex",uN=["prefixPath","collectionGroup","documentId"],Mw="collectionGroupIndex",hN=["collectionGroup","readTime","prefixPath","documentId"],pu="remoteDocumentGlobal",bp="remoteDocumentGlobalKey",xl="targets",Ow="queryTargetsIndex",dN=["canonicalId","targetId"],bl="targetDocuments",fN=["targetId","path"],sy="documentTargetsIndex",mN=["path","targetId"],Zd="targetGlobalKey",Ha="targetGlobal",yu="collectionParents",gN=["collectionId","parent"],vl="clientMetadata",pN="clientId",Sf="bundles",yN="bundleId",Af="namedQueries",_N="name",ry="indexConfiguration",xN="indexId",vp="collectionGroupIndex",bN="collectionGroup",ru="indexState",vN=["indexId","uid"],Vw="sequenceNumberIndex",wN=["uid","sequenceNumber"],iu="indexEntries",EN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],zw="documentKeyIndex",TN=["indexId","uid","orderedDocumentKey"],If="documentOverlays",SN=["userId","collectionPath","documentId"],wp="collectionPathOverlayIndex",AN=["userId","collectionPath","largestBatchId"],Pw="collectionGroupOverlayIndex",IN=["userId","collectionGroup","largestBatchId"],iy="globals",NN="name",Uw=[gu,Hs,_l,Oa,xl,Ou,Ha,bl,vl,pu,yu,Sf,Af],CN=[...Uw,If],Lw=[gu,Hs,_l,Jd,xl,Ou,Ha,bl,vl,pu,yu,Sf,Af,If],Bw=Lw,ay=[...Bw,ry,ru,iu],RN=ay,qw=[...ay,iy],DN=qw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends Dw{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function En(i,e){const t=We(i);return Yi.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ra(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Fw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t){this.comparator=e,this.root=t||Vn.EMPTY}insert(e,t){return new Yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vn.BLACK,null,null))}remove(e){return new Yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wd(this.root,e,this.comparator,!1)}getReverseIterator(){return new wd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wd(this.root,e,this.comparator,!0)}}class wd{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vn{constructor(e,t,r,o,c){this.key=e,this.value=t,this.color=r??Vn.RED,this.left=o??Vn.EMPTY,this.right=c??Vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,c){return new Vn(e??this.key,t??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,r),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Vn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1;Vn.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,r,o,c){return this}insert(e,t,r){return new Vn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pv(this.data.getIterator())}getIteratorFrom(e){return new pv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new kt(this.comparator);return t.data=e,t}}class pv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Jo(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new ts([])}unionWith(e){let t=new kt(Xt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ts(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Hw("Invalid base64 string: "+c):c}})(e);return new _n(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new _n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const jN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(i){if(ze(!!i,39018),typeof i=="string"){let e=0;const t=jN.exec(i);if(ze(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$t(i.seconds),nanos:$t(i.nanos)}}function $t(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Yr(i){return typeof i=="string"?_n.fromBase64String(i):_n.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="server_timestamp",Kw="__type__",$w="__previous_value__",Qw="__local_write_time__";function oy(i){var t,r;return((r=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[Kw])==null?void 0:r.stringValue)===Gw}function Nf(i){const e=i.mapValue.fields[$w];return oy(e)?Nf(e):e}function _u(i){const e=Qr(i.mapValue.fields[Qw].timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,t,r,o,c,u,g,p,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=v}}const ef="(default)";class Wa{constructor(e,t){this.projectId=e,this.database=t||ef}static empty(){return new Wa("","")}get isDefaultDatabase(){return this.database===ef}isEqual(e){return e instanceof Wa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly="__type__",Yw="__max__",Fi={mapValue:{fields:{__type__:{stringValue:Yw}}}},cy="__vector__",wl="value",zd={nullValue:"NULL_VALUE"};function Ji(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?oy(i)?4:Xw(i)?9007199254740991:Cf(i)?10:11:je(28295,{value:i})}function xr(i,e){if(i===e)return!0;const t=Ji(i);if(t!==Ji(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return _u(i).isEqual(_u(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const u=Qr(o.timestampValue),g=Qr(c.timestampValue);return u.seconds===g.seconds&&u.nanos===g.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return Yr(o.bytesValue).isEqual(Yr(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return $t(o.geoPointValue.latitude)===$t(c.geoPointValue.latitude)&&$t(o.geoPointValue.longitude)===$t(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return $t(o.integerValue)===$t(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const u=$t(o.doubleValue),g=$t(c.doubleValue);return u===g?mu(u)===mu(g):isNaN(u)&&isNaN(g)}return!1})(i,e);case 9:return yl(i.arrayValue.values||[],e.arrayValue.values||[],xr);case 10:case 11:return(function(o,c){const u=o.mapValue.fields||{},g=c.mapValue.fields||{};if(gv(u)!==gv(g))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(g[p]===void 0||!xr(u[p],g[p])))return!1;return!0})(i,e);default:return je(52216,{left:i})}}function xu(i,e){return(i.values||[]).find((t=>xr(t,e)))!==void 0}function Zi(i,e){if(i===e)return 0;const t=Ji(i),r=Ji(e);if(t!==r)return et(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return et(i.booleanValue,e.booleanValue);case 2:return(function(c,u){const g=$t(c.integerValue||c.doubleValue),p=$t(u.integerValue||u.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(i,e);case 3:return yv(i.timestampValue,e.timestampValue);case 4:return yv(_u(i),_u(e));case 5:return _p(i.stringValue,e.stringValue);case 6:return(function(c,u){const g=Yr(c),p=Yr(u);return g.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(c,u){const g=c.split("/"),p=u.split("/");for(let y=0;y<g.length&&y<p.length;y++){const v=et(g[y],p[y]);if(v!==0)return v}return et(g.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,u){const g=et($t(c.latitude),$t(u.latitude));return g!==0?g:et($t(c.longitude),$t(u.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return _v(i.arrayValue,e.arrayValue);case 10:return(function(c,u){var A,j,U,q;const g=c.fields||{},p=u.fields||{},y=(A=g[wl])==null?void 0:A.arrayValue,v=(j=p[wl])==null?void 0:j.arrayValue,w=et(((U=y==null?void 0:y.values)==null?void 0:U.length)||0,((q=v==null?void 0:v.values)==null?void 0:q.length)||0);return w!==0?w:_v(y,v)})(i.mapValue,e.mapValue);case 11:return(function(c,u){if(c===Fi.mapValue&&u===Fi.mapValue)return 0;if(c===Fi.mapValue)return 1;if(u===Fi.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),y=u.fields||{},v=Object.keys(y);p.sort(),v.sort();for(let w=0;w<p.length&&w<v.length;++w){const A=_p(p[w],v[w]);if(A!==0)return A;const j=Zi(g[p[w]],y[v[w]]);if(j!==0)return j}return et(p.length,v.length)})(i.mapValue,e.mapValue);default:throw je(23264,{he:t})}}function yv(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return et(i,e);const t=Qr(i),r=Qr(e),o=et(t.seconds,r.seconds);return o!==0?o:et(t.nanos,r.nanos)}function _v(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const c=Zi(t[o],r[o]);if(c)return c}return et(t.length,r.length)}function El(i){return Tp(i)}function Tp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=Qr(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Yr(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return Ie.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",o=!0;for(const c of t.values||[])o?o=!1:r+=",",r+=Tp(c);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const u of r)c?c=!1:o+=",",o+=`${u}:${Tp(t.fields[u])}`;return o+"}"})(i.mapValue):je(61005,{value:i})}function Pd(i){switch(Ji(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nf(i);return e?16+Pd(e):16;case 5:return 2*i.stringValue.length;case 6:return Yr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+Pd(c)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return ra(r.fields,((c,u)=>{o+=c.length+Pd(u)})),o})(i.mapValue);default:throw je(13486,{value:i})}}function bu(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Sp(i){return!!i&&"integerValue"in i}function vu(i){return!!i&&"arrayValue"in i}function xv(i){return!!i&&"nullValue"in i}function bv(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ud(i){return!!i&&"mapValue"in i}function Cf(i){var t,r;return((r=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[ly])==null?void 0:r.stringValue)===cy}function au(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return ra(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=au(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=au(i.arrayValue.values[t]);return e}return{...i}}function Xw(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Yw}const Ww={mapValue:{fields:{[ly]:{stringValue:cy},[wl]:{arrayValue:{}}}}};function MN(i){return"nullValue"in i?zd:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?bu(Wa.empty(),Ie.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Cf(i)?Ww:{mapValue:{}}:je(35942,{value:i})}function ON(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?bu(Wa.empty(),Ie.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?Ww:"mapValue"in i?Cf(i)?{mapValue:{}}:Fi:je(61959,{value:i})}function vv(i,e){const t=Zi(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function wv(i,e){const t=Zi(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ud(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(t)}setAll(e){let t=Xt.emptyPath(),r={},o=[];e.forEach(((u,g)=>{if(!t.isImmediateParentOf(g)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=g.popLast()}u?r[g.lastSegment()]=au(u):o.push(g.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,r,o)}delete(e){const t=this.field(e.popLast());Ud(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Ud(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ra(t,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new zn(au(this.value))}}function Jw(i){const e=[];return ra(i.fields,((t,r)=>{const o=new Xt([t]);if(Ud(r)){const c=Jw(r.mapValue).fields;if(c.length===0)e.push(o);else for(const u of c)e.push(o.child(u))}else e.push(o)})),new ts(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,t,r,o,c,u,g){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=c,this.data=u,this.documentState=g}static newInvalidDocument(e){return new Qt(e,0,Be.min(),Be.min(),Be.min(),zn.empty(),0)}static newFoundDocument(e,t,r,o){return new Qt(e,1,t,Be.min(),r,o,0)}static newNoDocument(e,t){return new Qt(e,2,t,Be.min(),Be.min(),zn.empty(),0)}static newUnknownDocument(e,t){return new Qt(e,3,t,Be.min(),Be.min(),zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t){this.position=e,this.inclusive=t}}function Ev(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],u=i.position[o];if(c.field.isKeyField()?r=Ie.comparator(Ie.fromName(u.referenceValue),t.key):r=Zi(u,t.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tv(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!xr(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t="asc"){this.field=e,this.dir=t}}function VN(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{}class gt extends Zw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new zN(e,t,r):t==="array-contains"?new LN(e,r):t==="in"?new iE(e,r):t==="not-in"?new BN(e,r):t==="array-contains-any"?new qN(e,r):new gt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new PN(e,r):new UN(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Zi(t,this.value)):t!==null&&Ji(this.value)===Ji(t)&&this.matchesComparison(Zi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jt extends Zw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new jt(e,t)}matches(e){return Sl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Sl(i){return i.op==="and"}function Ap(i){return i.op==="or"}function uy(i){return eE(i)&&Sl(i)}function eE(i){for(const e of i.filters)if(e instanceof jt)return!1;return!0}function Ip(i){if(i instanceof gt)return i.field.canonicalString()+i.op.toString()+El(i.value);if(uy(i))return i.filters.map((e=>Ip(e))).join(",");{const e=i.filters.map((t=>Ip(t))).join(",");return`${i.op}(${e})`}}function tE(i,e){return i instanceof gt?(function(r,o){return o instanceof gt&&r.op===o.op&&r.field.isEqual(o.field)&&xr(r.value,o.value)})(i,e):i instanceof jt?(function(r,o){return o instanceof jt&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,u,g)=>c&&tE(u,o.filters[g])),!0):!1})(i,e):void je(19439)}function nE(i,e){const t=i.filters.concat(e);return jt.create(t,i.op)}function sE(i){return i instanceof gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${El(t.value)}`})(i):i instanceof jt?(function(t){return t.op.toString()+" {"+t.getFilters().map(sE).join(" ,")+"}"})(i):"Filter"}class zN extends gt{constructor(e,t,r){super(e,t,r),this.key=Ie.fromName(r.referenceValue)}matches(e){const t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class PN extends gt{constructor(e,t){super(e,"in",t),this.keys=rE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class UN extends gt{constructor(e,t){super(e,"not-in",t),this.keys=rE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function rE(i,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>Ie.fromName(r.referenceValue)))}class LN extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vu(t)&&xu(t.arrayValue,this.value)}}class iE extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&xu(this.value.arrayValue,t)}}class BN extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xu(this.value.arrayValue,t)}}class qN extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>xu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,t=null,r=[],o=[],c=null,u=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=u,this.endAt=g,this.Te=null}}function Np(i,e=null,t=[],r=[],o=null,c=null,u=null){return new FN(i,e,t,r,o,c,u)}function Ja(i){const e=We(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Ip(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Mu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>El(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>El(r))).join(",")),e.Te=t}return e.Te}function Vu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!VN(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!tE(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Tv(i.startAt,e.startAt)&&Tv(i.endAt,e.endAt)}function nf(i){return Ie.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function sf(i,e){return i.filters.filter((t=>t instanceof gt&&t.field.isEqual(e)))}function Sv(i,e,t){let r=zd,o=!0;for(const c of sf(i,e)){let u=zd,g=!0;switch(c.op){case"<":case"<=":u=MN(c.value);break;case"==":case"in":case">=":u=c.value;break;case">":u=c.value,g=!1;break;case"!=":case"not-in":u=zd}vv({value:r,inclusive:o},{value:u,inclusive:g})<0&&(r=u,o=g)}if(t!==null){for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const u=t.position[c];vv({value:r,inclusive:o},{value:u,inclusive:t.inclusive})<0&&(r=u,o=t.inclusive);break}}return{value:r,inclusive:o}}function Av(i,e,t){let r=Fi,o=!0;for(const c of sf(i,e)){let u=Fi,g=!0;switch(c.op){case">=":case">":u=ON(c.value),g=!1;break;case"==":case"in":case"<=":u=c.value;break;case"<":u=c.value,g=!1;break;case"!=":case"not-in":u=Fi}wv({value:r,inclusive:o},{value:u,inclusive:g})>0&&(r=u,o=g)}if(t!==null){for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const u=t.position[c];wv({value:r,inclusive:o},{value:u,inclusive:t.inclusive})>0&&(r=u,o=t.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,t=null,r=[],o=[],c=null,u="F",g=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=u,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HN(i,e,t,r,o,c,u,g){return new zu(i,e,t,r,o,c,u,g)}function Pu(i){return new zu(i)}function Iv(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function aE(i){return i.collectionGroup!==null}function ou(i){const e=We(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let g=new kt(Xt.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new tf(c,r))})),t.has(Xt.keyField().canonicalString())||e.Ie.push(new tf(Xt.keyField(),r))}return e.Ie}function Ds(i){const e=We(i);return e.Ee||(e.Ee=GN(e,ou(i))),e.Ee}function GN(i,e){if(i.limitType==="F")return Np(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new tf(o.field,c)}));const t=i.endAt?new Tl(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Tl(i.startAt.position,i.startAt.inclusive):null;return Np(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function Cp(i,e){const t=i.filters.concat([e]);return new zu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Rp(i,e,t){return new zu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Rf(i,e){return Vu(Ds(i),Ds(e))&&i.limitType===e.limitType}function oE(i){return`${Ja(Ds(i))}|lt:${i.limitType}`}function al(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>sE(o))).join(", ")}]`),Mu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>El(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>El(o))).join(",")),`Target(${r})`})(Ds(i))}; limitType=${i.limitType})`}function Uu(i,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Ie.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(i,e)&&(function(r,o){for(const c of ou(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(u,g,p){const y=Ev(u,g,p);return u.inclusive?y<=0:y<0})(r.startAt,ou(r),o)||r.endAt&&!(function(u,g,p){const y=Ev(u,g,p);return u.inclusive?y>=0:y>0})(r.endAt,ou(r),o))})(i,e)}function KN(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function lE(i){return(e,t)=>{let r=!1;for(const o of ou(i)){const c=$N(o,e,t);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function $N(i,e,t){const r=i.field.isKeyField()?Ie.comparator(e.key,t.key):(function(c,u,g){const p=u.data.field(c),y=g.data.field(c);return p!==null&&y!==null?Zi(p,y):je(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return je(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ra(this.inner,((t,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return Fw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=new Yt(Ie.comparator);function gs(){return QN}const cE=new Yt(Ie.comparator);function Jc(...i){let e=cE;for(const t of i)e=e.insert(t.key,t);return e}function uE(i){let e=cE;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function gr(){return lu()}function hE(){return lu()}function lu(){return new Jr((i=>i.toString()),((i,e)=>i.isEqual(e)))}const YN=new Yt(Ie.comparator),XN=new kt(Ie.comparator);function ct(...i){let e=XN;for(const t of i)e=e.add(t);return e}const WN=new kt(et);function JN(){return WN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mu(e)?"-0":e}}function dE(i){return{integerValue:""+i}}function ZN(i,e){return iN(e)?dE(e):hy(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(){this._=void 0}}function eC(i,e,t){return i instanceof wu?(function(o,c){const u={fields:{[Kw]:{stringValue:Gw},[Qw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&oy(c)&&(c=Nf(c)),c&&(u.fields[$w]=c),{mapValue:u}})(t,e):i instanceof Al?mE(i,e):i instanceof Il?gE(i,e):(function(o,c){const u=fE(o,c),g=Nv(u)+Nv(o.Ae);return Sp(u)&&Sp(o.Ae)?dE(g):hy(o.serializer,g)})(i,e)}function tC(i,e,t){return i instanceof Al?mE(i,e):i instanceof Il?gE(i,e):t}function fE(i,e){return i instanceof Eu?(function(r){return Sp(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class wu extends Df{}class Al extends Df{constructor(e){super(),this.elements=e}}function mE(i,e){const t=pE(e);for(const r of i.elements)t.some((o=>xr(o,r)))||t.push(r);return{arrayValue:{values:t}}}class Il extends Df{constructor(e){super(),this.elements=e}}function gE(i,e){let t=pE(e);for(const r of i.elements)t=t.filter((o=>!xr(o,r)));return{arrayValue:{values:t}}}class Eu extends Df{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Nv(i){return $t(i.integerValue||i.doubleValue)}function pE(i){return vu(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t){this.field=e,this.transform=t}}function sC(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof Al&&o instanceof Al||r instanceof Il&&o instanceof Il?yl(r.elements,o.elements,xr):r instanceof Eu&&o instanceof Eu?xr(r.Ae,o.Ae):r instanceof wu&&o instanceof wu})(i.transform,e.transform)}class rC{constructor(e,t){this.version=e,this.transformResults=t}}class Wt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ld(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class jf{}function yE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Ol(i.key,Wt.none()):new Ml(i.key,i.data,Wt.none());{const t=i.data,r=zn.empty();let o=new kt(Xt.comparator);for(let c of e.fields)if(!o.has(c)){let u=t.field(c);u===null&&c.length>1&&(c=c.popLast(),u=t.field(c)),u===null?r.delete(c):r.set(c,u),o=o.add(c)}return new Zr(i.key,r,new ts(o.toArray()),Wt.none())}}function iC(i,e,t){i instanceof Ml?(function(o,c,u){const g=o.value.clone(),p=Rv(o.fieldTransforms,c,u.transformResults);g.setAll(p),c.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(i,e,t):i instanceof Zr?(function(o,c,u){if(!Ld(o.precondition,c))return void c.convertToUnknownDocument(u.version);const g=Rv(o.fieldTransforms,c,u.transformResults),p=c.data;p.setAll(_E(o)),p.setAll(g),c.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(i,e,t):(function(o,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function cu(i,e,t,r){return i instanceof Ml?(function(c,u,g,p){if(!Ld(c.precondition,u))return g;const y=c.value.clone(),v=Dv(c.fieldTransforms,p,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(i,e,t,r):i instanceof Zr?(function(c,u,g,p){if(!Ld(c.precondition,u))return g;const y=Dv(c.fieldTransforms,p,u),v=u.data;return v.setAll(_E(c)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(i,e,t,r):(function(c,u,g){return Ld(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):g})(i,e,t)}function aC(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=fE(r.transform,o||null);c!=null&&(t===null&&(t=zn.empty()),t.set(r.field,c))}return t||null}function Cv(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&yl(r,o,((c,u)=>sC(c,u)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ml extends jf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Zr extends jf{constructor(e,t,r,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function _E(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function Rv(i,e,t){const r=new Map;ze(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let o=0;o<t.length;o++){const c=i[o],u=c.transform,g=e.data.field(c.field);r.set(c.field,tC(u,g,t[o]))}return r}function Dv(i,e,t){const r=new Map;for(const o of i){const c=o.transform,u=t.data.field(o.field);r.set(o.field,eC(c,u,e))}return r}class Ol extends jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dy extends jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&iC(c,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=cu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=cu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=hE();return this.mutations.forEach((o=>{const c=e.get(o.key),u=c.overlayedDocument;let g=this.applyToLocalView(u,c.mutatedFields);g=t.has(o.key)?null:g;const p=yE(u,g);p!==null&&r.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(Be.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ct())}isEqual(e){return this.batchId===e.batchId&&yl(this.mutations,e.mutations,((t,r)=>Cv(t,r)))&&yl(this.baseMutations,e.baseMutations,((t,r)=>Cv(t,r)))}}class my{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return YN})();const c=e.mutations;for(let u=0;u<c.length;u++)o=o.insert(c[u].key,r[u].version);return new my(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pn,_t;function xE(i){switch(i){case ne.OK:return je(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return je(15467,{code:i})}}function bE(i){if(i===void 0)return $n("GRPC error has no .code"),ne.UNKNOWN;switch(i){case pn.OK:return ne.OK;case pn.CANCELLED:return ne.CANCELLED;case pn.UNKNOWN:return ne.UNKNOWN;case pn.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case pn.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case pn.INTERNAL:return ne.INTERNAL;case pn.UNAVAILABLE:return ne.UNAVAILABLE;case pn.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case pn.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case pn.NOT_FOUND:return ne.NOT_FOUND;case pn.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case pn.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case pn.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case pn.ABORTED:return ne.ABORTED;case pn.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case pn.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case pn.DATA_LOSS:return ne.DATA_LOSS;default:return je(39323,{code:i})}}(_t=pn||(pn={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new Qi([4294967295,4294967295],0);function jv(i){const e=lC().encode(i),t=new _w;return t.update(e),new Uint8Array(t.digest())}function kv(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Qi([t,r],0),new Qi([o,c],0)]}class py{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Zc(`Invalid padding: ${t}`);if(r<0)throw new Zc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Zc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Qi.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(Qi.fromNumber(r)));return o.compare(cC)===1&&(o=new Qi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=jv(e),[r,o]=kv(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,o,c);if(!this.we(u))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new py(c,o,t);return r.forEach((g=>u.insert(g))),u}insert(e){if(this.ge===0)return;const t=jv(e),[r,o]=kv(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(r,o,c);this.Se(u)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t,r,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Lu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new kf(Be.min(),o,new Yt(et),gs(),ct())}}class Lu{constructor(e,t,r,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Lu(r,t,ct(),ct(),ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class vE{constructor(e,t){this.targetId=e,this.Ce=t}}class wE{constructor(e,t,r=_n.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Mv{constructor(){this.ve=0,this.Fe=Ov(),this.Me=_n.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ct(),t=ct(),r=ct();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:je(38017,{changeType:c})}})),new Lu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Ov()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uC{constructor(e){this.Ge=e,this.ze=new Map,this.je=gs(),this.Je=Ed(),this.He=Ed(),this.Ye=new Yt(et)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:je(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(nf(c))if(r===0){const u=new Ie(c.path);this.et(t,u,Qt.newNoDocument(u,Be.min()))}else ze(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const g=this.ut(e),p=g?this.ct(g,e,u):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=t;let u,g;try{u=Yr(r).toUint8Array()}catch(p){if(p instanceof Hw)return Xa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new py(u,o,c)}catch(p){return Xa(p instanceof Zc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((c=>{const u=this.Ge.ht(),g=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,u)=>{const g=this.ot(u);if(g){if(c.current&&nf(g.target)){const p=new Ie(g.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,Qt.newNoDocument(p,e))}c.Be&&(t.set(u,c.ke()),c.qe())}}));let r=ct();this.He.forEach(((c,u)=>{let g=!0;u.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(r=r.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const o=new kf(e,t,this.Ye,this.je,r);return this.je=gs(),this.Je=Ed(),this.He=Ed(),this.Ye=new Yt(et),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Mv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new kt(et),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new kt(et),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Mv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ed(){return new Yt(Ie.comparator)}function Ov(){return new Yt(Ie.comparator)}const hC={asc:"ASCENDING",desc:"DESCENDING"},dC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fC={and:"AND",or:"OR"};class mC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dp(i,e){return i.useProto3Json||Mu(e)?e:{value:e}}function Nl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function gC(i,e){return Nl(i,e.toTimestamp())}function Cn(i){return ze(!!i,49232),Be.fromTimestamp((function(t){const r=Qr(t);return new Dt(r.seconds,r.nanos)})(i))}function yy(i,e){return jp(i,e).canonicalString()}function jp(i,e){const t=(function(o){return new bt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function TE(i){const e=bt.fromString(i);return ze(kE(e),10190,{key:e.toString()}),e}function Tu(i,e){return yy(i.databaseId,e.path)}function Gr(i,e){const t=TE(e);if(t.get(1)!==i.databaseId.projectId)throw new Se(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Se(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Ie(IE(t))}function SE(i,e){return yy(i.databaseId,e)}function AE(i){const e=TE(i);return e.length===4?bt.emptyPath():IE(e)}function kp(i){return new bt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function IE(i){return ze(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Vv(i,e,t){return{name:Tu(i,e),fields:t.value.mapValue.fields}}function pC(i,e,t){const r=Gr(i,e.name),o=Cn(e.updateTime),c=e.createTime?Cn(e.createTime):Be.min(),u=new zn({mapValue:{fields:e.fields}}),g=Qt.newFoundDocument(r,o,c,u);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function yC(i,e){return"found"in e?(function(r,o){ze(!!o.found,43571),o.found.name,o.found.updateTime;const c=Gr(r,o.found.name),u=Cn(o.found.updateTime),g=o.found.createTime?Cn(o.found.createTime):Be.min(),p=new zn({mapValue:{fields:o.found.fields}});return Qt.newFoundDocument(c,u,g,p)})(i,e):"missing"in e?(function(r,o){ze(!!o.missing,3894),ze(!!o.readTime,22933);const c=Gr(r,o.missing),u=Cn(o.readTime);return Qt.newNoDocument(c,u)})(i,e):je(7234,{result:e})}function _C(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:je(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,v){return y.useProto3Json?(ze(v===void 0||typeof v=="string",58123),_n.fromBase64String(v||"")):(ze(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),_n.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),u=e.targetChange.cause,g=u&&(function(y){const v=y.code===void 0?ne.UNKNOWN:bE(y.code);return new Se(v,y.message||"")})(u);t=new wE(r,o,c,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Gr(i,r.document.name),c=Cn(r.document.updateTime),u=r.document.createTime?Cn(r.document.createTime):Be.min(),g=new zn({mapValue:{fields:r.document.fields}}),p=Qt.newFoundDocument(o,c,u,g),y=r.targetIds||[],v=r.removedTargetIds||[];t=new Bd(y,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Gr(i,r.document),c=r.readTime?Cn(r.readTime):Be.min(),u=Qt.newNoDocument(o,c),g=r.removedTargetIds||[];t=new Bd([],g,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Gr(i,r.document),c=r.removedTargetIds||[];t=new Bd([],c,o,null)}else{if(!("filter"in e))return je(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,u=new oC(o,c),g=r.targetId;t=new vE(g,u)}}return t}function Su(i,e){let t;if(e instanceof Ml)t={update:Vv(i,e.key,e.value)};else if(e instanceof Ol)t={delete:Tu(i,e.key)};else if(e instanceof Zr)t={update:Vv(i,e.key,e.data),updateMask:TC(e.fieldMask)};else{if(!(e instanceof dy))return je(16599,{Vt:e.type});t={verify:Tu(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(c,u){const g=u.transform;if(g instanceof wu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Al)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Il)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Eu)return{fieldPath:u.field.canonicalString(),increment:g.Ae};throw je(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:gC(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:je(27497)})(i,e.precondition)),t}function Mp(i,e){const t=e.currentDocument?(function(c){return c.updateTime!==void 0?Wt.updateTime(Cn(c.updateTime)):c.exists!==void 0?Wt.exists(c.exists):Wt.none()})(e.currentDocument):Wt.none(),r=e.updateTransforms?e.updateTransforms.map((o=>(function(u,g){let p=null;if("setToServerValue"in g)ze(g.setToServerValue==="REQUEST_TIME",16630,{proto:g}),p=new wu;else if("appendMissingElements"in g){const v=g.appendMissingElements.values||[];p=new Al(v)}else if("removeAllFromArray"in g){const v=g.removeAllFromArray.values||[];p=new Il(v)}else"increment"in g?p=new Eu(u,g.increment):je(16584,{proto:g});const y=Xt.fromServerFormat(g.fieldPath);return new nC(y,p)})(i,o))):[];if(e.update){e.update.name;const o=Gr(i,e.update.name),c=new zn({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(p){const y=p.fieldPaths||[];return new ts(y.map((v=>Xt.fromServerFormat(v))))})(e.updateMask);return new Zr(o,c,u,t,r)}return new Ml(o,c,t,r)}if(e.delete){const o=Gr(i,e.delete);return new Ol(o,t)}if(e.verify){const o=Gr(i,e.verify);return new dy(o,t)}return je(1463,{proto:e})}function xC(i,e){return i&&i.length>0?(ze(e!==void 0,14353),i.map((t=>(function(o,c){let u=o.updateTime?Cn(o.updateTime):Cn(c);return u.isEqual(Be.min())&&(u=Cn(c)),new rC(u,o.transformResults||[])})(t,e)))):[]}function NE(i,e){return{documents:[SE(i,e.path)]}}function CE(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=SE(i,o);const c=(function(y){if(y.length!==0)return jE(jt.create(y,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const u=(function(y){if(y.length!==0)return y.map((v=>(function(A){return{field:ol(A.field),direction:vC(A.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const g=Dp(i,e.limit);return g!==null&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function RE(i){let e=AE(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){ze(r===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let c=[];t.where&&(c=(function(w){const A=DE(w);return A instanceof jt&&uy(A)?A.getFilters():[A]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((A=>(function(U){return new tf(ll(U.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(A)))})(t.orderBy));let g=null;t.limit&&(g=(function(w){let A;return A=typeof w=="object"?w.value:w,Mu(A)?null:A})(t.limit));let p=null;t.startAt&&(p=(function(w){const A=!!w.before,j=w.values||[];return new Tl(j,A)})(t.startAt));let y=null;return t.endAt&&(y=(function(w){const A=!w.before,j=w.values||[];return new Tl(j,A)})(t.endAt)),HN(e,o,u,c,g,"F",p,y)}function bC(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function DE(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ll(t.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=ll(t.unaryFilter.field);return gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=ll(t.unaryFilter.field);return gt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ll(t.unaryFilter.field);return gt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}})(i):i.fieldFilter!==void 0?(function(t){return gt.create(ll(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return jt.create(t.compositeFilter.filters.map((r=>DE(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return je(1026)}})(t.compositeFilter.op))})(i):je(30097,{filter:i})}function vC(i){return hC[i]}function wC(i){return dC[i]}function EC(i){return fC[i]}function ol(i){return{fieldPath:i.canonicalString()}}function ll(i){return Xt.fromServerFormat(i.fieldPath)}function jE(i){return i instanceof gt?(function(t){if(t.op==="=="){if(bv(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NAN"}};if(xv(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(bv(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NOT_NAN"}};if(xv(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ol(t.field),op:wC(t.op),value:t.value}}})(i):i instanceof jt?(function(t){const r=t.getFilters().map((o=>jE(o)));return r.length===1?r[0]:{compositeFilter:{op:EC(t.op),filters:r}}})(i):je(54877,{filter:i})}function TC(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function kE(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,t,r,o,c=Be.min(),u=Be.min(),g=_n.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.yt=e}}function SC(i,e){let t;if(e.document)t=pC(i.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ie.fromSegments(e.noDocument.path),o=eo(e.noDocument.readTime);t=Qt.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return je(56709);{const r=Ie.fromSegments(e.unknownDocument.path),o=eo(e.unknownDocument.version);t=Qt.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime((function(o){const c=new Dt(o[0],o[1]);return Be.fromTimestamp(c)})(e.readTime)),t}function zv(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(c,u){return{name:Tu(c,u.key),fields:u.data.value.mapValue.fields,updateTime:Nl(c,u.version.toTimestamp()),createTime:Nl(c,u.createTime.toTimestamp())}})(i.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Za(e.version)};else{if(!e.isUnknownDocument())return je(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Za(e.version)}}return r}function rf(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Za(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function eo(i){const e=new Dt(i.seconds,i.nanoseconds);return Be.fromTimestamp(e)}function za(i,e){const t=(e.baseMutations||[]).map((c=>Mp(i.yt,c)));for(let c=0;c<e.mutations.length-1;++c){const u=e.mutations[c];if(c+1<e.mutations.length&&e.mutations[c+1].transform!==void 0){const g=e.mutations[c+1];u.updateTransforms=g.transform.fieldTransforms,e.mutations.splice(c+1,1),++c}}const r=e.mutations.map((c=>Mp(i.yt,c))),o=Dt.fromMillis(e.localWriteTimeMs);return new fy(e.batchId,o,t,r)}function eu(i){const e=eo(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?eo(i.lastLimboFreeSnapshotVersion):Be.min();let r;return r=(function(c){return c.documents!==void 0})(i.query)?(function(c){const u=c.documents.length;return ze(u===1,1966,{count:u}),Ds(Pu(AE(c.documents[0])))})(i.query):(function(c){return Ds(RE(c))})(i.query),new qr(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,_n.fromBase64String(i.resumeToken))}function OE(i,e){const t=Za(e.snapshotVersion),r=Za(e.lastLimboFreeSnapshotVersion);let o;o=nf(e.target)?NE(i.yt,e.target):CE(i.yt,e.target).ft;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ja(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function VE(i){const e=RE({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Rp(e,e.limit,"L"):e}function ep(i,e){return new gy(e.largestBatchId,Mp(i.yt,e.overlayMutation))}function Pv(i,e){const t=e.path.lastSegment();return[i,Fn(e.path.popLast()),t]}function Uv(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:Za(r.readTime),documentKey:Fn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{getBundleMetadata(e,t){return Lv(e).get(t).next((r=>{if(r)return(function(c){return{id:c.bundleId,createTime:eo(c.createTime),version:c.version}})(r)}))}saveBundleMetadata(e,t){return Lv(e).put((function(o){return{bundleId:o.id,createTime:Za(Cn(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return Bv(e).get(t).next((r=>{if(r)return(function(c){return{name:c.name,query:VE(c.bundledQuery),readTime:eo(c.readTime)}})(r)}))}saveNamedQuery(e,t){return Bv(e).put((function(o){return{name:o.name,readTime:Za(Cn(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function Lv(i){return En(i,Sf)}function Bv(i){return En(i,Af)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Mf(e,r)}getOverlay(e,t){return Fc(e).get(Pv(this.userId,t)).next((r=>r?ep(this.serializer,r):null))}getOverlays(e,t){const r=gr();return F.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,t,r){const o=[];return r.forEach(((c,u)=>{const g=new gy(t,u);o.push(this.St(e,g))})),F.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach((u=>o.add(Fn(u.getCollectionPath()))));const c=[];return o.forEach((u=>{const g=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);c.push(Fc(e).Z(wp,g))})),F.waitFor(c)}getOverlaysForCollection(e,t,r){const o=gr(),c=Fn(t),u=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Fc(e).J(wp,u).next((g=>{for(const p of g){const y=ep(this.serializer,p);o.set(y.getKey(),y)}return o}))}getOverlaysForCollectionGroup(e,t,r,o){const c=gr();let u;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Fc(e).ee({index:Pw,range:g},((p,y,v)=>{const w=ep(this.serializer,y);c.size()<o||w.largestBatchId===u?(c.set(w.getKey(),w),u=w.largestBatchId):v.done()})).next((()=>c))}St(e,t){return Fc(e).put((function(o,c,u){const[g,p,y]=Pv(c,u.mutation.key);return{userId:c,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Su(o.yt,u.mutation)}})(this.serializer,this.userId,t))}}function Fc(i){return En(i,If)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{bt(e){return En(e,iy)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?_n.fromUint8Array(r):_n.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt($t(e.integerValue));else if("doubleValue"in e){const r=$t(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),mu(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Qr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Yr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?Xw(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Cf(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):je(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const o of Object.keys(r))this.Ot(o,t),this.Ct(r[o],t)}kt(e,t){var u,g;const r=e.fields||{};this.Ft(t,53);const o=wl,c=((g=(u=r[o].arrayValue)==null?void 0:u.values)==null?void 0:g.length)||0;this.Ft(t,15),t.Mt($t(c)),this.Ot(o,t),this.Ct(r[o],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const o of r)this.Ct(o,t)}Lt(e,t){this.Ft(t,37),Ie.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Pa.Kt=new Pa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=255;function NC(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function qv(i){const e=64-(function(r){let o=0;for(let c=0;c<8;++c){const u=NC(255&r[c]);if(o+=u,u!==8)break}return o})(i);return Math.ceil(e/8)}class CC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=t.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(e){const t=this.en(e),r=qv(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}nn(e){const t=this.en(e),r=qv(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}rn(){this.sn(Zo),this.sn(255)}_n(){this.an(Zo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(c){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,c,!1),new Uint8Array(u.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Zo?(this.sn(Zo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Zo?(this.an(Zo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class RC{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class DC{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Hc{constructor(){this.cn=new CC,this.ln=new RC(this.cn),this.hn=new DC(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,t,r,o){this.Tn=e,this.In=t,this.En=r,this.dn=o}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Ua(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:qd(this.En),directionalValue:qd(this.dn),orderedDocumentKey:qd(t),documentKey:r.path.toArray()}}Vn(e,t,r){const o=this.Rn(e,t,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function Oi(i,e){let t=i.Tn-e.Tn;return t!==0?t:(t=Fv(i.En,e.En),t!==0?t:(t=Fv(i.dn,e.dn),t!==0?t:Ie.comparator(i.In,e.In)))}function Fv(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function qd(i){return dw()?(function(t){let r="";for(let o=0;o<t.length;o++)r+=String.fromCharCode(t[o]);return r})(i):i}function Hv(i){return typeof i!="string"?i:(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(i)}class Gv{constructor(e){this.mn=new kt(((t,r)=>Xt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ze(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=xp(e);if(t!==void 0&&!this.wn(t))return!1;const r=Ma(e);let o=new Set,c=0,u=0;for(;c<r.length&&this.wn(r[c]);++c)o=o.add(r[c].fieldPath.canonicalString());if(c===r.length)return!0;if(this.mn.size>0){const g=this.mn.getIterator().getNext();if(!o.has(g.field.canonicalString())){const p=r[c];if(!this.Sn(g,p)||!this.bn(this.fn[u++],p))return!1}++c}for(;c<r.length;++c){const g=r[c];if(u>=this.fn.length||!this.bn(this.fn[u++],g))return!1}return!0}Dn(){if(this.pn)return null;let e=new kt(Xt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Md(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Md(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Md(r.field,r.dir==="asc"?0:1)));return new Xd(Xd.UNKNOWN_ID,this.collectionId,t,fu.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(i){var t,r;if(ze(i instanceof gt||i instanceof jt,20012),i instanceof gt){if(i instanceof iE){const o=((r=(t=i.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map((c=>gt.create(i.field,"==",c))))||[];return jt.create(o,"or")}return i}const e=i.filters.map((o=>zE(o)));return jt.create(e,i.op)}function jC(i){if(i.getFilters().length===0)return[];const e=zp(zE(i));return ze(PE(e),7391),Op(e)||Vp(e)?[e]:e.getFilters()}function Op(i){return i instanceof gt}function Vp(i){return i instanceof jt&&uy(i)}function PE(i){return Op(i)||Vp(i)||(function(t){if(t instanceof jt&&Ap(t)){for(const r of t.getFilters())if(!Op(r)&&!Vp(r))return!1;return!0}return!1})(i)}function zp(i){if(ze(i instanceof gt||i instanceof jt,34018),i instanceof gt)return i;if(i.filters.length===1)return zp(i.filters[0]);const e=i.filters.map((r=>zp(r)));let t=jt.create(e,i.op);return t=af(t),PE(t)?t:(ze(t instanceof jt,64498),ze(Sl(t),40251),ze(t.filters.length>1,57927),t.filters.reduce(((r,o)=>_y(r,o))))}function _y(i,e){let t;return ze(i instanceof gt||i instanceof jt,38388),ze(e instanceof gt||e instanceof jt,25473),t=i instanceof gt?e instanceof gt?(function(o,c){return jt.create([o,c],"and")})(i,e):Kv(i,e):e instanceof gt?Kv(e,i):(function(o,c){if(ze(o.filters.length>0&&c.filters.length>0,48005),Sl(o)&&Sl(c))return nE(o,c.getFilters());const u=Ap(o)?o:c,g=Ap(o)?c:o,p=u.filters.map((y=>_y(y,g)));return jt.create(p,"or")})(i,e),af(t)}function Kv(i,e){if(Sl(e))return nE(e,i.getFilters());{const t=e.filters.map((r=>_y(i,r)));return jt.create(t,"or")}}function af(i){if(ze(i instanceof gt||i instanceof jt,11850),i instanceof gt)return i;const e=i.getFilters();if(e.length===1)return af(e[0]);if(eE(i))return i;const t=e.map((o=>af(o))),r=[];return t.forEach((o=>{o instanceof gt?r.push(o):o instanceof jt&&(o.op===i.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:jt.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.Cn=new xy}addToCollectionParentIndex(e,t){return this.Cn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(ps.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class xy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new kt(bt.comparator),c=!o.has(r);return this.index[t]=o.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new kt(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="IndexedDbIndexManager",Td=new Uint8Array(0);class MC{constructor(e,t){this.databaseId=t,this.vn=new xy,this.Fn=new Jr((r=>Ja(r)),((r,o)=>Vu(r,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const c={collectionId:r,parent:Fn(o)};return Qv(e).put(c)}return F.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Aw(t),""],!1,!0);return Qv(e).J(o).next((c=>{for(const u of c){if(u.collectionId!==t)break;r.push(mr(u.parent))}return r}))}addFieldIndex(e,t){const r=Gc(e),o=(function(g){return{indexId:g.indexId,collectionGroup:g.collectionGroup,fields:g.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete o.indexId;const c=r.add(o);if(t.indexState){const u=tl(e);return c.next((g=>{u.put(Uv(g,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return c.next()}deleteFieldIndex(e,t){const r=Gc(e),o=tl(e),c=el(e);return r.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Gc(e),r=el(e),o=tl(e);return t.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(e,t){return F.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((o=>{if(o===0||o===1){const c=new Gv(r).Dn();if(c!=null)return this.addFieldIndex(e,c)}}))))}getDocumentsMatchingTarget(e,t){const r=el(e);let o=!0;const c=new Map;return F.forEach(this.Mn(t),(u=>this.xn(e,u).next((g=>{o&&(o=!!g),c.set(u,g)})))).next((()=>{if(o){let u=ct();const g=[];return F.forEach(c,((p,y)=>{Ee($v,`Using index ${(function(be){return`id=${be.indexId}|cg=${be.collectionGroup}|f=${be.fields.map((he=>`${he.fieldPath}:${he.kind}`)).join(",")}`})(p)} to execute ${Ja(t)}`);const v=(function(be,he){const we=xp(he);if(we===void 0)return null;for(const de of sf(be,we.fieldPath))switch(de.op){case"array-contains-any":return de.value.arrayValue.values||[];case"array-contains":return[de.value]}return null})(y,p),w=(function(be,he){const we=new Map;for(const de of Ma(he))for(const N of sf(be,de.fieldPath))switch(N.op){case"==":case"in":we.set(de.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return we.set(de.fieldPath.canonicalString(),N.value),Array.from(we.values())}return null})(y,p),A=(function(be,he){const we=[];let de=!0;for(const N of Ma(he)){const R=N.kind===0?Sv(be,N.fieldPath,be.startAt):Av(be,N.fieldPath,be.startAt);we.push(R.value),de&&(de=R.inclusive)}return new Tl(we,de)})(y,p),j=(function(be,he){const we=[];let de=!0;for(const N of Ma(he)){const R=N.kind===0?Av(be,N.fieldPath,be.endAt):Sv(be,N.fieldPath,be.endAt);we.push(R.value),de&&(de=R.inclusive)}return new Tl(we,de)})(y,p),U=this.On(p,y,A),q=this.On(p,y,j),P=this.Nn(p,y,w),ie=this.Bn(p.indexId,v,U,A.inclusive,q,j.inclusive,P);return F.forEach(ie,(ve=>r.Y(ve,t.limit).next((be=>{be.forEach((he=>{const we=Ie.fromSegments(he.documentKey);u.has(we)||(u=u.add(we),g.push(we))}))}))))})).next((()=>g))}return F.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=jC(jt.create(e.filters,"and")).map((r=>Np(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,o,c,u,g){const p=(t!=null?t.length:1)*Math.max(r.length,c.length),y=p/(t!=null?t.length:1),v=[];for(let w=0;w<p;++w){const A=t?this.Ln(t[w/y]):Td,j=this.kn(e,A,r[w%y],o),U=this.qn(e,A,c[w%y],u),q=g.map((P=>this.kn(e,A,P,!0)));v.push(...this.createRange(j,U,q))}return v}kn(e,t,r,o){const c=new Ua(e,Ie.empty(),t,r);return o?c:c.An()}qn(e,t,r,o){const c=new Ua(e,Ie.empty(),t,r);return o?c.An():c}xn(e,t){const r=new Gv(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((c=>{let u=null;for(const g of c)r.yn(g)&&(!u||g.fields.length>u.fields.length)&&(u=g);return u}))}getIndexType(e,t){let r=2;const o=this.Mn(t);return F.forEach(o,(c=>this.xn(e,c).next((u=>{u?r!==0&&u.fields.length<(function(p){let y=new kt(Xt.comparator),v=!1;for(const w of p.filters)for(const A of w.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?v=!0:y=y.add(A.field));for(const w of p.orderBy)w.field.isKeyField()||(y=y.add(w.field));return y.size+(v?1:0)})(c)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&o.length>1&&r===2?1:r))}Qn(e,t){const r=new Hc;for(const o of Ma(e)){const c=t.data.field(o.fieldPath);if(c==null)return null;const u=r.Pn(o.kind);Pa.Kt.Dt(c,u)}return r.un()}Ln(e){const t=new Hc;return Pa.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Hc;return Pa.Kt.Dt(bu(this.databaseId,t),r.Pn((function(c){const u=Ma(c);return u.length===0?0:u[u.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let o=[];o.push(new Hc);let c=0;for(const u of Ma(e)){const g=r[c++];for(const p of o)if(this.Un(t,u.fieldPath)&&vu(g))o=this.Kn(o,u,g);else{const y=p.Pn(u.kind);Pa.Kt.Dt(g,y)}}return this.Wn(o)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const o=[...e],c=[];for(const u of r.arrayValue.values||[])for(const g of o){const p=new Hc;p.seed(g.un()),Pa.Kt.Dt(u,p.Pn(t.kind)),c.push(p)}return c}Un(e,t){return!!e.filters.find((r=>r instanceof gt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Gc(e),o=tl(e);return(t?r.J(vp,IDBKeyRange.bound(t,t)):r.J()).next((c=>{const u=[];return F.forEach(c,(g=>o.get([g.indexId,this.uid]).next((p=>{u.push((function(v,w){const A=w?new fu(w.sequenceNumber,new ps(eo(w.readTime),new Ie(mr(w.documentKey)),w.largestBatchId)):fu.empty(),j=v.fields.map((([U,q])=>new Md(Xt.fromServerFormat(U),q)));return new Xd(v.indexId,v.collectionGroup,j,A)})(g,p))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,o)=>{const c=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return c!==0?c:et(r.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const o=Gc(e),c=tl(e);return this.Gn(e).next((u=>o.J(vp,IDBKeyRange.bound(t,t)).next((g=>F.forEach(g,(p=>c.put(Uv(p.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return F.forEach(t,((o,c)=>{const u=r.get(o.collectionGroup);return(u?F.resolve(u):this.getFieldIndexes(e,o.collectionGroup)).next((g=>(r.set(o.collectionGroup,g),F.forEach(g,(p=>this.zn(e,o,p).next((y=>{const v=this.jn(c,p);return y.isEqual(v)?F.resolve():this.Jn(e,c,p,y,v)})))))))}))}Hn(e,t,r,o){return el(e).put(o.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,o){return el(e).delete(o.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const o=el(e);let c=new kt(Oi);return o.ee({index:zw,range:IDBKeyRange.only([r.indexId,this.uid,qd(this.$n(r,t))])},((u,g)=>{c=c.add(new Ua(r.indexId,t,Hv(g.arrayValue),Hv(g.directionalValue)))})).next((()=>c))}jn(e,t){let r=new kt(Oi);const o=this.Qn(t,e);if(o==null)return r;const c=xp(t);if(c!=null){const u=e.data.field(c.fieldPath);if(vu(u))for(const g of u.arrayValue.values||[])r=r.add(new Ua(t.indexId,e.key,this.Ln(g),o))}else r=r.add(new Ua(t.indexId,e.key,Td,o));return r}Jn(e,t,r,o,c){Ee($v,"Updating index entries for document '%s'",t.key);const u=[];return(function(p,y,v,w,A){const j=p.getIterator(),U=y.getIterator();let q=Jo(j),P=Jo(U);for(;q||P;){let ie=!1,ve=!1;if(q&&P){const be=v(q,P);be<0?ve=!0:be>0&&(ie=!0)}else q!=null?ve=!0:ie=!0;ie?(w(P),P=Jo(U)):ve?(A(q),q=Jo(j)):(q=Jo(j),P=Jo(U))}})(o,c,Oi,(g=>{u.push(this.Hn(e,t,r,g))}),(g=>{u.push(this.Yn(e,t,r,g))})),F.waitFor(u)}Gn(e){let t=1;return tl(e).ee({index:Vw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,c)=>{c.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,g)=>Oi(u,g))).filter(((u,g,p)=>!g||Oi(u,p[g-1])!==0));const o=[];o.push(e);for(const u of r){const g=Oi(u,e),p=Oi(u,t);if(g===0)o[0]=e.An();else if(g>0&&p<0)o.push(u),o.push(u.An());else if(p>0)break}o.push(t);const c=[];for(let u=0;u<o.length;u+=2){if(this.Zn(o[u],o[u+1]))return[];const g=o[u].Vn(this.uid,Td,Ie.empty()),p=o[u+1].Vn(this.uid,Td,Ie.empty());c.push(IDBKeyRange.bound(g,p))}return c}Zn(e,t){return Oi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Yv)}getMinOffset(e,t){return F.mapArray(this.Mn(t),(r=>this.xn(e,r).next((o=>o||je(44426))))).next(Yv)}}function Qv(i){return En(i,yu)}function el(i){return En(i,iu)}function Gc(i){return En(i,ry)}function tl(i){return En(i,ru)}function Yv(i){ze(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const o=i[r].indexState.offset;ty(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new ps(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UE=41943040;class Ln{static withCacheSize(e){return new Ln(e,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(i,e,t){const r=i.store(Hs),o=i.store(_l),c=[],u=IDBKeyRange.only(t.batchId);let g=0;const p=r.ee({range:u},((v,w,A)=>(g++,A.delete())));c.push(p.next((()=>{ze(g===1,47070,{batchId:t.batchId})})));const y=[];for(const v of t.mutations){const w=kw(e,v.key.path,t.batchId);c.push(o.delete(w)),y.push(v.key)}return F.waitFor(c).next((()=>y))}function of(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw je(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln.DEFAULT_COLLECTION_PERCENTILE=10,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ln.DEFAULT=new Ln(UE,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ln.DISABLED=new Ln(-1,0,0);class Of{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(e,t,r,o){ze(e.uid!=="",64387);const c=e.isAuthenticated()?e.uid:"";return new Of(c,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vi(e).ee({index:La,range:r},((o,c,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,o){const c=cl(e),u=Vi(e);return u.add({}).next((g=>{ze(typeof g=="number",49019);const p=new fy(g,t,r,o),y=(function(j,U,q){const P=q.baseMutations.map((ve=>Su(j.yt,ve))),ie=q.mutations.map((ve=>Su(j.yt,ve)));return{userId:U,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:P,mutations:ie}})(this.serializer,this.userId,p),v=[];let w=new kt(((A,j)=>et(A.canonicalString(),j.canonicalString())));for(const A of o){const j=kw(this.userId,A.key.path,g);w=w.add(A.key.path.popLast()),v.push(u.put(y)),v.push(c.put(j,lN))}return w.forEach((A=>{v.push(this.indexManager.addToCollectionParentIndex(e,A))})),e.addOnCommittedListener((()=>{this.Xn[g]=p.keys()})),F.waitFor(v).next((()=>p))}))}lookupMutationBatch(e,t){return Vi(e).get(t).next((r=>r?(ze(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),za(this.serializer,r)):null))}er(e,t){return this.Xn[t]?F.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const o=r.keys();return this.Xn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return Vi(e).ee({index:La,range:o},((u,g,p)=>{g.userId===this.userId&&(ze(g.batchId>=r,47524,{tr:r}),c=za(this.serializer,g)),p.done()})).next((()=>c))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Fa;return Vi(e).ee({index:La,range:t,reverse:!0},((o,c,u)=>{r=c.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Fa],[this.userId,Number.POSITIVE_INFINITY]);return Vi(e).J(La,t).next((r=>r.map((o=>za(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Od(this.userId,t.path),o=IDBKeyRange.lowerBound(r),c=[];return cl(e).ee({range:o},((u,g,p)=>{const[y,v,w]=u,A=mr(v);if(y===this.userId&&t.path.isEqual(A))return Vi(e).get(w).next((j=>{if(!j)throw je(61480,{nr:u,batchId:w});ze(j.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:j.userId,batchId:w}),c.push(za(this.serializer,j))}));p.done()})).next((()=>c))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kt(et);const o=[];return t.forEach((c=>{const u=Od(this.userId,c.path),g=IDBKeyRange.lowerBound(u),p=cl(e).ee({range:g},((y,v,w)=>{const[A,j,U]=y,q=mr(j);A===this.userId&&c.path.isEqual(q)?r=r.add(U):w.done()}));o.push(p)})),F.waitFor(o).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,c=Od(this.userId,r),u=IDBKeyRange.lowerBound(c);let g=new kt(et);return cl(e).ee({range:u},((p,y,v)=>{const[w,A,j]=p,U=mr(A);w===this.userId&&r.isPrefixOf(U)?U.length===o&&(g=g.add(j)):v.done()})).next((()=>this.rr(e,g)))}rr(e,t){const r=[],o=[];return t.forEach((c=>{o.push(Vi(e).get(c).next((u=>{if(u===null)throw je(35274,{batchId:c});ze(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:c}),r.push(za(this.serializer,u))})))})),F.waitFor(o).next((()=>r))}removeMutationBatch(e,t){return LE(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),F.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return F.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),o=[];return cl(e).ee({range:r},((c,u,g)=>{if(c[0]===this.userId){const p=mr(c[1]);o.push(p)}else g.done()})).next((()=>{ze(o.length===0,56720,{sr:o.map((c=>c.canonicalString()))})}))}))}containsKey(e,t){return BE(e,this.userId,t)}_r(e){return qE(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Fa,lastStreamToken:""}))}}function BE(i,e,t){const r=Od(e,t.path),o=r[1],c=IDBKeyRange.lowerBound(r);let u=!1;return cl(i).ee({range:c,X:!0},((g,p,y)=>{const[v,w,A]=g;v===e&&w===o&&(u=!0),y.done()})).next((()=>u))}function Vi(i){return En(i,Hs)}function cl(i){return En(i,_l)}function qE(i){return En(i,gu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new to(0)}static cr(){return new to(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new to(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Be.fromTimestamp(new Dt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.hr(e,o))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>nl(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(ze(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let o=0;const c=[];return nl(e).ee(((u,g)=>{const p=eu(g);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(o++,c.push(this.removeTargetData(e,p)))})).next((()=>F.waitFor(c))).next((()=>o))}forEachTarget(e,t){return nl(e).ee(((r,o)=>{const c=eu(o);t(c)}))}lr(e){return Wv(e).get(Zd).next((t=>(ze(t!==null,2888),t)))}hr(e,t){return Wv(e).put(Zd,t)}Pr(e,t){return nl(e).put(OE(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Ja(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return nl(e).ee({range:o,index:Ow},((u,g,p)=>{const y=eu(g);Vu(t,y.target)&&(c=y,p.done())})).next((()=>c))}addMatchingKeys(e,t,r){const o=[],c=Ui(e);return t.forEach((u=>{const g=Fn(u.path);o.push(c.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,u))})),F.waitFor(o)}removeMatchingKeys(e,t,r){const o=Ui(e);return F.forEach(t,(c=>{const u=Fn(c.path);return F.waitFor([o.delete([r,u]),this.referenceDelegate.removeReference(e,r,c)])}))}removeMatchingKeysForTargetId(e,t){const r=Ui(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Ui(e);let c=ct();return o.ee({range:r,X:!0},((u,g,p)=>{const y=mr(u[1]),v=new Ie(y);c=c.add(v)})).next((()=>c))}containsKey(e,t){const r=Fn(t.path),o=IDBKeyRange.bound([r],[Aw(r)],!1,!0);let c=0;return Ui(e).ee({index:sy,X:!0,range:o},(([u,g],p,y)=>{u!==0&&(c++,y.done())})).next((()=>c>0))}At(e,t){return nl(e).get(t).next((r=>r?eu(r):null))}}function nl(i){return En(i,xl)}function Wv(i){return En(i,Ha)}function Ui(i){return En(i,bl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="LruGarbageCollector",VC=1048576;function Zv([i,e],[t,r]){const o=et(i,t);return o===0?et(e,r):o}class zC{constructor(e){this.Ir=e,this.buffer=new kt(Zv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Zv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ee(Jv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){sa(t)?Ee(Jv,"Ignoring IndexedDB error during garbage collection: ",t):await oo(t)}await this.Vr(3e5)}))}}class PC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return F.resolve(Rs.ce);const r=new zC(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Xv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,c,u,g,p,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,u=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(r=w,g=Date.now(),this.removeTargets(e,r,t)))).next((w=>(c=w,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(y=Date.now(),il()<=mt.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(g-u)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-v}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:w}))))}}function HE(i,e){return new PC(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,t){this.db=e,this.garbageCollector=HE(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,o)=>t(o)))}addReference(e,t,r){return Sd(e,r)}removeReference(e,t,r){return Sd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Sd(e,t)}br(e,t){return(function(o,c){let u=!1;return qE(o).te((g=>BE(o,g,c).next((p=>(p&&(u=!0),F.resolve(!p)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let c=0;return this.Sr(e,((u,g)=>{if(g<=t){const p=this.br(e,u).next((y=>{if(!y)return c++,r.getEntry(e,u).next((()=>(r.removeEntry(u,Be.min()),Ui(e).delete((function(w){return[0,Fn(w.path)]})(u)))))}));o.push(p)}})).next((()=>F.waitFor(o))).next((()=>r.apply(e))).next((()=>c))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Sd(e,t)}Sr(e,t){const r=Ui(e);let o,c=Rs.ce;return r.ee({index:sy},(([u,g],{path:p,sequenceNumber:y})=>{u===0?(c!==Rs.ce&&t(new Ie(mr(o)),c),c=y,o=p):c=Rs.ce})).next((()=>{c!==Rs.ce&&t(new Ie(mr(o)),c)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sd(i,e){return Ui(i).put((function(r,o){return{targetId:0,path:Fn(r.path),sequenceNumber:o}})(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.changes=new Jr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Da(e).put(r)}removeEntry(e,t,r){return Da(e).delete((function(c,u){const g=c.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],rf(u),g[g.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Qt.newInvalidDocument(t);return Da(e).ee({index:Vd,range:IDBKeyRange.only(Kc(t))},((o,c)=>{r=this.Cr(t,c)})).next((()=>r))}vr(e,t){let r={size:0,document:Qt.newInvalidDocument(t)};return Da(e).ee({index:Vd,range:IDBKeyRange.only(Kc(t))},((o,c)=>{r={document:this.Cr(t,c),size:of(c)}})).next((()=>r))}getEntries(e,t){let r=gs();return this.Fr(e,t,((o,c)=>{const u=this.Cr(o,c);r=r.insert(o,u)})).next((()=>r))}Mr(e,t){let r=gs(),o=new Yt(Ie.comparator);return this.Fr(e,t,((c,u)=>{const g=this.Cr(c,u);r=r.insert(c,g),o=o.insert(c,of(u))})).next((()=>({documents:r,Or:o})))}Fr(e,t,r){if(t.isEmpty())return F.resolve();let o=new kt(n1);t.forEach((p=>o=o.add(p)));const c=IDBKeyRange.bound(Kc(o.first()),Kc(o.last())),u=o.getIterator();let g=u.getNext();return Da(e).ee({index:Vd,range:c},((p,y,v)=>{const w=Ie.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;g&&n1(g,w)<0;)r(g,null),g=u.getNext();g&&g.isEqual(w)&&(r(g,y),g=u.hasNext()?u.getNext():null),g?v.j(Kc(g)):v.done()})).next((()=>{for(;g;)r(g,null),g=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,o,c){const u=t.path,g=[u.popLast().toArray(),u.lastSegment(),rf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Da(e).J(IDBKeyRange.bound(g,p,!0)).next((y=>{c==null||c.incrementDocumentReadCount(y.length);let v=gs();for(const w of y){const A=this.Cr(Ie.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);A.isFoundDocument()&&(Uu(t,A)||o.has(A.key))&&(v=v.insert(A.key,A))}return v}))}getAllFromCollectionGroup(e,t,r,o){let c=gs();const u=t1(t,r),g=t1(t,ps.max());return Da(e).ee({index:Mw,range:IDBKeyRange.bound(u,g,!0)},((p,y,v)=>{const w=this.Cr(Ie.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);c=c.insert(w.key,w),c.size===o&&v.done()})).next((()=>c))}newChangeBuffer(e){return new BC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return e1(e).get(bp).next((t=>(ze(!!t,20021),t)))}Dr(e,t){return e1(e).put(bp,t)}Cr(e,t){if(t){const r=SC(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Be.min())))return r}return Qt.newInvalidDocument(e)}}function KE(i){return new LC(i)}class BC extends GE{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Jr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(e){const t=[];let r=0,o=new kt(((c,u)=>et(c.canonicalString(),u.canonicalString())));return this.changes.forEach(((c,u)=>{const g=this.Br.get(c);if(t.push(this.Nr.removeEntry(e,c,g.readTime)),u.isValidDocument()){const p=zv(this.Nr.serializer,u);o=o.add(c.path.popLast());const y=of(p);r+=y-g.size,t.push(this.Nr.addEntry(e,c,p))}else if(r-=g.size,this.trackRemovals){const p=zv(this.Nr.serializer,u.convertToNoDocument(Be.min()));t.push(this.Nr.addEntry(e,c,p))}})),o.forEach((c=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,c))})),t.push(this.Nr.updateMetadata(e,r)),F.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:o})=>(o.forEach(((c,u)=>{this.Br.set(c,{size:u,readTime:r.get(c).readTime})})),r)))}}function e1(i){return En(i,pu)}function Da(i){return En(i,Jd)}function Kc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function t1(i,e){const t=e.documentKey.path.toArray();return[i,rf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function n1(i,e){const t=i.path.toArray(),r=e.path.toArray();let o=0;for(let c=0;c<t.length-2&&c<r.length-2;++c)if(o=et(t[c],r[c]),o)return o;return o=et(t.length,r.length),o||(o=et(t[t.length-2],r[r.length-2]),o||et(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&cu(r.mutation,o,ts.empty(),Dt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ct()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ct()){const o=gr();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((c=>{let u=Jc();return c.forEach(((g,p)=>{u=u.insert(g,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=gr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ct())))}populateOverlays(e,t,r){const o=[];return r.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((u,g)=>{t.set(u,g)}))}))}computeViews(e,t,r,o){let c=gs();const u=lu(),g=(function(){return lu()})();return t.forEach(((p,y)=>{const v=r.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof Zr)?c=c.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),cu(v.mutation,y,v.mutation.getFieldMask(),Dt.now())):u.set(y.key,ts.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((y,v)=>u.set(y,v))),t.forEach(((y,v)=>g.set(y,new qC(v,u.get(y)??null)))),g)))}recalculateAndSaveOverlays(e,t){const r=lu();let o=new Yt(((u,g)=>u-g)),c=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const g of u)g.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let v=r.get(p)||ts.empty();v=g.applyToLocalView(y,v),r.set(p,v);const w=(o.get(g.batchId)||ct()).add(p);o=o.insert(g.batchId,w)}))})).next((()=>{const u=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,v=p.value,w=hE();v.forEach((A=>{if(!c.has(A)){const j=yE(t.get(A),r.get(A));j!==null&&w.set(A,j),c=c.add(A)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,w))}return F.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(u){return Ie.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((c=>{const u=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-c.size):F.resolve(gr());let g=du,p=c;return u.next((y=>F.forEach(y,((v,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),c.get(v)?F.resolve():this.remoteDocumentCache.getEntry(e,v).next((A=>{p=p.insert(v,A)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,p,y,ct()))).next((v=>({batchId:g,changes:uE(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next((r=>{let o=Jc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const c=t.collectionGroup;let u=Jc();return this.indexManager.getCollectionParents(e,c).next((g=>F.forEach(g,(p=>{const y=(function(w,A){return new zu(A,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((v=>{v.forEach(((w,A)=>{u=u.insert(w,A)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,o)))).next((u=>{c.forEach(((p,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,Qt.newInvalidDocument(v)))}));let g=Jc();return u.forEach(((p,y)=>{const v=c.get(p);v!==void 0&&cu(v.mutation,y,ts.empty(),Dt.now()),Uu(t,y)&&(g=g.insert(p,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return F.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Cn(o.createTime)}})(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:VE(o.bundledQuery),readTime:Cn(o.readTime)}})(t)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.overlays=new Yt(Ie.comparator),this.qr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const r=gr();return F.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,c)=>{this.St(e,t,c)})),F.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){const o=gr(),c=t.length+1,u=new Ie(t.child("")),g=this.overlays.getIteratorFrom(u);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>r&&o.set(p.getKey(),p)}return F.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let c=new Yt(((y,v)=>y-v));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let v=c.get(y.largestBatchId);v===null&&(v=gr(),c=c.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const g=gr(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,v)=>g.set(y,v))),!(g.size()>=o)););return F.resolve(g)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new gy(t,r));let c=this.qr.get(t);c===void 0&&(c=ct(),this.qr.set(t,c)),this.qr.set(t,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.sessionToken=_n.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(){this.Qr=new kt(Nn.$r),this.Ur=new kt(Nn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Nn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Nn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Ie(new bt([])),r=new Nn(t,e),o=new Nn(t,e+1),c=[];return this.Ur.forEachInRange([r,o],(u=>{this.Gr(u),c.push(u.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ie(new bt([])),r=new Nn(t,e),o=new Nn(t,e+1);let c=ct();return this.Ur.forEachInRange([r,o],(u=>{c=c.add(u.key)})),c}containsKey(e){const t=new Nn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Nn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ie.comparator(e.key,t.key)||et(e.Yr,t.Yr)}static Kr(e,t){return et(e.Yr,t.Yr)||Ie.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new kt(Nn.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new fy(c,t,r,o);this.mutationQueue.push(u);for(const g of o)this.Zr=this.Zr.add(new Nn(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return F.resolve(u)}lookupMutationBatch(e,t){return F.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),c=o<0?0:o;return F.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Fa:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Nn(t,0),o=new Nn(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,o],(u=>{const g=this.Xr(u.Yr);c.push(g)})),F.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kt(et);return t.forEach((o=>{const c=new Nn(o,0),u=new Nn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,u],(g=>{r=r.add(g.Yr)}))})),F.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let c=r;Ie.isDocumentKey(c)||(c=c.child(""));const u=new Nn(new Ie(c),0);let g=new kt(et);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(g=g.add(p.Yr)),!0)}),u),F.resolve(this.ti(g))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ze(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return F.forEach(t.mutations,(o=>{const c=new Nn(o.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Nn(t,0),o=this.Zr.firstAfterOrEqual(r);return F.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.ri=e,this.docs=(function(){return new Yt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),c=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(t))}getEntries(e,t){let r=gs();return t.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():Qt.newInvalidDocument(o))})),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let c=gs();const u=t.path,g=new Ie(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:v}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||ty(Cw(v),r)<=0||(o.has(v.key)||Uu(t,v))&&(c=c.insert(v.key,v.mutableCopy()))}return F.resolve(c)}getAllFromCollectionGroup(e,t,r,o){je(9500)}ii(e,t){return F.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new QC(this)}getSize(e){return F.resolve(this.size)}}class QC extends GE{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),F.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.persistence=e,this.si=new Jr((t=>Ja(t)),Vu),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.oi=0,this._i=new by,this.targetCount=0,this.ai=to.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),F.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new to(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Pr(t),F.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let o=0;const c=[];return this.si.forEach(((u,g)=>{g.sequenceNumber<=t&&r.get(g.targetId)===null&&(this.si.delete(u),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),F.waitFor(c).next((()=>o))}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),F.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((u=>{c.push(o.markPotentiallyOrphaned(e,u))})),F.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,t){this.ui={},this.overlays={},this.ci=new Rs(0),this.li=!1,this.li=!0,this.hi=new GC,this.referenceDelegate=e(this),this.Pi=new YC(this),this.indexManager=new kC,this.remoteDocumentCache=(function(o){return new $C(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new ME(t),this.Ii=new FC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new KC(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Ee("MemoryPersistence","Starting transaction:",e);const o=new XC(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return F.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class XC extends Dw{constructor(e){super(),this.currentSequenceNumber=e}}class Vf{constructor(e){this.persistence=e,this.Ri=new by,this.Vi=null}static mi(e){return new Vf(e)}get fi(){if(this.Vi)return this.Vi;throw je(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,(r=>{const o=Ie.fromPath(r);return this.gi(e,o).next((c=>{c||t.removeEntry(o,Be.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return F.or([()=>F.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class lf{constructor(e,t){this.persistence=e,this.pi=new Jr((r=>Fn(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=HE(this,t)}static mi(e,t){return new lf(e,t)}Ei(){}di(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return F.forEach(this.pi,((r,o)=>this.br(e,r,o).next((c=>c?F.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((g=>{g||(r++,c.removeEntry(u,Be.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),F.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pd(e.data.value)),t}br(e,t,r){return F.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return F.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.serializer=e}k(e,t,r,o){const c=new Tf("createOrUpgrade",t);r<1&&o>=1&&((function(p){p.createObjectStore(Ou)})(e),(function(p){p.createObjectStore(gu,{keyPath:oN}),p.createObjectStore(Hs,{keyPath:fv,autoIncrement:!0}).createIndex(La,mv,{unique:!0}),p.createObjectStore(_l)})(e),s1(e),(function(p){p.createObjectStore(Oa)})(e));let u=F.resolve();return r<3&&o>=3&&(r!==0&&((function(p){p.deleteObjectStore(bl),p.deleteObjectStore(xl),p.deleteObjectStore(Ha)})(e),s1(e)),u=u.next((()=>(function(p){const y=p.store(Ha),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Be.min().toTimestamp(),targetCount:0};return y.put(Zd,v)})(c)))),r<4&&o>=4&&(r!==0&&(u=u.next((()=>(function(p,y){return y.store(Hs).J().next((w=>{p.deleteObjectStore(Hs),p.createObjectStore(Hs,{keyPath:fv,autoIncrement:!0}).createIndex(La,mv,{unique:!0});const A=y.store(Hs),j=w.map((U=>A.put(U)));return F.waitFor(j)}))})(e,c)))),u=u.next((()=>{(function(p){p.createObjectStore(vl,{keyPath:pN})})(e)}))),r<5&&o>=5&&(u=u.next((()=>this.yi(c)))),r<6&&o>=6&&(u=u.next((()=>((function(p){p.createObjectStore(pu)})(e),this.wi(c))))),r<7&&o>=7&&(u=u.next((()=>this.Si(c)))),r<8&&o>=8&&(u=u.next((()=>this.bi(e,c)))),r<9&&o>=9&&(u=u.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&o>=10&&(u=u.next((()=>this.Di(c)))),r<11&&o>=11&&(u=u.next((()=>{(function(p){p.createObjectStore(Sf,{keyPath:yN})})(e),(function(p){p.createObjectStore(Af,{keyPath:_N})})(e)}))),r<12&&o>=12&&(u=u.next((()=>{(function(p){const y=p.createObjectStore(If,{keyPath:SN});y.createIndex(wp,AN,{unique:!1}),y.createIndex(Pw,IN,{unique:!1})})(e)}))),r<13&&o>=13&&(u=u.next((()=>(function(p){const y=p.createObjectStore(Jd,{keyPath:cN});y.createIndex(Vd,uN),y.createIndex(Mw,hN)})(e))).next((()=>this.Ci(e,c))).next((()=>e.deleteObjectStore(Oa)))),r<14&&o>=14&&(u=u.next((()=>this.Fi(e,c)))),r<15&&o>=15&&(u=u.next((()=>(function(p){p.createObjectStore(ry,{keyPath:xN,autoIncrement:!0}).createIndex(vp,bN,{unique:!1}),p.createObjectStore(ru,{keyPath:vN}).createIndex(Vw,wN,{unique:!1}),p.createObjectStore(iu,{keyPath:EN}).createIndex(zw,TN,{unique:!1})})(e)))),r<16&&o>=16&&(u=u.next((()=>{t.objectStore(ru).clear()})).next((()=>{t.objectStore(iu).clear()}))),r<17&&o>=17&&(u=u.next((()=>{(function(p){p.createObjectStore(iy,{keyPath:NN})})(e)}))),r<18&&o>=18&&dw()&&(u=u.next((()=>{t.objectStore(ru).clear()})).next((()=>{t.objectStore(iu).clear()}))),u}wi(e){let t=0;return e.store(Oa).ee(((r,o)=>{t+=of(o)})).next((()=>{const r={byteSize:t};return e.store(pu).put(bp,r)}))}yi(e){const t=e.store(gu),r=e.store(Hs);return t.J().next((o=>F.forEach(o,(c=>{const u=IDBKeyRange.bound([c.userId,Fa],[c.userId,c.lastAcknowledgedBatchId]);return r.J(La,u).next((g=>F.forEach(g,(p=>{ze(p.userId===c.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const y=za(this.serializer,p);return LE(e,c.userId,y).next((()=>{}))}))))}))))}Si(e){const t=e.store(bl),r=e.store(Oa);return e.store(Ha).get(Zd).next((o=>{const c=[];return r.ee(((u,g)=>{const p=new bt(u),y=(function(w){return[0,Fn(w)]})(p);c.push(t.get(y).next((v=>v?F.resolve():(w=>t.put({targetId:0,path:Fn(w),sequenceNumber:o.highestListenSequenceNumber}))(p))))})).next((()=>F.waitFor(c)))}))}bi(e,t){e.createObjectStore(yu,{keyPath:gN});const r=t.store(yu),o=new xy,c=u=>{if(o.add(u)){const g=u.lastSegment(),p=u.popLast();return r.put({collectionId:g,parent:Fn(p)})}};return t.store(Oa).ee({X:!0},((u,g)=>{const p=new bt(u);return c(p.popLast())})).next((()=>t.store(_l).ee({X:!0},(([u,g,p],y)=>{const v=mr(g);return c(v.popLast())}))))}Di(e){const t=e.store(xl);return t.ee(((r,o)=>{const c=eu(o),u=OE(this.serializer,c);return t.put(u)}))}Ci(e,t){const r=t.store(Oa),o=[];return r.ee(((c,u)=>{const g=t.store(Jd),p=(function(w){return w.document?new Ie(bt.fromString(w.document.name).popFirst(5)):w.noDocument?Ie.fromSegments(w.noDocument.path):w.unknownDocument?Ie.fromSegments(w.unknownDocument.path):je(36783)})(u).path.toArray(),y={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};o.push(g.put(y))})).next((()=>F.waitFor(o)))}Fi(e,t){const r=t.store(Hs),o=KE(this.serializer),c=new vy(Vf.mi,this.serializer.yt);return r.J().next((u=>{const g=new Map;return u.forEach((p=>{let y=g.get(p.userId)??ct();za(this.serializer,p).keys().forEach((v=>y=y.add(v))),g.set(p.userId,y)})),F.forEach(g,((p,y)=>{const v=new On(y),w=Mf.wt(this.serializer,v),A=c.getIndexManager(v),j=Of.wt(v,this.serializer,A,c.referenceDelegate);return new $E(o,j,w,A).recalculateAndSaveOverlaysForDocumentKeys(new Ep(t,Rs.ce),p).next()}))}))}}function s1(i){i.createObjectStore(bl,{keyPath:fN}).createIndex(sy,mN,{unique:!0}),i.createObjectStore(xl,{keyPath:"targetId"}).createIndex(Ow,dN,{unique:!0}),i.createObjectStore(Ha)}const zi="IndexedDbPersistence",tp=18e5,np=5e3,sp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",JC="main";class wy{constructor(e,t,r,o,c,u,g,p,y,v,w=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=c,this.window=u,this.document=g,this.xi=y,this.Oi=v,this.Ni=w,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=A=>Promise.resolve(),!wy.v())throw new Se(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UC(this,o),this.$i=t+JC,this.serializer=new ME(p),this.Ui=new Yi(this.$i,this.Ni,new WC(this.serializer)),this.hi=new IC,this.Pi=new OC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=KE(this.serializer),this.Ii=new AC,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,v===!1&&$n(zi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(ne.FAILED_PRECONDITION,sp);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Rs(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Ad(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(sa(e))return Ee(zi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ee(zi,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return $c(e).get(Wo).next((t=>F.resolve(this.es(t))))}ts(e){return Ad(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,tp)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=En(t,vl);return r.J().next((o=>{const c=this.ss(o,tp),u=o.filter((g=>c.indexOf(g)===-1));return F.forEach(u,(g=>r.delete(g.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?F.resolve(!0):$c(e).get(Wo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,np)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new Se(ne.FAILED_PRECONDITION,sp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ad(e).J().next((r=>this.ss(r,np).find((o=>{if(this.clientId!==o.clientId){const c=!this.networkEnabled&&o.networkEnabled,u=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(c||u&&g)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Ee(zi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ou,vl],(e=>{const t=new Ep(e,Rs.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Ad(e).J().next((t=>this.ss(t,tp).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Of.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new MC(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Mf.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){Ee(zi,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",c=(function(p){return p===18?DN:p===17?qw:p===16?RN:p===15?ay:p===14?Bw:p===13?Lw:p===12?CN:p===11?Uw:void je(60245)})(this.Ni);let u;return this.Ui.runTransaction(e,o,c,(g=>(u=new Ep(g,this.ci?this.ci.next():Rs.ce),t==="readwrite-primary"?this.Hi(u).next((p=>!!p||this.Yi(u))).next((p=>{if(!p)throw $n(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Se(ne.FAILED_PRECONDITION,Rw);return r(u)})).next((p=>this.Xi(u).next((()=>p)))):this.Is(u).next((()=>r(u)))))).then((g=>(u.raiseOnCommittedEvent(),g)))}Is(e){return $c(e).get(Wo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,np)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Se(ne.FAILED_PRECONDITION,sp)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $c(e).put(Wo,t)}static v(){return Yi.v()}Zi(e){const t=$c(e);return t.get(Wo).next((r=>this.es(r)?(Ee(zi,"Releasing primary lease."),t.delete(Wo)):F.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||($n(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;hw()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const r=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return Ee(zi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return $n(zi,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){$n("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $c(i){return En(i,Ou)}function Ad(i){return En(i,vl)}function ZC(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=ct(),o=ct();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Ey(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return hw()?8:jw(wn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const c={result:null};return this.ys(e,t).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ws(e,t,o,r).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new eR;return this.Ss(e,t,u).next((g=>{if(c.result=g,this.Vs)return this.bs(e,t,u,g.size)}))})).next((()=>c.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?(il()<=mt.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",al(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(il()<=mt.DEBUG&&Ee("QueryEngine","Query:",al(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(il()<=mt.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",al(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ds(t))):F.resolve())}ys(e,t){if(Iv(t))return F.resolve(null);let r=Ds(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Rp(t,null,"F"),r=Ds(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const u=ct(...c);return this.ps.getDocuments(e,u).next((g=>this.indexManager.getMinOffset(e,r).next((p=>{const y=this.Ds(t,g);return this.Cs(t,y,u,p.readTime)?this.ys(e,Rp(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ws(e,t,r,o){return Iv(t)||o.isEqual(Be.min())?F.resolve(null):this.ps.getDocuments(e,r).next((c=>{const u=this.Ds(t,c);return this.Cs(t,u,r,o)?F.resolve(null):(il()<=mt.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),al(t)),this.vs(e,u,t,eN(o,du)).next((g=>g)))}))}Ds(e,t){let r=new kt(lE(e));return t.forEach(((o,c)=>{Uu(e,c)&&(r=r.add(c))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,r){return il()<=mt.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",al(t)),this.ps.getDocumentsMatchingQuery(e,t,ps.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((c=>(t.forEach((u=>{c=c.insert(u.key,u)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="LocalStore",tR=3e8;class nR{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Yt(et),this.xs=new Jr((c=>Ja(c)),Vu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $E(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function YE(i,e,t,r){return new nR(i,e,t,r)}async function XE(i,e){const t=We(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((c=>{const u=[],g=[];let p=ct();for(const y of o){u.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}for(const y of c){g.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(r,p).next((y=>({Ls:y,removedBatchIds:u,addedBatchIds:g})))}))}))}function sR(i,e){const t=We(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,v){const w=y.batch,A=w.keys();let j=F.resolve();return A.forEach((U=>{j=j.next((()=>v.getEntry(p,U))).next((q=>{const P=y.docVersions.get(U);ze(P!==null,48541),q.version.compareTo(P)<0&&(w.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),v.addEntry(q)))}))})),j.next((()=>g.mutationQueue.removeMutationBatch(p,w)))})(t,r,e,c).next((()=>c.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(g){let p=ct();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function WE(i){const e=We(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function rR(i,e){const t=We(i),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const g=[];e.targetChanges.forEach(((v,w)=>{const A=o.get(w);if(!A)return;g.push(t.Pi.removeMatchingKeys(c,v.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(c,v.addedDocuments,w))));let j=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?j=j.withResumeToken(_n.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):v.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(v.resumeToken,r)),o=o.insert(w,j),(function(q,P,ie){return q.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=tR?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(A,j,v)&&g.push(t.Pi.updateTargetData(c,j))}));let p=gs(),y=ct();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(c,v))})),g.push(iR(c,u,e.documentUpdates).next((v=>{p=v.ks,y=v.qs}))),!r.isEqual(Be.min())){const v=t.Pi.getLastRemoteSnapshotVersion(c).next((w=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));g.push(v)}return F.waitFor(g).next((()=>u.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,p,y))).next((()=>p))})).then((c=>(t.Ms=o,c)))}function iR(i,e,t){let r=ct(),o=ct();return t.forEach((c=>r=r.add(c))),e.getEntries(i,r).next((c=>{let u=gs();return t.forEach(((g,p)=>{const y=c.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(Be.min())?(e.removeEntry(g,p.readTime),u=u.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(g,p)):Ee(Ty,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{ks:u,qs:o}}))}function aR(i,e){const t=We(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Fa),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function oR(i,e){const t=We(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((c=>c?(o=c,F.resolve(o)):t.Pi.allocateTargetId(r).next((u=>(o=new qr(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Pp(i,e,t){const r=We(i),o=r.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",c,(u=>r.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!sa(u))throw u;Ee(Ty,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function r1(i,e,t){const r=We(i);let o=Be.min(),c=ct();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,y,v){const w=We(p),A=w.xs.get(v);return A!==void 0?F.resolve(w.Ms.get(A)):w.Pi.getTargetData(y,v)})(r,u,Ds(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,g.targetId).next((p=>{c=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,t?o:Be.min(),t?c:ct()))).next((g=>(lR(r,KN(e),g),{documents:g,Qs:c})))))}function lR(i,e,t){let r=i.Os.get(e)||Be.min();t.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),i.Os.set(e,r)}class i1{constructor(){this.activeTargetIds=JN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JE{constructor(){this.Mo=new i1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new i1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="ConnectivityMonitor";class o1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ee(a1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ee(a1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Id=null;function Up(){return Id===null?Id=(function(){return 268435456+Math.round(2147483648*Math.random())})():Id++,"0x"+Id.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="RestConnection",uR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===ef?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,c){const u=Up(),g=this.zo(e,t.toUriEncodedString());Ee(rp,`Sending RPC '${e}' ${u}:`,g,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,c);const{host:y}=new URL(g),v=Dl(y);return this.Jo(e,g,p,r,v).then((w=>(Ee(rp,`Received RPC '${e}' ${u}: `,w),w)),(w=>{throw Xa(rp,`RPC '${e}' ${u} failed with error: `,w,"url: ",g,"request:",r),w}))}Ho(e,t,r,o,c,u){return this.Go(e,t,r,o,c)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const r=uR[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="WebChannelConnection";class fR extends hR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,c){const u=Up();return new Promise(((g,p)=>{const y=new xw;y.setWithCredentials(!0),y.listenOnce(bw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case kd.NO_ERROR:const w=y.getResponseJson();Ee(Un,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),g(w);break;case kd.TIMEOUT:Ee(Un,`RPC '${e}' ${u} timed out`),p(new Se(ne.DEADLINE_EXCEEDED,"Request time out"));break;case kd.HTTP_ERROR:const A=y.getStatus();if(Ee(Un,`RPC '${e}' ${u} failed with status:`,A,"response text:",y.getResponseText()),A>0){let j=y.getResponseJson();Array.isArray(j)&&(j=j[0]);const U=j==null?void 0:j.error;if(U&&U.status&&U.message){const q=(function(ie){const ve=ie.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(ve)>=0?ve:ne.UNKNOWN})(U.status);p(new Se(q,U.message))}else p(new Se(ne.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new Se(ne.UNAVAILABLE,"Connection failed."));break;default:je(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Ee(Un,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);Ee(Un,`RPC '${e}' ${u} sending request:`,o),y.send(t,"POST",v,r,15)}))}T_(e,t,r){const o=Up(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Ew(),g=ww(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const v=c.join("");Ee(Un,`Creating RPC '${e}' stream ${o}: ${v}`,p);const w=u.createWebChannel(v,p);this.I_(w);let A=!1,j=!1;const U=new dR({Yo:P=>{j?Ee(Un,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(A||(Ee(Un,`Opening RPC '${e}' stream ${o} transport.`),w.open(),A=!0),Ee(Un,`RPC '${e}' stream ${o} sending:`,P),w.send(P))},Zo:()=>w.close()}),q=(P,ie,ve)=>{P.listen(ie,(be=>{try{ve(be)}catch(he){setTimeout((()=>{throw he}),0)}}))};return q(w,Wc.EventType.OPEN,(()=>{j||(Ee(Un,`RPC '${e}' stream ${o} transport opened.`),U.o_())})),q(w,Wc.EventType.CLOSE,(()=>{j||(j=!0,Ee(Un,`RPC '${e}' stream ${o} transport closed`),U.a_(),this.E_(w))})),q(w,Wc.EventType.ERROR,(P=>{j||(j=!0,Xa(Un,`RPC '${e}' stream ${o} transport errored. Name:`,P.name,"Message:",P.message),U.a_(new Se(ne.UNAVAILABLE,"The operation could not be completed")))})),q(w,Wc.EventType.MESSAGE,(P=>{var ie;if(!j){const ve=P.data[0];ze(!!ve,16349);const be=ve,he=(be==null?void 0:be.error)||((ie=be[0])==null?void 0:ie.error);if(he){Ee(Un,`RPC '${e}' stream ${o} received error:`,he);const we=he.status;let de=(function(C){const k=pn[C];if(k!==void 0)return bE(k)})(we),N=he.message;de===void 0&&(de=ne.INTERNAL,N="Unknown error status: "+we+" with message "+he.message),j=!0,U.a_(new Se(de,N)),w.close()}else Ee(Un,`RPC '${e}' stream ${o} received:`,ve),U.u_(ve)}})),q(g,vw.STAT_EVENT,(P=>{P.stat===yp.PROXY?Ee(Un,`RPC '${e}' stream ${o} detected buffering proxy`):P.stat===yp.NOPROXY&&Ee(Un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(){return typeof window<"u"?window:null}function Fd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(i){return new mC(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,t,r=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&Ee("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="PersistentStream";class ZE{constructor(e,t,r,o,c,u,g,p){this.Mi=e,this.S_=r,this.b_=o,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Sy(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?($n(t.toString()),$n("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new Se(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ee(l1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ee(l1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gR extends ZE{constructor(e,t,r,o,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,u),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=_C(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Be.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?Be.min():u.readTime?Cn(u.readTime):Be.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=kp(this.serializer),t.addTarget=(function(c,u){let g;const p=u.target;if(g=nf(p)?{documents:NE(c,p)}:{query:CE(c,p).ft},g.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){g.resumeToken=EE(c,u.resumeToken);const y=Dp(c,u.expectedCount);y!==null&&(g.expectedCount=y)}else if(u.snapshotVersion.compareTo(Be.min())>0){g.readTime=Nl(c,u.snapshotVersion.toTimestamp());const y=Dp(c,u.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const r=bC(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=kp(this.serializer),t.removeTarget=e,this.q_(t)}}class pR extends ZE{constructor(e,t,r,o,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,u),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=xC(e.writeResults,e.commitTime),r=Cn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=kp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Su(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{}class _R extends yR{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Se(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Go(e,jp(t,r),o,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Se(ne.UNKNOWN,c.toString())}))}Ho(e,t,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,g])=>this.connection.Ho(e,jp(t,r),o,u,g,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Se(ne.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class xR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($n(t),this.aa=!1):Ee("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="RemoteStore";class bR{constructor(e,t,r,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{lo(this)&&(Ee(no,"Restarting streams for network reachability change."),await(async function(p){const y=We(p);y.Ea.add(4),await Bu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Pf(y)})(this))}))})),this.Ra=new xR(r,o)}}async function Pf(i){if(lo(i))for(const e of i.da)await e(!0)}async function Bu(i){for(const e of i.da)await e(!1)}function eT(i,e){const t=We(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Cy(t)?Ny(t):Vl(t).O_()&&Iy(t,e))}function Ay(i,e){const t=We(i),r=Vl(t);t.Ia.delete(e),r.O_()&&tT(t,e),t.Ia.size===0&&(r.O_()?r.L_():lo(t)&&t.Ra.set("Unknown"))}function Iy(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vl(i).Y_(e)}function tT(i,e){i.Va.Ue(e),Vl(i).Z_(e)}function Ny(i){i.Va=new uC({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Vl(i).start(),i.Ra.ua()}function Cy(i){return lo(i)&&!Vl(i).x_()&&i.Ia.size>0}function lo(i){return We(i).Ea.size===0}function nT(i){i.Va=void 0}async function vR(i){i.Ra.set("Online")}async function wR(i){i.Ia.forEach(((e,t)=>{Iy(i,e)}))}async function ER(i,e){nT(i),Cy(i)?(i.Ra.ha(e),Ny(i)):i.Ra.set("Unknown")}async function TR(i,e,t){if(i.Ra.set("Online"),e instanceof wE&&e.state===2&&e.cause)try{await(async function(o,c){const u=c.cause;for(const g of c.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,u),o.Ia.delete(g),o.Va.removeTarget(g))})(i,e)}catch(r){Ee(no,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cf(i,r)}else if(e instanceof Bd?i.Va.Ze(e):e instanceof vE?i.Va.st(e):i.Va.tt(e),!t.isEqual(Be.min()))try{const r=await WE(i.localStore);t.compareTo(r)>=0&&await(function(c,u){const g=c.Va.Tt(u);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const v=c.Ia.get(y);v&&c.Ia.set(y,v.withResumeToken(p.resumeToken,u))}})),g.targetMismatches.forEach(((p,y)=>{const v=c.Ia.get(p);if(!v)return;c.Ia.set(p,v.withResumeToken(_n.EMPTY_BYTE_STRING,v.snapshotVersion)),tT(c,p);const w=new qr(v.target,p,y,v.sequenceNumber);Iy(c,w)})),c.remoteSyncer.applyRemoteEvent(g)})(i,t)}catch(r){Ee(no,"Failed to raise snapshot:",r),await cf(i,r)}}async function cf(i,e,t){if(!sa(e))throw e;i.Ea.add(1),await Bu(i),i.Ra.set("Offline"),t||(t=()=>WE(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Ee(no,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Pf(i)}))}function sT(i,e){return e().catch((t=>cf(i,t,e)))}async function qu(i){const e=We(i),t=ea(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fa;for(;SR(e);)try{const o=await aR(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,AR(e,o)}catch(o){await cf(e,o)}rT(e)&&iT(e)}function SR(i){return lo(i)&&i.Ta.length<10}function AR(i,e){i.Ta.push(e);const t=ea(i);t.O_()&&t.X_&&t.ea(e.mutations)}function rT(i){return lo(i)&&!ea(i).x_()&&i.Ta.length>0}function iT(i){ea(i).start()}async function IR(i){ea(i).ra()}async function NR(i){const e=ea(i);for(const t of i.Ta)e.ea(t.mutations)}async function CR(i,e,t){const r=i.Ta.shift(),o=my.from(r,e,t);await sT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await qu(i)}async function RR(i,e){e&&ea(i).X_&&await(async function(r,o){if((function(u){return xE(u)&&u!==ne.ABORTED})(o.code)){const c=r.Ta.shift();ea(r).B_(),await sT(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await qu(r)}})(i,e),rT(i)&&iT(i)}async function c1(i,e){const t=We(i);t.asyncQueue.verifyOperationInProgress(),Ee(no,"RemoteStore received new credentials");const r=lo(t);t.Ea.add(3),await Bu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Pf(t)}async function DR(i,e){const t=We(i);e?(t.Ea.delete(2),await Pf(t)):e||(t.Ea.add(2),await Bu(t),t.Ra.set("Unknown"))}function Vl(i){return i.ma||(i.ma=(function(t,r,o){const c=We(t);return c.sa(),new gR(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:vR.bind(null,i),t_:wR.bind(null,i),r_:ER.bind(null,i),H_:TR.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Cy(i)?Ny(i):i.Ra.set("Unknown")):(await i.ma.stop(),nT(i))}))),i.ma}function ea(i){return i.fa||(i.fa=(function(t,r,o){const c=We(t);return c.sa(),new pR(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:IR.bind(null,i),r_:RR.bind(null,i),ta:NR.bind(null,i),na:CR.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await qu(i)):(await i.fa.stop(),i.Ta.length>0&&(Ee(no,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,t,r,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new Ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,c){const u=Date.now()+r,g=new Ry(e,t,u,o,c);return g.start(r),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dy(i,e){if($n("AsyncQueue",`${e}: ${i}`),sa(i))return new Se(ne.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{static emptySet(e){return new dl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ie.comparator(t.key,r.key):(t,r)=>Ie.comparator(t.key,r.key),this.keyedMap=Jc(),this.sortedSet=new Yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new dl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(){this.ga=new Yt(Ie.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):je(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Cl{constructor(e,t,r,o,c,u,g,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,o,c){const u=[];return t.forEach((g=>{u.push({type:0,doc:g})})),new Cl(e,t,dl.emptySet(t),u,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class kR{constructor(){this.queries=h1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=We(t),c=o.queries;o.queries=h1(),c.forEach(((u,g)=>{for(const p of g.Sa)p.onError(r)}))})(this,new Se(ne.ABORTED,"Firestore shutting down"))}}function h1(){return new Jr((i=>oE(i)),Rf)}async function jy(i,e){const t=We(i);let r=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(r=2):(c=new jR,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const g=Dy(u,`Initialization of query '${al(e.query)}' failed`);return void e.onError(g)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&My(t)}async function ky(i,e){const t=We(i),r=e.query;let o=3;const c=t.queries.get(r);if(c){const u=c.Sa.indexOf(e);u>=0&&(c.Sa.splice(u,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function MR(i,e){const t=We(i);let r=!1;for(const o of e){const c=o.query,u=t.queries.get(c);if(u){for(const g of u.Sa)g.Fa(o)&&(r=!0);u.wa=o}}r&&My(t)}function OR(i,e,t){const r=We(i),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);r.queries.delete(e)}function My(i){i.Ca.forEach((e=>{e.next()}))}var Lp,d1;(d1=Lp||(Lp={})).Ma="default",d1.Cache="cache";class Oy{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Cl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.key=e}}class oT{constructor(e){this.key=e}}class VR{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ct(),this.mutatedKeys=ct(),this.eu=lE(e),this.tu=new dl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new u1,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,u=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,w)=>{const A=o.get(v),j=Uu(this.query,w)?w:null,U=!!A&&this.mutatedKeys.has(A.key),q=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let P=!1;A&&j?A.data.isEqual(j.data)?U!==q&&(r.track({type:3,doc:j}),P=!0):this.su(A,j)||(r.track({type:2,doc:j}),P=!0,(p&&this.eu(j,p)>0||y&&this.eu(j,y)<0)&&(g=!0)):!A&&j?(r.track({type:0,doc:j}),P=!0):A&&!j&&(r.track({type:1,doc:A}),P=!0,(p||y)&&(g=!0)),P&&(j?(u=u.add(j),c=q?c.add(v):c.delete(v)):(u=u.delete(v),c=c.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),c=c.delete(v.key),r.track({type:1,doc:v})}return{tu:u,iu:r,Cs:g,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,w)=>(function(j,U){const q=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Rt:P})}};return q(j)-q(U)})(v.type,w.type)||this.eu(v.doc,w.doc))),this.ou(r),o=o??!1;const g=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,u.length!==0||y?{snapshot:new Cl(this.query,e.tu,c,u,e.mutatedKeys,p===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new u1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ct(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new oT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new aT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ct();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Cl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vy="SyncEngine";class zR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class PR{constructor(e){this.key=e,this.hu=!1}}class UR{constructor(e,t,r,o,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Jr((g=>oE(g)),Rf),this.Iu=new Map,this.Eu=new Set,this.du=new Yt(Ie.comparator),this.Au=new Map,this.Ru=new by,this.Vu={},this.mu=new Map,this.fu=to.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LR(i,e,t=!0){const r=fT(i);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await lT(r,e,t,!0),o}async function BR(i,e){const t=fT(i);await lT(t,e,!0,!1)}async function lT(i,e,t,r){const o=await oR(i.localStore,Ds(e)),c=o.targetId,u=i.sharedClientState.addLocalQueryTarget(c,t);let g;return r&&(g=await qR(i,e,c,u==="current",o.resumeToken)),i.isPrimaryClient&&t&&eT(i.remoteStore,o),g}async function qR(i,e,t,r,o){i.pu=(w,A,j)=>(async function(q,P,ie,ve){let be=P.view.ru(ie);be.Cs&&(be=await r1(q.localStore,P.query,!1).then((({documents:N})=>P.view.ru(N,be))));const he=ve&&ve.targetChanges.get(P.targetId),we=ve&&ve.targetMismatches.get(P.targetId)!=null,de=P.view.applyChanges(be,q.isPrimaryClient,he,we);return m1(q,P.targetId,de.au),de.snapshot})(i,w,A,j);const c=await r1(i.localStore,e,!0),u=new VR(e,c.Qs),g=u.ru(c.documents),p=Lu.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),y=u.applyChanges(g,i.isPrimaryClient,p);m1(i,t,y.au);const v=new zR(e,t,u);return i.Tu.set(e,v),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),y.snapshot}async function FR(i,e,t){const r=We(i),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((u=>!Rf(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Pp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Ay(r.remoteStore,o.targetId),Bp(r,o.targetId)})).catch(oo)):(Bp(r,o.targetId),await Pp(r.localStore,o.targetId,!0))}async function HR(i,e){const t=We(i),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ay(t.remoteStore,r.targetId))}async function GR(i,e,t){const r=mT(i);try{const o=await(function(u,g){const p=We(u),y=Dt.now(),v=g.reduce(((j,U)=>j.add(U.key)),ct());let w,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let U=gs(),q=ct();return p.Ns.getEntries(j,v).next((P=>{U=P,U.forEach(((ie,ve)=>{ve.isValidDocument()||(q=q.add(ie))}))})).next((()=>p.localDocuments.getOverlayedDocuments(j,U))).next((P=>{w=P;const ie=[];for(const ve of g){const be=aC(ve,w.get(ve.key).overlayedDocument);be!=null&&ie.push(new Zr(ve.key,be,Jw(be.value.mapValue),Wt.exists(!0)))}return p.mutationQueue.addMutationBatch(j,y,ie,g)})).next((P=>{A=P;const ie=P.applyToLocalDocumentSet(w,q);return p.documentOverlayCache.saveOverlays(j,P.batchId,ie)}))})).then((()=>({batchId:A.batchId,changes:uE(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(u,g,p){let y=u.Vu[u.currentUser.toKey()];y||(y=new Yt(et)),y=y.insert(g,p),u.Vu[u.currentUser.toKey()]=y})(r,o.batchId,t),await Fu(r,o.changes),await qu(r.remoteStore)}catch(o){const c=Dy(o,"Failed to persist write");t.reject(c)}}async function cT(i,e){const t=We(i);try{const r=await rR(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const u=t.Au.get(c);u&&(ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?ze(u.hu,14607):o.removedDocuments.size>0&&(ze(u.hu,42227),u.hu=!1))})),await Fu(t,r,e)}catch(r){await oo(r)}}function f1(i,e,t){const r=We(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((c,u)=>{const g=u.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(u,g){const p=We(u);p.onlineState=g;let y=!1;p.queries.forEach(((v,w)=>{for(const A of w.Sa)A.va(g)&&(y=!0)})),y&&My(p)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KR(i,e,t){const r=We(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),c=o&&o.key;if(c){let u=new Yt(Ie.comparator);u=u.insert(c,Qt.newNoDocument(c,Be.min()));const g=ct().add(c),p=new kf(Be.min(),new Map,new Yt(et),u,g);await cT(r,p),r.du=r.du.remove(c),r.Au.delete(e),zy(r)}else await Pp(r.localStore,e,!1).then((()=>Bp(r,e,t))).catch(oo)}async function $R(i,e){const t=We(i),r=e.batch.batchId;try{const o=await sR(t.localStore,e);hT(t,r,null),uT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Fu(t,o)}catch(o){await oo(o)}}async function QR(i,e,t){const r=We(i);try{const o=await(function(u,g){const p=We(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return p.mutationQueue.lookupMutationBatch(y,g).next((w=>(ze(w!==null,37113),v=w.keys(),p.mutationQueue.removeMutationBatch(y,w)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,v,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>p.localDocuments.getDocuments(y,v)))}))})(r.localStore,e);hT(r,e,t),uT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Fu(r,o)}catch(o){await oo(o)}}function uT(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function hT(i,e,t){const r=We(i);let o=r.Vu[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Bp(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||dT(i,r)}))}function dT(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(Ay(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),zy(i))}function m1(i,e,t){for(const r of t)r instanceof aT?(i.Ru.addReference(r.key,e),YR(i,r)):r instanceof oT?(Ee(Vy,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||dT(i,r.key)):je(19791,{wu:r})}function YR(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Eu.has(r)||(Ee(Vy,"New document in limbo: "+t),i.Eu.add(r),zy(i))}function zy(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new Ie(bt.fromString(e)),r=i.fu.next();i.Au.set(r,new PR(t)),i.du=i.du.insert(t,r),eT(i.remoteStore,new qr(Ds(Pu(t.path)),r,"TargetPurposeLimboResolution",Rs.ce))}}async function Fu(i,e,t){const r=We(i),o=[],c=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((g,p)=>{u.push(r.pu(p,e,t).then((y=>{var v;if((y||t)&&r.isPrimaryClient){const w=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;r.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Ey.As(p.targetId,y);c.push(w)}})))})),await Promise.all(u),r.Pu.H_(o),await(async function(p,y){const v=We(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>F.forEach(y,(A=>F.forEach(A.Es,(j=>v.persistence.referenceDelegate.addReference(w,A.targetId,j))).next((()=>F.forEach(A.ds,(j=>v.persistence.referenceDelegate.removeReference(w,A.targetId,j)))))))))}catch(w){if(!sa(w))throw w;Ee(Ty,"Failed to update sequence numbers: "+w)}for(const w of y){const A=w.targetId;if(!w.fromCache){const j=v.Ms.get(A),U=j.snapshotVersion,q=j.withLastLimboFreeSnapshotVersion(U);v.Ms=v.Ms.insert(A,q)}}})(r.localStore,c))}async function XR(i,e){const t=We(i);if(!t.currentUser.isEqual(e)){Ee(Vy,"User change. New user:",e.toKey());const r=await XE(t.localStore,e);t.currentUser=e,(function(c,u){c.mu.forEach((g=>{g.forEach((p=>{p.reject(new Se(ne.CANCELLED,u))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fu(t,r.Ls)}}function WR(i,e){const t=We(i),r=t.Au.get(e);if(r&&r.hu)return ct().add(r.key);{let o=ct();const c=t.Iu.get(e);if(!c)return o;for(const u of c){const g=t.Tu.get(u);o=o.unionWith(g.view.nu)}return o}}function fT(i){const e=We(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=cT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KR.bind(null,e),e.Pu.H_=MR.bind(null,e.eventManager),e.Pu.yu=OR.bind(null,e.eventManager),e}function mT(i){const e=We(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$R.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QR.bind(null,e),e}class Au{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return YE(this.persistence,new QE,e.initialUser,this.serializer)}Cu(e){return new vy(Vf.mi,this.serializer)}Du(e){return new JE}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Au.provider={build:()=>new Au};class JR extends Au{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ze(this.persistence.referenceDelegate instanceof lf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new FE(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new vy((r=>lf.mi(r,t)),this.serializer)}}class ZR extends Au{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await mT(this.xu.syncEngine),await qu(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return YE(this.persistence,new QE,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new FE(r,e.asyncQueue,t)}Mu(e,t){const r=new rN(t,this.persistence);return new sN(e.asyncQueue,r)}Cu(e){const t=ZC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new wy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,mR(),Fd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new JE}}class uf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>f1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XR.bind(null,this.syncEngine),await DR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kR})()}createDatastore(e){const t=zf(e.databaseInfo.databaseId),r=(function(c){return new fR(c)})(e.databaseInfo);return(function(c,u,g,p){return new _R(c,u,g,p)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,c,u,g){return new bR(r,o,c,u,g)})(this.localStore,this.datastore,e.asyncQueue,(t=>f1(this.syncEngine,t,0)),(function(){return o1.v()?new o1:new cR})())}createSyncEngine(e,t){return(function(o,c,u,g,p,y,v){const w=new UR(o,c,u,g,p,y);return v&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const c=We(o);Ee(no,"RemoteStore shutting down."),c.Ea.add(5),await Bu(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}uf.provider={build:()=>new uf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$n("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Se(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,c){const u=We(o),g={documents:c.map((w=>Tu(u.serializer,w)))},p=await u.Ho("BatchGetDocuments",u.serializer.databaseId,bt.emptyPath(),g,c.length),y=new Map;p.forEach((w=>{const A=yC(u.serializer,w);y.set(A.key.toString(),A)}));const v=[];return c.forEach((w=>{const A=y.get(w.toString());ze(!!A,55234,{key:w}),v.push(A)})),v})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ol(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const o=Ie.fromPath(r);this.mutations.push(new dy(o,this.precondition(o)))})),await(async function(r,o){const c=We(r),u={writes:o.map((g=>Su(c.serializer,g)))};await c.Go("Commit",c.serializer.databaseId,bt.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw je(50498,{Gu:e.constructor.name});t=Be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Se(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Be.min())?Wt.exists(!1):Wt.updateTime(t):Wt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Be.min()))throw new Se(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wt.updateTime(t)}return Wt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,t,r,o,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=c,this.zu=r.maxAttempts,this.M_=new Sy(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new eD(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((o=>{this.Yu(o)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Mu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!xE(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="FirestoreClient";class nD{constructor(e,t,r,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=On.UNAUTHENTICATED,this.clientId=ey.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async u=>{Ee(ta,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(Ee(ta,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Dy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function ip(i,e){i.asyncQueue.verifyOperationInProgress(),Ee(ta,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await XE(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function g1(i,e){i.asyncQueue.verifyOperationInProgress();const t=await sD(i);Ee(ta,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>c1(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>c1(e.remoteStore,o))),i._onlineComponents=e}async function sD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ee(ta,"Using user provided OfflineComponentProvider");try{await ip(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Xa("Error using user provided cache. Falling back to memory cache: "+t),await ip(i,new Au)}}else Ee(ta,"Using default OfflineComponentProvider"),await ip(i,new JR(void 0));return i._offlineComponents}async function Uy(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ee(ta,"Using user provided OnlineComponentProvider"),await g1(i,i._uninitializedComponentsProvider._online)):(Ee(ta,"Using default OnlineComponentProvider"),await g1(i,new uf))),i._onlineComponents}function rD(i){return Uy(i).then((e=>e.syncEngine))}function iD(i){return Uy(i).then((e=>e.datastore))}async function hf(i){const e=await Uy(i),t=e.eventManager;return t.onListen=LR.bind(null,e.syncEngine),t.onUnlisten=FR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=HR.bind(null,e.syncEngine),t}function aD(i,e,t={}){const r=new Ks;return i.asyncQueue.enqueueAndForget((async()=>(function(c,u,g,p,y){const v=new Py({next:A=>{v.Nu(),u.enqueueAndForget((()=>ky(c,w)));const j=A.docs.has(g);!j&&A.fromCache?y.reject(new Se(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&A.fromCache&&p&&p.source==="server"?y.reject(new Se(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),w=new Oy(Pu(g.path),v,{includeMetadataChanges:!0,qa:!0});return jy(c,w)})(await hf(i),i.asyncQueue,e,t,r))),r.promise}function oD(i,e,t={}){const r=new Ks;return i.asyncQueue.enqueueAndForget((async()=>(function(c,u,g,p,y){const v=new Py({next:A=>{v.Nu(),u.enqueueAndForget((()=>ky(c,w))),A.fromCache&&p.source==="server"?y.reject(new Se(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),w=new Oy(g,v,{includeMetadataChanges:!0,qa:!0});return jy(c,w)})(await hf(i),i.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="firestore.googleapis.com",y1=!0;class _1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pT,this.ssl=y1}else this.host=e.host,this.ssl=e.ssl??y1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VC)throw new Se(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Se(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Se(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Se(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uf{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new FI;switch(r.type){case"firstParty":return new $I(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Se(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=p1.get(t);r&&(Ee("ComponentProvider","Removing Datastore"),p1.delete(t),r.terminate())})(this),Promise.resolve()}}function lD(i,e,t,r={}){var y;i=qn(i,Uf);const o=Dl(e),c=i._getSettings(),u={...c,emulatorOptions:i._getEmulatorOptions()},g=`${e}:${t}`;o&&(lw(`https://${g}`),cw("Firestore",!0)),c.host!==pT&&c.host!==g&&Xa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:g,ssl:o,emulatorOptions:r};if(!Ka(p,u)&&(i._setSettings(p),r.mockUserToken)){let v,w;if(typeof r.mockUserToken=="string")v=r.mockUserToken,w=On.MOCK_USER;else{v=pA(r.mockUserToken,(y=i._app)==null?void 0:y.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new Se(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new On(A)}i._authCredentials=new HI(new Sw(v,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new co(this.firestore,e,this._query)}}class Jt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}toJSON(){return{type:Jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ku(t,Jt._jsonSchema))return new Jt(e,r||null,new Ie(bt.fromString(t.referencePath)))}}Jt._jsonSchemaVersion="firestore/documentReference/1.0",Jt._jsonSchema={type:yn("string",Jt._jsonSchemaVersion),referencePath:yn("string")};class Xi extends co{constructor(e,t,r){super(e,t,Pu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new Ie(e))}withConverter(e){return new Xi(this.firestore,e,this._path)}}function Nd(i,e,...t){if(i=nn(i),Iw("collection","path",e),i instanceof Uf){const r=bt.fromString(e,...t);return lv(r),new Xi(i,null,r)}{if(!(i instanceof Jt||i instanceof Xi))throw new Se(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(bt.fromString(e,...t));return lv(r),new Xi(i.firestore,null,r)}}function Rt(i,e,...t){if(i=nn(i),arguments.length===1&&(e=ey.newId()),Iw("doc","path",e),i instanceof Uf){const r=bt.fromString(e,...t);return ov(r),new Jt(i,null,new Ie(r))}{if(!(i instanceof Jt||i instanceof Xi))throw new Se(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(bt.fromString(e,...t));return ov(r),new Jt(i.firestore,i instanceof Xi?i.converter:null,new Ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="AsyncQueue";class b1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Sy(this,"async_queue_retry"),this._c=()=>{const r=Fd();r&&Ee(x1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Fd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Fd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ks;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sa(e))throw e;Ee(x1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,$n("INTERNAL UNHANDLED ERROR: ",v1(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Ry.createAndSchedule(this,e,t,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&je(47125,{Pc:v1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function v1(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of r)if(c in o&&typeof o[c]=="function")return!0;return!1})(i,["next","error","complete"])}class Qs extends Uf{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new b1,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b1(e),this._firestoreClient=void 0,await e}}}function cD(i,e){const t=typeof i=="object"?i:Jp(),r=typeof i=="string"?i:ef,o=Xp(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=mA("firestore");c&&lD(o,...c)}return o}function zl(i){if(i._terminated)throw new Se(ne.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||yT(i),i._firestoreClient}function yT(i){var r,o,c;const e=i._freezeSettings(),t=(function(g,p,y,v){return new kN(g,p,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,gT(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(i._databaseId,((r=i._app)==null?void 0:r.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new nD(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}})(i._componentsProvider))}function uD(i,e){Xa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings();return hD(i,uf.provider,{build:r=>new ZR(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function hD(i,e,t){if((i=qn(i,Qs))._firestoreClient||i._terminated)throw new Se(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new Se(ne.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:e,_offline:t},yT(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ms(_n.fromBase64String(e))}catch(t){throw new Se(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ms(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ms._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ku(e,ms._jsonSchema))return ms.fromBase64String(e.bytes)}}ms._jsonSchemaVersion="firestore/bytes/1.0",ms._jsonSchema={type:yn("string",ms._jsonSchemaVersion),bytes:yn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Se(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pr._jsonSchemaVersion}}static fromJSON(e){if(ku(e,pr._jsonSchema))return new pr(e.latitude,e.longitude)}}pr._jsonSchemaVersion="firestore/geoPoint/1.0",pr._jsonSchema={type:yn("string",pr._jsonSchemaVersion),latitude:yn("number"),longitude:yn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ku(e,yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new yr(e.vectorValues);throw new Se(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yr._jsonSchemaVersion="firestore/vectorValue/1.0",yr._jsonSchema={type:yn("string",yr._jsonSchemaVersion),vectorValues:yn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=/^__.*__$/;class fD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Zr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ml(e,this.data,t,this.fieldTransforms)}}class _T{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Zr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{Ac:i})}}class By{constructor(e,t,r,o,c,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new By({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return df(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(xT(this.Ac)&&dD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class mD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||zf(e)}Cc(e,t,r,o=!1){return new By({Ac:e,methodName:t,Dc:r,path:Xt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hu(i){const e=i._freezeSettings(),t=zf(i._databaseId);return new mD(i._databaseId,!!e.ignoreUndefinedProperties,t)}function qy(i,e,t,r,o,c={}){const u=i.Cc(c.merge||c.mergeFields?2:0,e,t,o);Gy("Data must be an object, but it was:",u,r);const g=bT(r,u);let p,y;if(c.merge)p=new ts(u.fieldMask),y=u.fieldTransforms;else if(c.mergeFields){const v=[];for(const w of c.mergeFields){const A=qp(e,w,t);if(!u.contains(A))throw new Se(ne.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);wT(v,A)||v.push(A)}p=new ts(v),y=u.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,y=u.fieldTransforms;return new fD(new zn(g),p,y)}class Lf extends Ly{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lf}}function Fy(i,e,t,r){const o=i.Cc(1,e,t);Gy("Data must be an object, but it was:",o,r);const c=[],u=zn.empty();ra(r,((p,y)=>{const v=Ky(e,p,t);y=nn(y);const w=o.yc(v);if(y instanceof Lf)c.push(v);else{const A=Gu(y,w);A!=null&&(c.push(v),u.set(v,A))}}));const g=new ts(c);return new _T(u,g,o.fieldTransforms)}function Hy(i,e,t,r,o,c){const u=i.Cc(1,e,t),g=[qp(e,r,t)],p=[o];if(c.length%2!=0)throw new Se(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<c.length;A+=2)g.push(qp(e,c[A])),p.push(c[A+1]);const y=[],v=zn.empty();for(let A=g.length-1;A>=0;--A)if(!wT(y,g[A])){const j=g[A];let U=p[A];U=nn(U);const q=u.yc(j);if(U instanceof Lf)y.push(j);else{const P=Gu(U,q);P!=null&&(y.push(j),v.set(j,P))}}const w=new ts(y);return new _T(v,w,u.fieldTransforms)}function gD(i,e,t,r=!1){return Gu(t,i.Cc(r?4:3,e))}function Gu(i,e){if(vT(i=nn(i)))return Gy("Unsupported field value:",e,i),bT(i,e);if(i instanceof Ly)return(function(r,o){if(!xT(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const c=[];let u=0;for(const g of r){let p=Gu(g,o.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),u++}return{arrayValue:{values:c}}})(i,e)}return(function(r,o){if((r=nn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZN(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Dt.fromDate(r);return{timestampValue:Nl(o.serializer,c)}}if(r instanceof Dt){const c=new Dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nl(o.serializer,c)}}if(r instanceof pr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ms)return{bytesValue:EE(o.serializer,r._byteString)};if(r instanceof Jt){const c=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(c))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:yy(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof yr)return(function(u,g){return{mapValue:{fields:{[ly]:{stringValue:cy},[wl]:{arrayValue:{values:u.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return hy(g.serializer,y)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Ef(r)}`)})(i,e)}function bT(i,e){const t={};return Fw(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ra(i,((r,o)=>{const c=Gu(o,e.mc(r));c!=null&&(t[r]=c)})),{mapValue:{fields:t}}}function vT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Dt||i instanceof pr||i instanceof ms||i instanceof Jt||i instanceof Ly||i instanceof yr)}function Gy(i,e,t){if(!vT(t)||!Nw(t)){const r=Ef(t);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function qp(i,e,t){if((e=nn(e))instanceof Pl)return e._internalPath;if(typeof e=="string")return Ky(i,e);throw df("Field path arguments must be of type string or ",i,!1,void 0,t)}const pD=new RegExp("[~\\*/\\[\\]]");function Ky(i,e,t){if(e.search(pD)>=0)throw df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Pl(...e.split("."))._internalPath}catch{throw df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function df(i,e,t,r,o){const c=r&&!r.isEmpty(),u=o!==void 0;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||u)&&(p+=" (found",c&&(p+=` in field ${r}`),u&&(p+=` in document ${o}`),p+=")"),new Se(ne.INVALID_ARGUMENT,g+i+p)}function wT(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,t,r,o,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($y("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class yD extends ff{data(){return super.data()}}function $y(i,e){return typeof e=="string"?Ky(i,e):e instanceof Pl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Se(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qy{}class _D extends Qy{}function E1(i,e,...t){let r=[];e instanceof Qy&&r.push(e),r=r.concat(t),(function(c){const u=c.filter((p=>p instanceof Yy)).length,g=c.filter((p=>p instanceof Bf)).length;if(u>1||u>0&&g>0)throw new Se(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class Bf extends _D{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Bf(e,t,r)}_apply(e){const t=this._parse(e);return TT(e._query,t),new co(e.firestore,e.converter,Cp(e._query,t))}_parse(e){const t=Hu(e.firestore);return(function(c,u,g,p,y,v,w){let A;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Se(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){A1(w,v);const U=[];for(const q of w)U.push(S1(p,c,q));A={arrayValue:{values:U}}}else A=S1(p,c,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||A1(w,v),A=gD(g,u,w,v==="in"||v==="not-in");return gt.create(y,v,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function T1(i,e,t){const r=e,o=$y("where",i);return Bf._create(o,r,t)}class Yy extends Qy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Yy(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:jt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let u=o;const g=c.getFlattenedFilters();for(const p of g)TT(u,p),u=Cp(u,p)})(e._query,t),new co(e.firestore,e.converter,Cp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function S1(i,e,t){if(typeof(t=nn(t))=="string"){if(t==="")throw new Se(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aE(e)&&t.indexOf("/")!==-1)throw new Se(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(bt.fromString(t));if(!Ie.isDocumentKey(r))throw new Se(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bu(i,new Ie(r))}if(t instanceof Jt)return bu(i,t._key);throw new Se(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ef(t)}.`)}function A1(i,e){if(!Array.isArray(i)||i.length===0)throw new Se(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TT(i,e){const t=(function(o,c){for(const u of o)for(const g of u.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Se(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ST{convertValue(e,t="none"){switch(Ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ra(e,((o,c)=>{r[o]=this.convertValue(c,t)})),r}convertVectorValue(e){var r,o,c;const t=(c=(o=(r=e.fields)==null?void 0:r[wl].arrayValue)==null?void 0:o.values)==null?void 0:c.map((u=>$t(u.doubleValue)));return new yr(t)}convertGeoPoint(e){return new pr($t(e.latitude),$t(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Nf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){const t=Qr(e);return new Dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=bt.fromString(e);ze(kE(r),9688,{name:e});const o=new Wa(r.get(1),r.get(3)),c=new Ie(r.popFirst(5));return o.isEqual(t)||$n(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class xD extends ST{constructor(e){super(),this.firestore=e}convertBytes(e){return new ms(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,t)}}class hl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wi extends ff{constructor(e,t,r,o,c,u){super(e,t,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field($y("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Wi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Wi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wi._jsonSchema={type:yn("string",Wi._jsonSchemaVersion),bundleSource:yn("string","DocumentSnapshot"),bundleName:yn("string"),bundle:yn("string")};class Hd extends Wi{data(e={}){return super.data(e)}}class Ga{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new hl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Hd(this._firestore,this._userDataWriter,r.key,r,new hl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((g=>{const p=new Hd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new hl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const p=new Hd(o._firestore,o._userDataWriter,g.doc.key,g.doc,new hl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return g.type!==0&&(y=u.indexOf(g.doc.key),u=u.delete(g.doc.key)),g.type!==1&&(u=u.add(g.doc),v=u.indexOf(g.doc.key)),{type:bD(g.type),doc:p,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ga._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ey.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function bD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(i){i=qn(i,Jt);const e=qn(i.firestore,Qs);return aD(zl(e),i._key).then((t=>AT(e,i,t)))}Ga._jsonSchemaVersion="firestore/querySnapshot/1.0",Ga._jsonSchema={type:yn("string",Ga._jsonSchemaVersion),bundleSource:yn("string","QuerySnapshot"),bundleName:yn("string"),bundle:yn("string")};class qf extends ST{constructor(e){super(),this.firestore=e}convertBytes(e){return new ms(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,t)}}function vD(i){i=qn(i,co);const e=qn(i.firestore,Qs),t=zl(e),r=new qf(e);return ET(i._query),oD(t,i._query).then((o=>new Ga(e,r,i,o)))}function Lr(i,e,t){i=qn(i,Jt);const r=qn(i.firestore,Qs),o=Xy(i.converter,e,t);return Ff(r,[qy(Hu(r),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,Wt.none())])}function sl(i,e,t,...r){i=qn(i,Jt);const o=qn(i.firestore,Qs),c=Hu(o);let u;return u=typeof(e=nn(e))=="string"||e instanceof Pl?Hy(c,"updateDoc",i._key,e,t,r):Fy(c,"updateDoc",i._key,e),Ff(o,[u.toMutation(i._key,Wt.exists(!0))])}function N1(i){return Ff(qn(i.firestore,Qs),[new Ol(i._key,Wt.none())])}function Cd(i,...e){var p,y,v;i=nn(i);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||w1(e[r])||(t=e[r++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(w1(e[r])){const w=e[r];e[r]=(p=w.next)==null?void 0:p.bind(w),e[r+1]=(y=w.error)==null?void 0:y.bind(w),e[r+2]=(v=w.complete)==null?void 0:v.bind(w)}let c,u,g;if(i instanceof Jt)u=qn(i.firestore,Qs),g=Pu(i._key.path),c={next:w=>{e[r]&&e[r](AT(u,i,w))},error:e[r+1],complete:e[r+2]};else{const w=qn(i,co);u=qn(w.firestore,Qs),g=w._query;const A=new qf(u);c={next:j=>{e[r]&&e[r](new Ga(u,A,w,j))},error:e[r+1],complete:e[r+2]},ET(i._query)}return(function(A,j,U,q){const P=new Py(q),ie=new Oy(j,P,U);return A.asyncQueue.enqueueAndForget((async()=>jy(await hf(A),ie))),()=>{P.Nu(),A.asyncQueue.enqueueAndForget((async()=>ky(await hf(A),ie)))}})(zl(u),g,o,c)}function Ff(i,e){return(function(r,o){const c=new Ks;return r.asyncQueue.enqueueAndForget((async()=>GR(await rD(r),o,c))),c.promise})(zl(i),e)}function AT(i,e,t){const r=t.docs.get(e._key),o=new qf(i);return new Wi(i,o,e._key,r,new hl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hu(e)}set(e,t,r){this._verifyNotCommitted();const o=Hi(e,this._firestore),c=Xy(o.converter,t,r),u=qy(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,r);return this._mutations.push(u.toMutation(o._key,Wt.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const c=Hi(e,this._firestore);let u;return u=typeof(t=nn(t))=="string"||t instanceof Pl?Hy(this._dataReader,"WriteBatch.update",c._key,t,r,o):Fy(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(u.toMutation(c._key,Wt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Hi(e,this._firestore);return this._mutations=this._mutations.concat(new Ol(t._key,Wt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hi(i,e){if((i=nn(i)).firestore!==e)throw new Se(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hu(e)}get(e){const t=Hi(e,this._firestore),r=new xD(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return je(24041);const c=o[0];if(c.isFoundDocument())return new ff(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new ff(this._firestore,r,t._key,null,t.converter);throw je(18433,{doc:c})}))}set(e,t,r){const o=Hi(e,this._firestore),c=Xy(o.converter,t,r),u=qy(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,r);return this._transaction.set(o._key,u),this}update(e,t,r,...o){const c=Hi(e,this._firestore);let u;return u=typeof(t=nn(t))=="string"||t instanceof Pl?Hy(this._dataReader,"Transaction.update",c._key,t,r,o):Fy(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,u),this}delete(e){const t=Hi(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD extends TD{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Hi(e,this._firestore),r=new qf(this._firestore);return super.get(e).then((o=>new Wi(this._firestore,r,t._key,o._document,new hl(!1,!1),t.converter)))}}function ap(i,e,t){i=qn(i,Qs);const r={...wD,...t};return(function(c){if(c.maxAttempts<1)throw new Se(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(c,u,g){const p=new Ks;return c.asyncQueue.enqueueAndForget((async()=>{const y=await iD(c);new tD(c.asyncQueue,y,g,u,p).ju()})),p.promise})(zl(i),(o=>e(new SD(i,o))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(i){return zl(i=qn(i,Qs)),new ED(i,(e=>Ff(i,e)))}(function(e,t=!0){(function(o){kl=o})(jl),pl(new $a("firestore",((r,{instanceIdentifier:o,options:c})=>{const u=r.getProvider("app").getImmediate(),g=new Qs(new GI(r.getProvider("auth-internal")),new QI(u,r.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Se(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wa(y.options.projectId,v)})(u,o),u);return c={useFetchStreams:t,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),$i(sv,rv,e),$i(sv,rv,"esm2020")})();function IT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AD=IT,NT=new Du("auth","Firebase",IT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=new Qp("@firebase/auth");function ID(i,...e){mf.logLevel<=mt.WARN&&mf.warn(`Auth (${jl}): ${i}`,...e)}function Gd(i,...e){mf.logLevel<=mt.ERROR&&mf.error(`Auth (${jl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(i,...e){throw Jy(i,...e)}function $s(i,...e){return Jy(i,...e)}function Wy(i,e,t){const r={...AD(),[e]:t};return new Du("auth","Firebase",r).create(e,{appName:i.name})}function Kr(i){return Wy(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ND(i,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&js(i,"argument-error"),Wy(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jy(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return NT.create(i,...e)}function Xe(i,e,...t){if(!i)throw Jy(e,...t)}function Fr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Gd(e),new Error(e)}function Xr(i,e){i||Fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function CD(){return C1()==="http:"||C1()==="https:"}function C1(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CD()||vA()||"connection"in navigator)?navigator.onLine:!0}function DD(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xr(t>e,"Short delay should be less than long delay!"),this.isMobile=xA()||wA()}get(){return RD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(i,e){Xr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],MD=new Ku(3e4,6e4);function ei(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function ti(i,e,t,r,o={}){return RT(i,o,async()=>{let c={},u={};r&&(e==="GET"?u=r:c={body:JSON.stringify(r)});const g=ju({key:i.config.apiKey,...u}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:p,...c};return bA()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&Dl(i.emulatorConfig.host)&&(y.credentials="include"),CT.fetch()(await DT(i,i.config.apiHost,t,g),y)})}async function RT(i,e,t){i._canInitEmulator=!1;const r={...jD,...e};try{const o=new VD(i),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw Rd(i,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const g=c.ok?u.errorMessage:u.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rd(i,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Rd(i,"email-already-in-use",u);if(p==="USER_DISABLED")throw Rd(i,"user-disabled",u);const v=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Wy(i,v,y);js(i,v)}}catch(o){if(o instanceof Wr)throw o;js(i,"network-request-failed",{message:String(o)})}}async function $u(i,e,t,r,o={}){const c=await ti(i,e,t,r,o);return"mfaPendingCredential"in c&&js(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function DT(i,e,t,r){const o=`${e}${t}?${r}`,c=i,u=c.config.emulator?Zy(i.config,o):`${i.config.apiScheme}://${o}`;return kD.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function OD(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r($s(this.auth,"network-request-failed")),MD.get())})}}function Rd(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=$s(i,e,r);return o.customData._tokenResponse=t,o}function R1(i){return i!==void 0&&i.enterprise!==void 0}class zD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return OD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function PD(i,e){return ti(i,"GET","/v2/recaptchaConfig",ei(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UD(i,e){return ti(i,"POST","/v1/accounts:delete",e)}async function gf(i,e){return ti(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LD(i,e=!1){const t=nn(i),r=await t.getIdToken(e),o=e0(r);Xe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c==null?void 0:c.sign_in_provider;return{claims:o,token:r,authTime:uu(op(o.auth_time)),issuedAtTime:uu(op(o.iat)),expirationTime:uu(op(o.exp)),signInProvider:u||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function op(i){return Number(i)*1e3}function e0(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Gd("JWT malformed, contained fewer than 3 sections"),null;try{const o=sw(t);return o?JSON.parse(o):(Gd("Failed to decode base64 JWT payload"),null)}catch(o){return Gd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function D1(i){const e=e0(i);return Xe(e,"internal-error"),Xe(typeof e.exp<"u","internal-error"),Xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iu(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Wr&&BD(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function BD({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=uu(this.lastLoginAt),this.creationTime=uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pf(i){var w;const e=i.auth,t=await i.getIdToken(),r=await Iu(i,gf(e,{idToken:t}));Xe(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const c=(w=o.providerUserInfo)!=null&&w.length?jT(o.providerUserInfo):[],u=HD(i.providerData,c),g=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!(u!=null&&u.length),y=g?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Hp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,v)}async function FD(i){const e=nn(i);await pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HD(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function jT(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(i,e){const t=await RT(i,{},async()=>{const r=ju({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,u=await DT(i,o,"/v1/token",`key=${c}`),g=await i._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:r};return i.emulatorConfig&&Dl(i.emulatorConfig.host)&&(p.credentials="include"),CT.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function KD(i,e){return ti(i,"POST","/v2/accounts:revokeToken",ei(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xe(e.idToken,"internal-error"),Xe(typeof e.idToken<"u","internal-error"),Xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):D1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Xe(e.length!==0,"internal-error");const t=D1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:c}=await GD(e,t);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:c}=t,u=new fl;return r&&(Xe(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),o&&(Xe(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(Xe(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fl,this.toJSON())}_performRefresh(){return Fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(i,e){Xe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Gs{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new qD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Hp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Iu(this,this.stsTokenManager.getToken(this.auth,e));return Xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return LD(this,e)}reload(){return FD(this)}_assign(e){this!==e&&(Xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Gs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await pf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fs(this.auth.app))return Promise.reject(Kr(this.auth));const e=await this.getIdToken();return await Iu(this,UD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,u=t.photoURL??void 0,g=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:w,emailVerified:A,isAnonymous:j,providerData:U,stsTokenManager:q}=t;Xe(w&&q,e,"internal-error");const P=fl.fromJSON(this.name,q);Xe(typeof w=="string",e,"internal-error"),Pi(r,e.name),Pi(o,e.name),Xe(typeof A=="boolean",e,"internal-error"),Xe(typeof j=="boolean",e,"internal-error"),Pi(c,e.name),Pi(u,e.name),Pi(g,e.name),Pi(p,e.name),Pi(y,e.name),Pi(v,e.name);const ie=new Gs({uid:w,auth:e,email:o,emailVerified:A,displayName:r,isAnonymous:j,photoURL:u,phoneNumber:c,tenantId:g,stsTokenManager:P,createdAt:y,lastLoginAt:v});return U&&Array.isArray(U)&&(ie.providerData=U.map(ve=>({...ve}))),p&&(ie._redirectEventId=p),ie}static async _fromIdTokenResponse(e,t,r=!1){const o=new fl;o.updateFromServerResponse(t);const c=new Gs({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await pf(c),c}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Xe(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?jT(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),g=new fl;g.updateFromIdToken(r);const p=new Gs({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:u}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Hp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=new Map;function Hr(i){Xr(i instanceof Function,"Expected a class definition");let e=j1.get(i);return e?(Xr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,j1.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}kT.type="NONE";const k1=kT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(i,e,t){return`firebase:${i}:${e}:${t}`}class ml{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=Kd(this.userKey,o.apiKey,c),this.fullPersistenceKey=Kd("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await gf(this.auth,{idToken:e}).catch(()=>{});return t?Gs._fromGetAccountInfoResponse(this.auth,t,e):null}return Gs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ml(Hr(k1),e,r);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||Hr(k1);const u=Kd(r,e.config.apiKey,e.name);let g=null;for(const y of t)try{const v=await y._get(u);if(v){let w;if(typeof v=="string"){const A=await gf(e,{idToken:v}).catch(()=>{});if(!A)break;w=await Gs._fromGetAccountInfoResponse(e,A,v)}else w=Gs._fromJSON(e,v);y!==c&&(g=w),c=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new ml(c,e,r):(c=p[0],g&&await c._set(u,g.toJSON()),await Promise.all(t.map(async y=>{if(y!==c)try{await y._remove(u)}catch{}})),new ml(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UT(e))return"Blackberry";if(LT(e))return"Webos";if(OT(e))return"Safari";if((e.includes("chrome/")||VT(e))&&!e.includes("edge/"))return"Chrome";if(PT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function MT(i=wn()){return/firefox\//i.test(i)}function OT(i=wn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VT(i=wn()){return/crios\//i.test(i)}function zT(i=wn()){return/iemobile/i.test(i)}function PT(i=wn()){return/android/i.test(i)}function UT(i=wn()){return/blackberry/i.test(i)}function LT(i=wn()){return/webos/i.test(i)}function t0(i=wn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function $D(i=wn()){var e;return t0(i)&&!!((e=window.navigator)!=null&&e.standalone)}function QD(){return EA()&&document.documentMode===10}function BT(i=wn()){return t0(i)||PT(i)||LT(i)||UT(i)||/windows phone/i.test(i)||zT(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(i,e=[]){let t;switch(i){case"Browser":t=M1(wn());break;case"Worker":t=`${M1(wn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${jl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=c=>new Promise((u,g)=>{try{const p=e(c);u(p)}catch(p){g(p)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(i,e={}){return ti(i,"GET","/v2/passwordPolicy",ei(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=6;class JD{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??WD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new O1(this),this.idTokenSubscription=new O1(this),this.beforeStateQueue=new YD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Hr(t)),this._initializationPromise=this.queue(async()=>{var r,o,c;if(!this._deleted&&(this.persistenceManager=await ml.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gf(this,{idToken:e}),r=await Gs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(fs(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(g,g))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(c=this.redirectUser)==null?void 0:c._redirectEventId,g=r==null?void 0:r._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===g)&&(p!=null&&p.user)&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fs(this.app))return Promise.reject(Kr(this));const t=e?nn(e):null;return t&&Xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fs(this.app)?Promise.reject(Kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fs(this.app)?Promise.reject(Kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XD(this),t=new JD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Du("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await KD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Hr(e)||this._popupRedirectResolver;Xe(t,this,"argument-error"),this.redirectPersistenceManager=await ml.create(this,[Hr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let u=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xe(g,this,"internal-error"),g.then(()=>{u||c(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(fs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&ID(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ni(i){return nn(i)}class O1{constructor(e){this.auth=e,this.observer=null,this.addObserver=CA(t=>this.observer=t)}get next(){return Xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ej(i){Hf=i}function FT(i){return Hf.loadJS(i)}function tj(){return Hf.recaptchaEnterpriseScript}function nj(){return Hf.gapiScript}function sj(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class rj{constructor(){this.enterprise=new ij}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ij{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const aj="recaptcha-enterprise",HT="NO_RECAPTCHA";class oj{constructor(e){this.type=aj,this.auth=ni(e)}async verify(e="verify",t=!1){async function r(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,g)=>{PD(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new zD(p);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,u(y.siteKey)}}).catch(p=>{g(p)})})}function o(c,u,g){const p=window.grecaptcha;R1(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:e}).then(y=>{u(y)}).catch(()=>{u(HT)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new rj().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{r(this.auth).then(g=>{if(!t&&R1(window.grecaptcha))o(g,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=tj();p.length!==0&&(p+=g),FT(p).then(()=>{o(g,c,u)}).catch(y=>{u(y)})}}).catch(g=>{u(g)})})}}async function V1(i,e,t,r=!1,o=!1){const c=new oj(i);let u;if(o)u=HT;else try{u=await c.verify(t)}catch{u=await c.verify(t,!0)}const g={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return r?Object.assign(g,{captchaResp:u}):Object.assign(g,{captchaResponse:u}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function yf(i,e,t,r,o){var c;if((c=i._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await V1(i,e,t,t==="getOobCode");return r(i,u)}else return r(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await V1(i,e,t,t==="getOobCode");return r(i,g)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(i,e){const t=Xp(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(Ka(c,e??{}))return o;js(o,"already-initialized")}return t.initialize({options:e})}function cj(i,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Hr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uj(i,e,t){const r=ni(i);Xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=GT(e),{host:u,port:g}=hj(e),p=g===null?"":`:${g}`,y={url:`${c}//${u}${p}/`},v=Object.freeze({host:u,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Xe(Ka(y,r.config.emulator)&&Ka(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Dl(u)?(lw(`${c}//${u}${p}`),cw("Auth",!0)):dj()}function GT(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function hj(i){const e=GT(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:z1(r.substr(c.length+1))}}else{const[c,u]=r.split(":");return{host:c,port:z1(u)}}}function z1(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function dj(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,t){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}}async function fj(i,e){return ti(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(i,e){return $u(i,"POST","/v1/accounts:signInWithPassword",ei(i,e))}async function gj(i,e){return ti(i,"POST","/v1/accounts:sendOobCode",ei(i,e))}async function pj(i,e){return gj(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yj(i,e){return $u(i,"POST","/v1/accounts:signInWithEmailLink",ei(i,e))}async function _j(i,e){return $u(i,"POST","/v1/accounts:signInWithEmailLink",ei(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends n0{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Nu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Nu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yf(e,t,"signInWithPassword",mj);case"emailLink":return yj(e,{email:this._email,oobCode:this._password});default:js(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yf(e,r,"signUpPassword",fj);case"emailLink":return _j(e,{idToken:t,email:this._email,oobCode:this._password});default:js(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(i,e){return $u(i,"POST","/v1/accounts:signInWithIdp",ei(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj="http://localhost";class so extends n0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):js("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=t;if(!r||!o)return null;const u=new so(r,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return gl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,gl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,gl(e,t)}buildRequest(){const e={requestUri:xj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ju(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vj(i){const e=Yc(Xc(i)).link,t=e?Yc(Xc(e)).deep_link_id:null,r=Yc(Xc(i)).deep_link_id;return(r?Yc(Xc(r)).link:null)||r||t||e||i}class s0{constructor(e){const t=Yc(Xc(e)),r=t.apiKey??null,o=t.oobCode??null,c=bj(t.mode??null);Xe(r&&o&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=vj(e);try{return new s0(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this.providerId=Ul.PROVIDER_ID}static credential(e,t){return Nu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=s0.parseLink(t);return Xe(r,"argument-error"),Nu._fromEmailAndCode(e,r.code,r.tenantId)}}Ul.PROVIDER_ID="password";Ul.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ul.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends r0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Qu{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.FACEBOOK_SIGN_IN_METHOD="facebook.com";Li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return so._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Br.credential(t,r)}catch{return null}}}Br.GOOGLE_SIGN_IN_METHOD="google.com";Br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Qu{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bi.credential(e.oauthAccessToken)}catch{return null}}}Bi.GITHUB_SIGN_IN_METHOD="github.com";Bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Qu{constructor(){super("twitter.com")}static credential(e,t){return so._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return qi.credential(t,r)}catch{return null}}}qi.TWITTER_SIGN_IN_METHOD="twitter.com";qi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wj(i,e){return $u(i,"POST","/v1/accounts:signUp",ei(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const c=await Gs._fromIdTokenResponse(e,r,o),u=P1(r);return new ro({user:c,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=P1(r);return new ro({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function P1(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f extends Wr{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,_f.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new _f(e,t,r,o)}}function KT(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?_f._fromErrorAndOperation(i,c,e,r):c})}async function Ej(i,e,t=!1){const r=await Iu(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return ro._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tj(i,e,t=!1){const{auth:r}=i;if(fs(r.app))return Promise.reject(Kr(r));const o="reauthenticate";try{const c=await Iu(i,KT(r,o,e,i),t);Xe(c.idToken,r,"internal-error");const u=e0(c.idToken);Xe(u,r,"internal-error");const{sub:g}=u;return Xe(i.uid===g,r,"user-mismatch"),ro._forOperation(i,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&js(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $T(i,e,t=!1){if(fs(i.app))return Promise.reject(Kr(i));const r="signIn",o=await KT(i,r,e),c=await ro._fromIdTokenResponse(i,r,o);return t||await i._updateCurrentUser(c.user),c}async function Sj(i,e){return $T(ni(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QT(i){const e=ni(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function U1(i,e,t){const r=ni(i);await yf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",pj)}async function L1(i,e,t){if(fs(i.app))return Promise.reject(Kr(i));const r=ni(i),u=await yf(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wj).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&QT(i),p}),g=await ro._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(g.user),g}function Aj(i,e,t){return fs(i.app)?Promise.reject(Kr(i)):Sj(nn(i),Ul.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&QT(i),r})}function Ij(i,e,t,r){return nn(i).onIdTokenChanged(e,t,r)}function Nj(i,e,t){return nn(i).beforeAuthStateChanged(e,t)}function Cj(i,e,t,r){return nn(i).onAuthStateChanged(e,t,r)}function B1(i){return nn(i).signOut()}const xf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xf,"1"),this.storage.removeItem(xf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=1e3,Dj=10;class XT extends YT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,g,p)=>{this.notifyListeners(u,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},c=this.storage.getItem(r);QD()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Dj):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Rj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}XT.type="LOCAL";const jj=XT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT extends YT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}WT.type="SESSION";const JT=WT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Gf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:c}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const g=Array.from(u).map(async y=>y(t.origin,c)),p=await kj(g);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((g,p)=>{const y=i0("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},r);u={messageChannel:o,onMessage(w){const A=w;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(A.data.response);break;default:clearTimeout(v),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return window}function Oj(i){_r().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(){return typeof _r().WorkerGlobalScope<"u"&&typeof _r().importScripts=="function"}async function Vj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zj(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function Pj(){return ZT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="firebaseLocalStorageDb",Uj=1,bf="firebaseLocalStorage",t2="fbase_key";class Yu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kf(i,e){return i.transaction([bf],e?"readwrite":"readonly").objectStore(bf)}function Lj(){const i=indexedDB.deleteDatabase(e2);return new Yu(i).toPromise()}function Gp(){const i=indexedDB.open(e2,Uj);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(bf,{keyPath:t2})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(bf)?e(r):(r.close(),await Lj(),e(await Gp()))})})}async function q1(i,e,t){const r=Kf(i,!0).put({[t2]:e,value:t});return new Yu(r).toPromise()}async function Bj(i,e){const t=Kf(i,!1).get(e),r=await new Yu(t).toPromise();return r===void 0?null:r.value}function F1(i,e){const t=Kf(i,!0).delete(e);return new Yu(t).toPromise()}const qj=800,Fj=3;class n2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Fj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gf._getInstance(Pj()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await Vj(),!this.activeServiceWorker)return;this.sender=new Mj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gp();return await q1(e,xf,"1"),await F1(e,xf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>q1(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Bj(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>F1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Kf(o,!1).getAll();return new Yu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}n2.type="LOCAL";const Hj=n2;new Ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(i,e){return e?Hr(e):(Xe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0 extends n0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return gl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return gl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Gj(i){return $T(i.auth,new a0(i),i.bypassAuthState)}function Kj(i){const{auth:e,user:t}=i;return Xe(t,e,"internal-error"),Tj(t,new a0(i),i.bypassAuthState)}async function $j(i){const{auth:e,user:t}=i;return Xe(t,e,"internal-error"),Ej(t,new a0(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,t,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:c,error:u,type:g}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gj;case"linkViaPopup":case"linkViaRedirect":return $j;case"reauthViaPopup":case"reauthViaRedirect":return Kj;default:js(this.auth,"internal-error")}}resolve(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=new Ku(2e3,1e4);async function Yj(i,e,t){if(fs(i.app))return Promise.reject($s(i,"operation-not-supported-in-this-environment"));const r=ni(i);ND(i,e,r0);const o=s2(r,t);return new Ba(r,"signInViaPopup",e,o).executeNotNull()}class Ba extends r2{constructor(e,t,r,o,c){super(e,t,o,c),this.provider=r,this.authWindow=null,this.pollId=null,Ba.currentPopupAction&&Ba.currentPopupAction.cancel(),Ba.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xe(e,this.auth,"internal-error"),e}async onExecution(){Xr(this.filter.length===1,"Popup operations only handle one event");const e=i0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject($s(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject($s(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ba.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($s(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Qj.get())};e()}}Ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj="pendingRedirect",$d=new Map;class Wj extends r2{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=$d.get(this.auth._key());if(!e){try{const r=await Jj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}$d.set(this.auth._key(),e)}return this.bypassAuthState||$d.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Jj(i,e){const t=t4(e),r=e4(i);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function Zj(i,e){$d.set(i._key(),e)}function e4(i){return Hr(i._redirectPersistence)}function t4(i){return Kd(Xj,i.config.apiKey,i.name)}async function n4(i,e,t=!1){if(fs(i.app))return Promise.reject(Kr(i));const r=ni(i),o=s2(r,e),u=await new Wj(r,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=600*1e3;class r4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!i4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!i2(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError($s(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=s4&&this.cachedEventUids.clear(),this.cachedEventUids.has(H1(e))}saveEventToCache(e){this.cachedEventUids.add(H1(e)),this.lastProcessedEventTime=Date.now()}}function H1(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function i2({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function i4(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return i2(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a4(i,e={}){return ti(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l4=/^https?/;async function c4(i){if(i.config.emulator)return;const{authorizedDomains:e}=await a4(i);for(const t of e)try{if(u4(t))return}catch{}js(i,"unauthorized-domain")}function u4(i){const e=Fp(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!l4.test(t))return!1;if(o4.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=new Ku(3e4,6e4);function G1(){const i=_r().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function d4(i){return new Promise((e,t)=>{var o,c,u;function r(){G1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{G1(),t($s(i,"network-request-failed"))},timeout:h4.get()})}if((c=(o=_r().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((u=_r().gapi)!=null&&u.load)r();else{const g=sj("iframefcb");return _r()[g]=()=>{gapi.load?r():t($s(i,"network-request-failed"))},FT(`${nj()}?onload=${g}`).catch(p=>t(p))}}).catch(e=>{throw Qd=null,e})}let Qd=null;function f4(i){return Qd=Qd||d4(i),Qd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=new Ku(5e3,15e3),g4="__/auth/iframe",p4="emulator/auth/iframe",y4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function x4(i){const e=i.config;Xe(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Zy(e,p4):`https://${i.config.authDomain}/${g4}`,r={apiKey:e.apiKey,appName:i.name,v:jl},o=_4.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${t}?${ju(r).slice(1)}`}async function b4(i){const e=await f4(i),t=_r().gapi;return Xe(t,i,"internal-error"),e.open({where:document.body,url:x4(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:y4,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const u=$s(i,"network-request-failed"),g=_r().setTimeout(()=>{c(u)},m4.get());function p(){_r().clearTimeout(g),o(r)}r.ping(p).then(p,()=>{c(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},w4=500,E4=600,T4="_blank",S4="http://localhost";class K1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A4(i,e,t,r=w4,o=E4){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const p={...v4,width:r.toString(),height:o.toString(),top:c,left:u},y=wn().toLowerCase();t&&(g=VT(y)?T4:t),MT(y)&&(e=e||S4,p.scrollbars="yes");const v=Object.entries(p).reduce((A,[j,U])=>`${A}${j}=${U},`,"");if($D(y)&&g!=="_self")return I4(e||"",g),new K1(null);const w=window.open(e||"",g,v);Xe(w,i,"popup-blocked");try{w.focus()}catch{}return new K1(w)}function I4(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4="__/auth/handler",C4="emulator/auth/handler",R4=encodeURIComponent("fac");async function $1(i,e,t,r,o,c){Xe(i.config.authDomain,i,"auth-domain-config-required"),Xe(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:jl,eventId:o};if(e instanceof r0){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",NA(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))u[v]=w}if(e instanceof Qu){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(u.scopes=v.join(","))}i.tenantId&&(u.tid=i.tenantId);const g=u;for(const v of Object.keys(g))g[v]===void 0&&delete g[v];const p=await i._getAppCheckToken(),y=p?`#${R4}=${encodeURIComponent(p)}`:"";return`${D4(i)}?${ju(g).slice(1)}${y}`}function D4({config:i}){return i.emulator?Zy(i,C4):`https://${i.authDomain}/${N4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="webStorageSupport";class j4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JT,this._completeRedirectFn=n4,this._overrideRedirectResult=Zj}async _openPopup(e,t,r,o){var u;Xr((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const c=await $1(e,t,r,Fp(),o);return A4(e,c,i0())}async _openRedirect(e,t,r,o){await this._originValidation(e);const c=await $1(e,t,r,Fp(),o);return Oj(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(Xr(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await b4(e),r=new r4(e);return t.register("authEvent",o=>(Xe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(lp,{type:lp},o=>{var u;const c=(u=o==null?void 0:o[0])==null?void 0:u[lp];c!==void 0&&t(!!c),js(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=c4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return BT()||OT()||t0()}}const k4=j4;var Q1="@firebase/auth",Y1="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function V4(i){pl(new $a("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:g}=r.options;Xe(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:u,authDomain:g,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qT(i)},y=new ZD(r,o,c,p);return cj(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),pl(new $a("auth-internal",e=>{const t=ni(e.getProvider("auth").getImmediate());return(r=>new M4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$i(Q1,Y1,O4(i)),$i(Q1,Y1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=300,P4=ow("authIdTokenMaxAge")||z4;let X1=null;const U4=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>P4)return;const o=t==null?void 0:t.token;X1!==o&&(X1=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function a2(i=Jp()){const e=Xp(i,"auth");if(e.isInitialized())return e.getImmediate();const t=lj(i,{popupRedirectResolver:k4,persistence:[Hj,jj,JT]}),r=ow("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const u=U4(c.toString());Nj(t,u,()=>u(t.currentUser)),Ij(t,g=>u(g))}}const o=iw("auth");return o&&uj(t,`http://${o}`),t}function L4(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}ej({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=$s("internal-error");c.customData=o,t(c)},r.type="text/javascript",r.charset="UTF-8",L4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});V4("Browser");const o2={apiKey:"AIzaSyCXEXVv1ndYULRxjR6ZOfy3t19RgLUvvfU",authDomain:"yoga-pwa-158e2.firebaseapp.com",projectId:"yoga-pwa-158e2",storageBucket:"yoga-pwa-158e2.firebasestorage.app",messagingSenderId:"411698774220",appId:"1:411698774220:web:4a7e9760e6a1d39504c269",measurementId:"G-2LSMZXCKTE"},l2=CI().length>0?Jp():Wp(o2),rt=cD(l2),ja=a2(l2),B4=new Br;uD(rt).catch(i=>{i.code=="failed-precondition"?console.warn("Firestore persistence failed: Multiple tabs open"):i.code=="unimplemented"&&console.warn("Firestore persistence failed: Not supported")});const dr={CURRENT_USER_ID:"zenflow_current_user_id_v2",LOCAL_CLASSES:"zenflow_local_classes_backup",LOCAL_INSTRUCTORS:"zenflow_local_instructors_backup",LOCAL_USERS:"zenflow_local_users_backup",LOCAL_LOGO:"zenflow_local_logo",LOCAL_BG:"zenflow_local_bg"},Dd={id:"guest",name:"",role:yt.GUEST,avatarUrl:"",username:"guest"},c2=te.createContext(void 0),ks=()=>{const i=te.useContext(c2);if(!i)throw new Error("useApp must be used within an AppProvider");return i},jd=(i,e)=>{const t=new Set(e);let r=1;for(;t.has(`${i}${r}`);)r++;return`${i}${r}`},q4=(i,e)=>Math.round((i-e)*100)/100,F4=({children:i})=>{const[e,t]=te.useState(Dd),[r,o]=te.useState(!1),[c,u]=te.useState([]),[g,p]=te.useState([]),[y,v]=te.useState(!1),[w,A]=te.useState([]),[j,U]=te.useState([]),[q,P]=te.useState(()=>{try{return localStorage.getItem(dr.LOCAL_LOGO)}catch{return null}}),[ie,ve]=te.useState(()=>{try{return localStorage.getItem(dr.LOCAL_BG)}catch{return null}}),[be,he]=te.useState(!0),[we,de]=te.useState("firebase"),N=j.filter($=>$.role===yt.STUDENT),R=[...c,...g],C=($,ee)=>{try{localStorage.setItem($,JSON.stringify(ee))}catch(Z){console.error(Z)}},k=$=>{try{return JSON.parse(localStorage.getItem($)||"[]")}catch{return[]}};te.useEffect(()=>{const $=Cj(ja,async ee=>{if(ee)try{const Z=Rt(rt,"users",ee.uid),xe=await I1(Z);if(xe.exists()){const Te=xe.data();t({...Te,id:ee.uid})}else t(Dd)}catch(Z){console.error("Error fetching user profile:",Z)}else t(Dd)});return()=>$()},[]);const I=async()=>{if(!y)try{const $=E1(Nd(rt,"classes"),T1("archived","==",!0)),Z=(await vD($)).docs.map(xe=>({...xe.data(),id:xe.id}));p(Z),v(!0)}catch($){console.error("Error fetching archived classes:",$)}},O=async $=>{y||await I();const ee=new Date;ee.setMonth(ee.getMonth()-$);const Z=ue(ee);let xe=0,Te=0;const Re=g.filter(Le=>{const Ne=Le.archivedAt||Le.createdAt;return Ne?Ne<Z:!1});try{for(let De=0;De<Re.length;De+=400){const Fe=Re.slice(De,De+400),ke=Qc(rt);Fe.forEach(Qe=>ke.delete(Rt(rt,"classes",Qe.id))),await ke.commit(),xe+=Fe.length}let Ne=0,lt=Qc(rt);for(const De of c){let Fe=!1;const ke={...De.bookings},Qe={...De.substitutions};De.bookings&&Object.keys(De.bookings).forEach(Je=>{if(Je<Z){const Ze=ke[Je].length;delete ke[Je],Te+=Ze,Fe=!0}}),De.substitutions&&Object.keys(De.substitutions).forEach(Je=>{Je<Z&&(delete Qe[Je],Te++,Fe=!0)}),Fe&&(lt.update(Rt(rt,"classes",De.id),{bookings:ke,substitutions:Qe}),Ne++,Ne>=400&&(await lt.commit(),lt=Qc(rt),Ne=0))}Ne>0&&await lt.commit();const pe=new Set(Re.map(De=>De.id));return p(De=>De.filter(Fe=>!pe.has(Fe.id))),{deletedDocs:xe,cleanedRecords:Te}}catch(Le){throw Le}},T=async()=>{const $=ue(new Date),ee=new Set;c.forEach(Ne=>{Ne.bookings&&Object.entries(Ne.bookings).forEach(([lt,pe])=>{lt>=$&&pe.forEach(De=>ee.add(De))})});const Z=j.filter(Ne=>!(Ne.role!==yt.STUDENT||ee.has(Ne.id)||(Ne.credits||0)>0||Ne.membershipType==="UNLIMITED"&&Ne.unlimitedExpiry&&Ne.unlimitedExpiry>=$));if(Z.length===0)return{count:0};const xe=400;let Te=Qc(rt),Re=0,Le=0;for(const Ne of Z)Te.delete(Rt(rt,"users",Ne.id)),Re++,Le++,Re>=xe&&(await Te.commit(),Te=Qc(rt),Re=0);return Re>0&&await Te.commit(),{count:Le}};te.useEffect(()=>{let $,ee,Z;const xe=setTimeout(()=>{he(Te=>Te&&(de("local"),u(Re=>Re.length===0?k(dr.LOCAL_CLASSES):Re),A(Re=>Re.length===0?k(dr.LOCAL_INSTRUCTORS):Re),U(Re=>Re.length===0?k(dr.LOCAL_USERS):Re),!1))},3e3);try{const Te=E1(Nd(rt,"classes"),T1("archived","==",!1));$=Cd(Te,Re=>{const Le=Re.docs.map(Ne=>({...Ne.data(),id:Ne.id}));u(Le),de("firebase"),C(dr.LOCAL_CLASSES,Le),he(!1),clearTimeout(xe)}),ee=Cd(Nd(rt,"instructors"),Re=>{const Le=Re.docs.map(Ne=>({...Ne.data(),id:Ne.id}));A(Le),C(dr.LOCAL_INSTRUCTORS,Le)}),Z=Cd(Rt(rt,"settings","global"),Re=>{if(Re.exists()){const Le=Re.data();Le.logoUrl&&P(Le.logoUrl),Le.backgroundImageUrl&&ve(Le.backgroundImageUrl)}})}catch(Te){console.error("Firebase Init Failed:",Te),he(!1),de("local"),clearTimeout(xe)}return()=>{clearTimeout(xe),$&&$(),ee&&ee(),Z&&Z()}},[]),te.useEffect(()=>{let $;if(e.id!=="guest")try{$=Cd(Nd(rt,"users"),ee=>{const Z=ee.docs.map(xe=>({...xe.data(),id:xe.id}));U(Z),C(dr.LOCAL_USERS,Z)},ee=>{console.warn("Users listener failed (permission?):",ee.message)})}catch(ee){console.error(ee)}else U([]);return()=>{$&&$()}},[e.id]);const ue=$=>{const ee=$.getFullYear(),Z=String($.getMonth()+1).padStart(2,"0"),xe=String($.getDate()).padStart(2,"0");return`${ee}-${Z}-${xe}`},me=($,ee)=>{const Z=new Date,xe=new Date(Z),[Te,Re]=ee.split(":").map(Number);xe.setHours(Te,Re,0,0);const Le=Z.getDay()||7;let Ne=$-Le;return Ne<0?Ne+=7:Ne===0&&Z.getTime()>xe.getTime()&&(Ne=7),xe.setDate(Z.getDate()+Ne),xe},V=($,ee)=>null,W=async($,ee)=>{try{return await Aj(ja,$,ee),!0}catch(Z){return console.error("Login Error:",Z.code,Z.message),!1}},re=async()=>{try{const ee=(await Yj(ja,B4)).user,Z=Rt(rt,"users",ee.uid);return(await I1(Z)).exists()?{status:"SUCCESS"}:{status:"NEEDS_PHONE"}}catch($){return console.error("Google Auth Error:",$),{status:"ERROR",message:$.message}}},ye=async $=>{var Z;const ee=ja.currentUser;if(!ee)return{success:!1,message:"Google "};try{const xe={id:ee.uid,name:ee.displayName||"Google User",email:ee.email||"",username:((Z=ee.email)==null?void 0:Z.split("@")[0])||ee.uid.slice(0,8),role:yt.STUDENT,avatarUrl:ee.photoURL||"",phoneNumber:$,membershipType:"CREDIT",credits:0,hasPaid:!1,mustChangePassword:!1,unlimitedExpiry:""};return await Lr(Rt(rt,"users",ee.uid),xe),t(xe),{success:!0}}catch(xe){return console.error("Register Google User Error:",xe),{success:!1,message:xe.message}}},ge=async()=>{try{await B1(ja),t(Dd)}catch($){console.error("Logout Error:",$)}},D=async $=>{var xe;const ee=(xe=$.email)==null?void 0:xe.trim(),Z=$.password;if(!ee||!Z)return{success:!1,message:" Email "};try{const Re=(await L1(ja,ee,Z)).user.uid,Le={id:Re,name:$.name||"",email:ee,username:ee.split("@")[0],role:yt.STUDENT,avatarUrl:$.avatarUrl||"",phoneNumber:$.phoneNumber||"",membershipType:"CREDIT",credits:0,hasPaid:!1,mustChangePassword:!1,unlimitedExpiry:""};return await Lr(Rt(rt,"users",Re),Le),{success:!0}}catch(Te){return console.error("Registration Error:",Te),Te.code==="auth/email-already-in-use"?{success:!1,message:" Email "}:Te.code==="auth/weak-password"?{success:!1,message:" (6)"}:{success:!1,message:""}}},B=async($,ee,Z)=>{let xe;try{xe=Wp(o2,"SecondaryApp");const Te=a2(xe),Le=(await L1(Te,$,ee)).user.uid,Ne={id:Le,name:Z.name||"",email:$,username:$.split("@")[0],role:yt.STUDENT,avatarUrl:Z.avatarUrl||"",phoneNumber:Z.phoneNumber||"",membershipType:"CREDIT",credits:Z.credits||0,hasPaid:!1,unlimitedExpiry:Z.unlimitedExpiry||""};return await Lr(Rt(rt,"users",Le),Ne),await U1(Te,$),await B1(Te),{success:!0}}catch(Te){return console.error("Admin Create Student Error:",Te),Te.code==="auth/email-already-in-use"?{success:!1,message:" Email "}:{success:!1,message:Te.message||""}}finally{xe&&await RI(xe)}},J=async $=>{if(!e||e.role===yt.GUEST)return!1;const ee="8388670225:AAGCEsH6-abLCLoDxaITFBHINkbsk5TciAU",Z="6106837288",xe=`https://api.telegram.org/bot${ee}/sendMessage`,Te=` **
----------------
${e.name}
ID${e.id}
Email${e.email||"-"}
${$}
----------------
`;try{return(await fetch(xe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:Z,text:Te,parse_mode:"Markdown"})})).ok}catch{return!1}},fe=te.useCallback(($,ee,Z,xe,Te,Re)=>{var Fe;const Le=ke=>{const[Qe,Je]=ke.split(":").map(Number);return Qe*60+Je},Ne=Le(Z),lt=Ne+xe,pe=Re?ue(Re):null,De=c.filter(ke=>!(ke.id===Te||Number(ke.dayOfWeek)!==ee));for(const ke of De){const Qe=Le(ke.startTimeStr),Je=Qe+ke.durationMinutes;if(!(Ne<Je&&lt>Qe))continue;let vt=ke.instructorId;if(pe?(Fe=ke.substitutions)!=null&&Fe[pe]&&(vt=ke.substitutions[pe]):vt=ke.instructorId,vt===$)return{conflict:!0,className:ke.title,time:`${ke.startTimeStr}`}}return{conflict:!1}},[c]),ce=async($,ee,Z)=>{const xe=ee||e.id,Te=j.find(Ze=>Ze.id===xe),Re=c.find(Ze=>Ze.id===$);if(!Te||!Re)return{success:!1,message:"User or Class not found"};const Le=Z||me(Re.dayOfWeek,Re.startTimeStr),Ne=ue(Le),lt=new Date(Le);lt.setHours(9,0,0,0),lt.setDate(lt.getDate()-2);const pe=new Date;if(e.role===yt.STUDENT&&pe<lt)return{success:!1,message:""};if(Te.role===yt.STUDENT){const Ze=e.role===yt.ADMIN,vt=Te.membershipType||"CREDIT",wt=Re.pointsCost??1;if(vt==="UNLIMITED")if(Te.unlimitedExpiry){if(Te.unlimitedExpiry<Ne)if(Ze){if(!window.confirm(`  ${Te.unlimitedExpiry}  ${Ne} 

`))return{success:!1,message:"Cancelled"}}else return{success:!1,message:` ${Te.unlimitedExpiry} `}}else if(Ze){if(!window.confirm(` 

`))return{success:!1,message:"Cancelled"}}else return{success:!1,message:""};else{const qt=Te.credits||0;if(qt<wt)if(Ze){if(!window.confirm(`  (: ${qt}, : ${wt})

`))return{success:!1,message:"Cancelled"}}else return{success:!1,message:`
(: ${qt}  / : ${wt} )`}}}const De=Ze=>{const[vt,wt]=Ze.split(":").map(Number);return vt*60+wt},Fe=De(Re.startTimeStr),ke=Fe+Re.durationMinutes,Je=c.filter(Ze=>{var wt;return(((wt=Ze.bookings)==null?void 0:wt[Ne])||[]).includes(xe)}).find(Ze=>{if(Ze.id===Re.id)return!1;const vt=De(Ze.startTimeStr),wt=vt+Ze.durationMinutes;return Fe<wt&&ke>vt});if(Je)return{success:!1,message:` 

 ${Ne} 
${Je.title}`};try{const Ze=Rt(rt,"classes",$),vt=Rt(rt,"users",xe);return await ap(rt,async wt=>{const qt=await wt.get(Ze);let ln=null;if(Te.role===yt.STUDENT&&(Te.membershipType||"CREDIT")==="CREDIT"&&(ln=wt.get(vt)),!qt.exists())throw"Class does not exist!";let xt=ln?await ln:null;if(ln&&!(xt!=null&&xt.exists()))throw"User does not exist!";const sn=qt.data(),Hn=(sn.bookings||{})[Ne]||[];if(Hn.includes(xe))return;if(Hn.length>=sn.capacity)throw"";let si=-1;if(xt){const ys=xt.data().credits||0,br=Re.pointsCost??1;if(si=q4(ys,br),si<0)throw""}wt.update(Ze,{[`bookings.${Ne}`]:[...Hn,xe]}),xt&&si>=0&&wt.update(vt,{credits:si})}),{success:!0}}catch(Ze){return console.error("Transaction Error:",Ze),{success:!1,message:typeof Ze=="string"?Ze:""}}},Ce=async($,ee,Z)=>{const xe=ee||e.id,Te=j.find(Ne=>Ne.id===xe),Re=c.find(Ne=>Ne.id===$);if(!Re||!Z)return;const Le=ue(Z);if(e.role===yt.STUDENT){const Ne=new Date,[lt,pe]=Re.startTimeStr.split(":").map(Number),De=new Date(Z);if(De.setHours(lt,pe,0,0),Ne>De){alert(" ");return}}try{const Ne=Rt(rt,"classes",$),lt=Rt(rt,"users",xe);await ap(rt,async pe=>{const De=await pe.get(Ne);let Fe=null;if(Te&&Te.role===yt.STUDENT&&(Te.membershipType||"CREDIT")==="CREDIT"&&(Fe=pe.get(lt)),!De.exists())return;let ke=Fe?await Fe:null;const Ze=(De.data().bookings||{})[Le]||[];if(!Ze.includes(xe))return;let vt=-1;if(ke&&ke.exists()){const qt=ke.data().credits||0,ln=Re.pointsCost??1;vt=Math.round((qt+ln)*100)/100}pe.update(Ne,{[`bookings.${Le}`]:Ze.filter(wt=>wt!==xe)}),ke&&vt>=0&&pe.update(lt,{credits:vt})})}catch(Ne){console.error("Cancel Error:",Ne)}},He=async $=>{const ee=[...c,...g].map(Te=>Te.id),Z=jd("class",ee),xe={...$,id:Z,title:$.title||"",description:$.description||"",dayOfWeek:Number($.dayOfWeek)||1,startTimeStr:$.startTimeStr||"10:00",durationMinutes:Number($.durationMinutes)||60,capacity:Number($.capacity)||20,pointsCost:Number($.pointsCost)??1,bookings:{},enrolledUserIds:[],createdAt:ue(new Date),archived:!1,substitutions:{}};try{await Lr(Rt(rt,"classes",Z),xe)}catch(Te){console.error(Te)}},it=async($,ee)=>{const Z=c.find(Te=>Te.id===$);if(!Z)return;if(ee.instructorId&&ee.instructorId!==Z.instructorId){const Te=new Date;Te.setDate(Te.getDate()-1),await sl(Rt(rt,"classes",$),{archived:!0,archivedAt:ue(Te)});const Re=[...c,...g].map(lt=>lt.id),Le=jd("class",Re),Ne={...Z,...ee,id:Le,createdAt:ue(new Date),archived:!1,archivedAt:null,bookings:{},enrolledUserIds:[],substitutions:{}};await Lr(Rt(rt,"classes",Le),Ne)}else await sl(Rt(rt,"classes",$),ee)},at=async $=>{await sl(Rt(rt,"classes",$),{archived:!0,archivedAt:ue(new Date)})},Lt=async $=>{try{await ap(rt,async ee=>{const Z=Rt(rt,"classes",$),xe=await ee.get(Z);if(!xe.exists())throw"Class not found";const Te=xe.data(),Re=Te.bookings||{},Le=Te.pointsCost??1,Ne=ue(new Date),lt=new Map;if(Object.entries(Re).forEach(([ke,Qe])=>{ke>=Ne&&Qe.forEach(Je=>{const Ze=lt.get(Je)||0;lt.set(Je,Ze+Le)})}),lt.size===0){ee.update(Z,{archived:!0,archivedAt:Ne});return}const pe=Array.from(lt.keys()),De=pe.map(ke=>Rt(rt,"users",ke));(await Promise.all(De.map(ke=>ee.get(ke)))).forEach((ke,Qe)=>{if(ke.exists()){const Je=ke.data();if((Je.membershipType||"CREDIT")==="CREDIT"){const Ze=Je.credits||0,vt=lt.get(pe[Qe])||0,wt=Math.round((Ze+vt)*100)/100;ee.update(De[Qe],{credits:wt})}}}),ee.update(Z,{archived:!0,archivedAt:Ne})})}catch(ee){throw ee}},Bt=async($,ee,Z,xe)=>{xe||await it($,{instructorId:ee})},Zt=$=>{const ee=w.map(Te=>Te.id),Z=jd("instructor",ee),xe={id:Z,name:$.name||"New Instructor",bio:$.bio||"",imageUrl:$.imageUrl||"",defaultRate:$.defaultRate||800,...$};try{Lr(Rt(rt,"instructors",Z),xe)}catch{}return Z},Tn=($,ee)=>{try{sl(Rt(rt,"instructors",$),ee)}catch{}},Pt=$=>{try{N1(Rt(rt,"instructors",$))}catch{}},oe=$=>{const ee=$.username||`user${Date.now()}`,Z=j.map(Re=>Re.id),xe=jd("student",Z),Te={id:xe,role:yt.STUDENT,avatarUrl:$.avatarUrl||"",hasPaid:!1,membershipType:$.membershipType||"CREDIT",credits:$.credits||0,unlimitedExpiry:$.unlimitedExpiry||"",username:ee,name:$.name||"",phoneNumber:$.phoneNumber||"",email:$.email||""};try{Lr(Rt(rt,"users",xe),Te)}catch(Re){return console.error("Add Student Error:",Re),""}return xe},Ve=async($,ee)=>{try{await sl(Rt(rt,"users",$),ee)}catch(Z){throw Z}},Me=async($,ee)=>{try{await sl(Rt(rt,"users",$),ee)}catch(Z){throw Z}},Ye=async $=>{try{P($),localStorage.setItem(dr.LOCAL_LOGO,$),await Lr(Rt(rt,"settings","global"),{logoUrl:$},{merge:!0})}catch(ee){console.error(ee)}},Ge=async $=>{try{ve($),localStorage.setItem(dr.LOCAL_BG,$),await Lr(Rt(rt,"settings","global"),{backgroundImageUrl:$},{merge:!0})}catch(ee){console.error(ee)}},_e=async $=>{const ee=j.find(Z=>Z.id===$);try{await N1(Rt(rt,"users",$));let Z="";return ee!=null&&ee.email?Z=`

( Firebase Auth  (${ee.email})  Firebase Console  Email)`:Z="",{success:!0,message:Z}}catch(Z){return console.error("Firestore deletion failed:",Z),{success:!1,message:""}}},Ke=async $=>{const ee=j.find(Z=>Z.id===$);if(ee){if(!ee.email){alert(` Email
 Email`);return}try{await U1(ja,ee.email),alert(` 

${ee.email}
`)}catch(Z){console.error("Password Reset Error",Z),Z.code==="auth/user-not-found"?alert(`  Email 

 App `):Z.code==="auth/invalid-email"?alert(" Email "):alert(" "+Z.message)}}};return d.jsx(c2.Provider,{value:{currentUser:e,classes:c,allClassesHistory:R,instructors:w,students:N,appLogo:q,appBackgroundImage:ie,login:W,logout:ge,validateUser:V,isLoginModalOpen:r,setLoginModalOpen:o,registerStudent:D,bookClass:ce,cancelClass:Ce,addClass:He,updateClass:it,deleteClass:at,deleteClassWithRefund:Lt,updateClassInstructor:Bt,addInstructor:Zt,updateInstructor:Tn,deleteInstructor:Pt,addStudent:oe,updateStudent:Ve,updateUser:Me,deleteStudent:_e,resetStudentPassword:Ke,updateAppLogo:Ye,updateAppBackgroundImage:Ge,getNextClassDate:me,formatDateKey:ue,checkInstructorConflict:fe,isLoading:be,dataSource:we,fetchArchivedClasses:I,pruneArchivedClasses:O,cleanupInactiveStudents:T,notifyAdminPayment:J,adminCreateStudent:B,loginWithGoogle:re,registerGoogleUser:ye},children:i})};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),G4=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),W1=i=>{const e=G4(i);return e.charAt(0).toUpperCase()+e.slice(1)},u2=(...i)=>i.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),K4=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=te.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:c,iconNode:u,...g},p)=>te.createElement("svg",{ref:p,...$4,width:e,height:e,stroke:i,strokeWidth:r?Number(t)*24/Number(e):t,className:u2("lucide",o),...!c&&!K4(g)&&{"aria-hidden":"true"},...g},[...u.map(([y,v])=>te.createElement(y,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(i,e)=>{const t=te.forwardRef(({className:r,...o},c)=>te.createElement(Q4,{ref:c,iconNode:e,className:u2(`lucide-${H4(W1(i))}`,`lucide-${i}`,r),...o}));return t.displayName=W1(i),t};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],X4=Pe("arrow-right",Y4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],J4=Pe("bell-off",W4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],h2=Pe("calculator",Z4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],tk=Pe("calendar-days",ek);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ll=Pe("calendar",nk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Xu=Pe("camera",sk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],ik=Pe("chart-no-axes-column-increasing",rk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Cu=Pe("check",ak);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],o0=Pe("chevron-down",ok);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],l0=Pe("chevron-right",lk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],c0=Pe("chevron-left",ck);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],hk=Pe("chevron-up",uk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"M10.88 21.94 15.46 14",key:"xkve6t"}],["path",{d:"M21.17 8H12",key:"19dcdn"}],["path",{d:"M3.95 6.06 8.54 14",key:"g8jz9m"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],fk=Pe("chromium",dk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],io=Pe("circle-alert",mk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vf=Pe("circle-check-big",gk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],yk=Pe("circle-plus",pk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],xk=Pe("circle-user",_k);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],d2=Pe("clock",bk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Rl=Pe("coins",vk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Kp=Pe("copy",wk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],u0=Pe("credit-card",Ek);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Sk=Pe("database",Tk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ik=Pe("dollar-sign",Ak);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ru=Pe("download",Nk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["path",{d:"M10.65 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v10.1",key:"1a2hbp"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m10 15 1 1",key:"1h4vmv"}],["path",{d:"m11 14-4.586 4.586",key:"maylof"}],["circle",{cx:"5",cy:"20",r:"2",key:"860zyv"}]],Rk=Pe("file-key",Ck);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],jk=Pe("file-spreadsheet",Dk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],cp=Pe("file-text",kk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Ok=Pe("globe",Mk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],h0=Pe("history",Vk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Pk=Pe("image",zk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]],f2=Pe("infinity",Uk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],Bk=Pe("key-round",Lk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Fk=Pe("layout-grid",qk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Gk=Pe("list",Hk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vn=Pe("loader-circle",Kk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Qk=Pe("lock",$k);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Xk=Pe("log-in",Yk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Jk=Pe("log-out",Wk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],m2=Pe("mail",Zk);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],d0=Pe("map-pin",e3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],g2=Pe("message-square",t3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],s3=Pe("pen",n3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],i3=Pe("pencil",r3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],o3=Pe("phone-off",a3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ao=Pe("phone",l3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],p2=Pe("plus",c3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],h3=Pe("rotate-ccw",u3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Wu=Pe("save",d3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],f0=Pe("search",f3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],y2=Pe("send",m3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],J1=Pe("settings",g3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],y3=Pe("table",p3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],na=Pe("trash-2",_3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],up=Pe("triangle-alert",x3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Bn=Pe("user-cog",b3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],w3=Pe("user-minus",v3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],m0=Pe("user-plus",E3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],qa=Pe("user",T3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ju=Pe("users",S3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],I3=Pe("wifi-off",A3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],C3=Pe("wrench",N3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ns=Pe("x",R3);let ul;window.addEventListener("beforeinstallprompt",i=>{i.preventDefault(),ul=i});const D3=({isOpen:i,onClose:e})=>{const{login:t,registerStudent:r,loginWithGoogle:o,registerGoogleUser:c,logout:u}=ks(),[g,p]=te.useState("LOGIN"),[y,v]=te.useState(""),[w,A]=te.useState(""),[j,U]=te.useState(""),[q,P]=te.useState(!1),[ie,ve]=te.useState(""),[be,he]=te.useState(""),[we,de]=te.useState(""),[N,R]=te.useState(""),[C,k]=te.useState(""),[I,O]=te.useState(""),[T,ue]=te.useState(!1),me=/Line\//i.test(navigator.userAgent);te.useEffect(()=>{i&&(p("LOGIN"),v(""),A(""),U(""),ve(""),he(""),de(""),R(""),k(""),O(""),P(!1),ul&&ue(!0))},[i]);const V=()=>{g==="GOOGLE_PHONE"&&u(),e()};if(!i)return null;const W=async()=>{if(ul){ul.prompt();const{outcome:ce}=await ul.userChoice;ce==="accepted"&&(ul=null,ue(!1))}},re=async ce=>{ce.preventDefault(),P(!0);const Ce=await t(y,w);P(!1),Ce?e():U("Email ")},ye=async ce=>{if(ce.preventDefault(),U(""),N!==C){U("");return}if(N.length<6){U(" 6 ");return}if(!ie||!we){U("");return}P(!0);const Ce=await r({name:ie,phoneNumber:be,email:we,password:N});P(!1),Ce.success?e():U(Ce.message||"")},ge=async()=>{P(!0),U("");const ce=await o();P(!1),ce.status==="SUCCESS"?e():ce.status==="NEEDS_PHONE"?p("GOOGLE_PHONE"):U(ce.message||"Google ")},D=async ce=>{if(ce.preventDefault(),!I.trim()){U("");return}P(!0);const Ce=await c(I);P(!1),Ce.success?e():U(Ce.message||"")},B=({text:ce})=>d.jsxs("button",{type:"button",onClick:ge,disabled:q,className:"w-full bg-white border border-gray-300 text-gray-700 font-bold py-3.5 rounded-xl hover:bg-gray-50 transition-all active:scale-95 flex items-center justify-center gap-3 shadow-sm",children:[d.jsx("div",{className:"w-5 h-5",children:d.jsxs("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),d.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),d.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),d.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]})}),ce]}),J=()=>{const ce=()=>{const Ce=window.location.href;if(Ce.includes("openExternalBrowser=1"))return;const He=Ce.includes("?")?"&":"?";window.location.href=`${Ce}${He}openExternalBrowser=1`};return d.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4 text-center space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500 text-xs font-bold",children:[d.jsx(Ok,{size:14}),d.jsx("span",{children:"Google  LINE "})]}),d.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Google ",d.jsx("br",{}),""]}),d.jsxs("button",{type:"button",onClick:ce,className:"w-full bg-blue-600 text-white font-bold py-2.5 rounded-lg hover:bg-blue-700 transition-colors text-sm flex items-center justify-center gap-2 shadow-sm",children:[d.jsx(fk,{size:16}),""]})]})},fe=()=>g==="GOOGLE_PHONE"?d.jsxs("form",{onSubmit:D,className:"space-y-4 animate-in slide-in-from-right duration-300",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("h3",{className:"text-xl font-bold text-gray-800",children:""}),d.jsx("p",{className:"text-sm text-gray-500",children:""})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:""}),d.jsxs("div",{className:"relative",children:[d.jsx(ao,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:18}),d.jsx("input",{type:"tel",value:I,onChange:ce=>O(ce.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-zen-500 focus:bg-white focus:outline-none transition-all text-gray-900",placeholder:"09xx...",autoFocus:!0,required:!0})]})]}),j&&d.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 rounded-lg flex items-center gap-2 text-sm text-red-600",children:[d.jsx(io,{size:16}),j]}),d.jsx("button",{type:"submit",disabled:q,className:"w-full bg-zen-600 text-white font-bold py-3.5 rounded-xl hover:bg-zen-700 shadow-lg shadow-zen-200 transition-all mt-4 active:scale-95 disabled:opacity-70 flex items-center justify-center gap-2",children:q?"...":""})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[d.jsxs("button",{onClick:()=>{p("LOGIN"),U("")},className:`flex-1 py-3 text-center font-bold text-sm relative transition-colors ${g==="LOGIN"?"text-zen-600":"text-gray-400 hover:text-gray-600"}`,children:["",g==="LOGIN"&&d.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-zen-600"})]}),d.jsxs("button",{onClick:()=>{p("REGISTER"),U("")},className:`flex-1 py-3 text-center font-bold text-sm relative transition-colors bg-blue-50/50 ${g==="REGISTER"?"text-zen-600 bg-blue-50":"text-gray-400 hover:text-gray-600"}`,children:["",g==="REGISTER"&&d.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-zen-600"}),d.jsx("div",{className:"absolute top-0 right-0 p-1",children:d.jsx(m0,{size:10,className:"text-zen-600 opacity-50"})})]})]}),j&&d.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-100 rounded-lg flex items-center gap-2 text-sm text-red-600",children:[d.jsx(io,{size:16}),j]}),g==="LOGIN"?d.jsxs("form",{onSubmit:re,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Email"}),d.jsxs("div",{className:"relative",children:[d.jsx(m2,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:18}),d.jsx("input",{type:"email",value:y,onChange:ce=>v(ce.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-zen-500 focus:bg-white focus:outline-none transition-all text-gray-900",placeholder:" Email",autoFocus:!0,required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:""}),d.jsxs("div",{className:"relative",children:[d.jsx(Qk,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:18}),d.jsx("input",{type:"password",value:w,onChange:ce=>A(ce.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-zen-500 focus:bg-white focus:outline-none transition-all text-gray-900 font-mono text-sm",placeholder:"",required:!0})]})]}),d.jsx("button",{type:"submit",disabled:q,className:"w-full bg-zen-600 text-white font-bold py-3.5 rounded-xl hover:bg-zen-700 shadow-lg shadow-zen-200 transition-all mt-2 active:scale-95 touch-manipulation flex items-center justify-center gap-2 disabled:opacity-70",children:q?"...":""}),d.jsxs("div",{className:"relative my-6",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-200"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-white text-gray-500 font-medium",children:""})})]}),me?d.jsx(J,{}):d.jsx(B,{text:" Google "}),d.jsx("div",{className:"mt-6 text-center space-y-3",children:T&&d.jsxs("button",{type:"button",onClick:W,className:"inline-flex items-center gap-2 text-xs text-zen-600 font-bold border border-zen-200 px-3 py-1.5 rounded-full hover:bg-zen-50 transition-colors",children:[d.jsx(Ru,{size:14})," App"]})})]}):d.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[d.jsxs("div",{className:"text-center mb-4",children:[d.jsx("h3",{className:"text-xl font-bold text-gray-800",children:""}),d.jsx("p",{className:"text-xs text-gray-500",children:""})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:""}),d.jsx("input",{type:"text",value:ie,onChange:ce=>ve(ce.target.value),className:"w-full px-3 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-zen-500 focus:bg-white focus:outline-none transition-all text-gray-900",placeholder:"",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:""}),d.jsx("input",{type:"tel",value:be,onChange:ce=>he(ce.target.value),className:"w-full px-3 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-zen-500 focus:bg-white focus:outline-none transition-all text-gray-900",placeholder:""})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Email ()"}),d.jsx("input",{type:"email",value:we,onChange:ce=>de(ce.target.value),className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-zen-500 focus:bg-white focus:outline-none transition-all text-gray-900",placeholder:"name@example.com",required:!0})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:""}),d.jsx("input",{type:"password",value:N,onChange:ce=>R(ce.target.value),className:"w-full px-3 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-zen-500 focus:bg-white focus:outline-none transition-all text-gray-900 font-mono text-sm",placeholder:"6",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:""}),d.jsx("input",{type:"password",value:C,onChange:ce=>k(ce.target.value),className:"w-full px-3 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-zen-500 focus:bg-white focus:outline-none transition-all text-gray-900 font-mono text-sm",placeholder:"",required:!0})]})]}),d.jsx("button",{type:"submit",disabled:q,className:"w-full bg-zen-700 text-white font-bold py-3.5 rounded-xl hover:bg-zen-800 shadow-lg shadow-zen-200 transition-all mt-4 active:scale-95 disabled:opacity-50 touch-manipulation flex items-center justify-center gap-2",children:q?"...":""}),d.jsxs("div",{className:"relative my-4",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-200"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-white text-gray-500 font-medium",children:" Google "})})]}),me?d.jsx("div",{className:"mb-4",children:d.jsx(J,{})}):d.jsx(B,{text:" Google "})]})]});return d.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 overflow-y-auto",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden relative animate-in fade-in zoom-in duration-200 my-auto",children:[d.jsx("button",{onClick:V,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600 transition-colors z-10 p-2",children:d.jsx(ns,{size:24})}),d.jsx("div",{className:"px-8 pb-8 pt-4",children:fe()})]})})},j3=({onClose:i})=>{const{instructors:e,allClassesHistory:t,formatDateKey:r,classes:o,fetchArchivedClasses:c}=ks(),[u,g]=te.useState(!0),[p]=te.useState(()=>{const he=new Date;return new Date(he.getFullYear(),he.getMonth()-1,1)}),y=new Date(p.getFullYear(),p.getMonth(),1),v=new Date(p.getFullYear(),p.getMonth()+1,0);te.useEffect(()=>{c().then(()=>{g(!1)})},[]);const[w,A]=te.useState({}),[j,U]=te.useState(null),q=he=>{if(w[he]!==void 0){const de=w[he];return typeof de=="string"?de===""?0:parseFloat(de):de}const we=e.find(de=>de.id===he);return(we==null?void 0:we.defaultRate)??800},P=(he,we)=>{if(we===""){A(N=>({...N,[he]:""}));return}const de=parseInt(we,10);isNaN(de)||A(N=>({...N,[he]:de}))},ie=te.useMemo(()=>{const he={};e.forEach(de=>{he[de.id]={id:de.id,name:de.name,avatar:de.imageUrl,totalMinutes:0,classCount:0,logs:[]}});const we=["","","","","","",""];for(let de=new Date(y);de<=v;de.setDate(de.getDate()+1)){const N=de.getDay()||7,R=r(de);let C=t.filter(T=>!(Number(T.dayOfWeek)!==N||T.createdAt&&T.createdAt>R||T.archived&&T.archivedAt&&T.archivedAt<R));const k=o.filter(T=>Number(T.dayOfWeek)===N),I=new Map;k.forEach(T=>I.set(T.startTimeStr,T)),C.sort((T,ue)=>(ue.createdAt||"").localeCompare(T.createdAt||""));const O=new Set;C.forEach(T=>{const ue=T.startTimeStr;if(O.has(ue))return;O.add(ue);let me=T.instructorId,V="BASE",W="";const ye=I.get(ue)||T;if(ye.substitutions&&ye.substitutions[R]){me=ye.substitutions[R],V="SUB";const ge=e.find(D=>D.id===T.instructorId);W=(ge==null?void 0:ge.name)||"Unknown"}if(he[me]){const ge=Number(T.durationMinutes)||0;ge>0&&(he[me].totalMinutes+=ge,he[me].classCount+=1,he[me].logs.push({date:R,dayName:we[N===7?0:N],time:`${T.startTimeStr} (${ge}m)`,type:V,originalName:W,duration:ge}))}})}return Object.values(he).forEach(de=>{de.logs.sort((N,R)=>N.date.localeCompare(R.date))}),Object.values(he).filter(de=>de.totalMinutes>0).sort((de,N)=>N.totalMinutes-de.totalMinutes)},[t,o,e,r]),ve=ie.reduce((he,we)=>he+Math.round(we.totalMinutes/60*q(we.id)),0),be=()=>{const he=["","","","","","","()","",""],we=[];ie.forEach(I=>{const O=q(I.id);I.logs.forEach(T=>{const ue=Math.round(T.duration/60*O),me=T.time.split(" ")[0];we.push([I.name,T.date,T.dayName,me,T.type==="SUB"?"":"",T.originalName||"-",T.duration.toString(),O.toString(),ue.toString()])})});const de=[he.join(","),...we.map(I=>I.map(O=>`"${String(O).replace(/"/g,'""')}"`).join(","))].join(`
`),N=new Blob(["\uFEFF"+de],{type:"text/csv;charset=utf-8;"}),R=URL.createObjectURL(N),C=document.createElement("a");C.href=R;const k=y.toISOString().slice(0,7);C.setAttribute("download",`Salary_Details_${k}.csv`),document.body.appendChild(C),C.click(),document.body.removeChild(C)};return d.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-4xl overflow-hidden flex flex-col max-h-[85vh] animate-in zoom-in-95 duration-200",children:[d.jsxs("div",{className:"bg-white p-5 border-b border-gray-100 flex flex-wrap justify-between items-center sticky top-0 z-20 shadow-sm gap-y-4",children:[d.jsxs("div",{className:"flex flex-col gap-1 mr-auto",children:[d.jsxs("div",{className:"flex flex-wrap items-baseline gap-2",children:[d.jsxs("h2",{className:"text-xl font-bold text-gray-800 leading-tight flex items-center gap-2",children:[d.jsx(h2,{className:"text-zen-600 shrink-0",size:20}),""]}),d.jsx("span",{className:"text-sm font-normal text-gray-500 whitespace-nowrap",children:"()"})]}),d.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:["",y.toLocaleDateString()," - ",v.toLocaleDateString()]})]}),d.jsxs("div",{className:"flex items-center gap-2 shrink-0 ml-auto",children:[d.jsxs("button",{onClick:be,className:"flex items-center justify-center gap-1.5 bg-zen-50 text-zen-700 hover:bg-zen-100 border border-zen-200 px-3 py-2 rounded-lg text-sm font-bold transition-colors h-10 shadow-sm whitespace-nowrap",children:[d.jsx(Ru,{size:16}),d.jsx("span",{children:""})]}),d.jsx("button",{onClick:i,className:"p-2 text-gray-400 hover:bg-gray-100 rounded-full transition-colors h-10 w-10 flex items-center justify-center",children:d.jsx(ns,{size:24})})]})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto bg-white p-0 relative",children:[u&&d.jsx("div",{className:"absolute inset-0 bg-white/80 z-20 flex items-center justify-center",children:d.jsxs("div",{className:"flex flex-col items-center text-zen-600",children:[d.jsx(vn,{className:"animate-spin mb-2",size:32}),d.jsx("span",{className:"text-sm font-bold",children:"..."})]})}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left border-collapse min-w-[600px]",children:[d.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10 text-[11px] font-bold text-gray-500 uppercase tracking-wider border-b border-gray-200 shadow-sm",children:d.jsxs("tr",{children:[d.jsx("th",{className:"py-3 px-2 w-10 text-center align-middle"}),d.jsx("th",{className:"py-3 px-3 align-middle text-left",children:""}),d.jsx("th",{className:"py-3 px-2 text-center text-purple-600 align-middle whitespace-nowrap",children:""}),d.jsx("th",{className:"py-3 px-2 text-center text-blue-600 align-middle whitespace-nowrap",children:""}),d.jsx("th",{className:"py-3 px-2 w-[110px] text-center align-middle whitespace-nowrap",children:" ($)"}),d.jsx("th",{className:"py-3 px-3 pr-6 text-right text-green-600 align-middle whitespace-nowrap",children:""})]})}),d.jsxs("tbody",{className:"divide-y divide-gray-50 bg-white",children:[ie.map(he=>{var T;const we=Math.floor(he.totalMinutes/60),de=he.totalMinutes%60,N=q(he.id),R=Math.round(he.totalMinutes/60*N),C=j===he.id,k=((T=e.find(ue=>ue.id===he.id))==null?void 0:T.defaultRate)??800,I=w[he.id],O=I!==void 0?I:k;return d.jsxs(ew.Fragment,{children:[d.jsxs("tr",{className:`hover:bg-gray-50 transition-colors cursor-pointer ${C?"bg-gray-50":""}`,onClick:()=>U(C?null:he.id),children:[d.jsx("td",{className:"py-4 px-2 text-center text-gray-400 align-middle",children:C?d.jsx(o0,{size:16}):d.jsx(l0,{size:16})}),d.jsx("td",{className:"py-4 px-3 align-middle",children:d.jsxs("div",{className:"flex items-center gap-3",children:[he.avatar?d.jsx("img",{src:he.avatar,className:"w-10 h-10 rounded-full object-cover bg-gray-100 border border-gray-200 shrink-0"}):d.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 border border-gray-200 shrink-0",children:d.jsx(Bn,{size:16})}),d.jsx("span",{className:"font-bold text-sm text-gray-900",children:he.name})]})}),d.jsx("td",{className:"py-4 px-2 text-center align-middle",children:d.jsxs("span",{className:"text-xs font-bold text-purple-600 bg-purple-50 px-2.5 py-1 rounded-full whitespace-nowrap border border-purple-100",children:[he.classCount," "]})}),d.jsx("td",{className:"py-4 px-2 text-center align-middle",children:d.jsxs("span",{className:"text-sm font-bold text-blue-600 whitespace-nowrap",children:[we,d.jsx("span",{className:"text-xs text-blue-400 font-normal",children:"h"}),de>0&&d.jsxs("span",{className:"text-xs text-gray-400 ml-0.5 font-normal",children:[de,"m"]})]})}),d.jsx("td",{className:"py-4 px-2 align-middle",onClick:ue=>ue.stopPropagation(),children:d.jsx("div",{className:"flex items-center justify-center",children:d.jsx("input",{type:"number",value:O,onChange:ue=>P(he.id,ue.target.value),className:"w-20 text-sm font-bold text-gray-900 border border-gray-300 rounded px-2 py-1 text-center focus:ring-2 focus:ring-zen-500 outline-none shadow-sm bg-white",style:{colorScheme:"light"},placeholder:"0"})})}),d.jsx("td",{className:"py-4 px-3 pr-6 text-right align-middle",children:d.jsxs("span",{className:"font-bold text-green-600 text-lg tracking-tight",children:["$",R.toLocaleString()]})})]}),C&&d.jsx("tr",{children:d.jsx("td",{colSpan:6,className:"bg-gray-50/50 p-0 border-b border-gray-100",children:d.jsxs("div",{className:"px-4 py-3 sm:px-14 sm:py-4",children:[d.jsxs("h4",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-2 flex items-center gap-2",children:[d.jsx(io,{size:12})," ",he.name," "]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:he.logs.map((ue,me)=>d.jsxs("div",{className:"flex items-center justify-between bg-white p-2.5 rounded-lg border border-gray-200 shadow-sm text-xs",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-mono text-gray-500 bg-gray-50 px-1.5 rounded",children:ue.date}),d.jsx("span",{className:"font-bold text-gray-700 w-8",children:ue.dayName}),d.jsx("span",{className:"text-gray-600",children:ue.time})]}),d.jsx("div",{children:ue.type==="SUB"?d.jsxs("span",{className:"bg-amber-100 text-amber-800 px-2 py-0.5 rounded text-[10px] font-bold whitespace-nowrap border border-amber-200",children:[" (",ue.originalName,")"]}):d.jsx("span",{className:"bg-green-50 text-green-700 px-2 py-0.5 rounded text-[10px] whitespace-nowrap border border-green-100",children:""})})]},me))})]})})})]},he.id)}),ie.length===0&&!u&&d.jsx("tr",{children:d.jsx("td",{colSpan:6,className:"text-center py-12 text-gray-400 text-sm italic",children:""})})]})]})})]}),d.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-between items-center shrink-0",children:[d.jsx("span",{className:"text-sm font-bold text-gray-500",children:""}),d.jsxs("span",{className:"text-3xl font-black text-zen-600 tracking-tight",children:["$",ve.toLocaleString()]})]})]})})},k3=({onClose:i})=>{const{currentUser:e,classes:t,cancelClass:r,students:o,updateUser:c}=ks(),u=te.useRef(null),[g,p]=te.useState(!1),[y,v]=te.useState(e.name),[w,A]=te.useState(e.phoneNumber||""),[j,U]=te.useState(!1),[q,P]=te.useState(!1),ie=o.find(T=>T.id===e.id)||e,ve=e.role===yt.STUDENT,be=e.role===yt.ADMIN,he=ie.membershipType||"CREDIT",we=ie.credits||0,de=ie.unlimitedExpiry,N=t.flatMap(T=>{if(!T.bookings)return[];const ue=T.bookings;return Object.entries(ue).filter(([V,W])=>W.includes(e.id)).map(([V])=>{const[W,re,ye]=V.split("-").map(Number),ge=new Date(W,re-1,ye);return{id:T.id,title:T.title,location:T.location,startTime:T.startTimeStr,dayOfWeek:T.dayOfWeek,dateObj:ge,dateKey:V}})}),R=new Date,C=N.filter(T=>{const[ue,me]=T.startTime.split(":").map(Number),V=new Date(T.dateObj);return V.setHours(ue,me,0,0),V>=R}).sort((T,ue)=>T.dateObj.getTime()-ue.dateObj.getTime()),k=N.filter(T=>{const[ue,me]=T.startTime.split(":").map(Number),V=new Date(T.dateObj);return V.setHours(ue,me,0,0),V<R}).sort((T,ue)=>ue.dateObj.getTime()-T.dateObj.getTime()),I=T=>{var V;const ue=(V=T.target.files)==null?void 0:V[0];if(!ue)return;if(ue.size>2*1024*1024){alert(" 2MB");return}U(!0);const me=new FileReader;me.onload=W=>{var ye;const re=new Image;re.onload=()=>{const ge=document.createElement("canvas"),D=ge.getContext("2d"),B=500,J=500;let fe=re.width,ce=re.height;fe>ce?fe>B&&(ce*=B/fe,fe=B):ce>J&&(fe*=J/ce,ce=J),ge.width=fe,ge.height=ce,D==null||D.drawImage(re,0,0,fe,ce);const Ce=ge.toDataURL("image/jpeg",.8);c(e.id,{avatarUrl:Ce}).then(()=>U(!1)).catch(()=>{alert(""),U(!1)})},re.src=(ye=W.target)==null?void 0:ye.result},me.readAsDataURL(ue)},O=async()=>{y.trim()&&(await c(e.id,{name:y,phoneNumber:w}),p(!1))};return d.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:[d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden flex flex-col max-h-[85vh]",children:[d.jsxs("div",{className:"bg-zen-600 p-6 text-white relative transition-all shrink-0",children:[d.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-white/80 hover:text-white bg-white/10 hover:bg-white/20 p-1.5 rounded-full transition-colors z-10",children:d.jsx(ns,{size:20})}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"relative group shrink-0",children:[d.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-white/30 shadow-lg overflow-hidden bg-white relative flex items-center justify-center",children:j?d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-20",children:d.jsx(vn,{className:"animate-spin text-white"})}):e.avatarUrl?d.jsx("img",{src:e.avatarUrl,alt:e.name,className:"w-full h-full object-cover"}):be?d.jsx(Bn,{size:32,className:"text-gray-300"}):d.jsx(qa,{size:32,className:"text-gray-300"})}),d.jsx("button",{onClick:()=>{var T;return(T=u.current)==null?void 0:T.click()},className:"absolute bottom-0 right-0 bg-white text-zen-600 p-1.5 rounded-full shadow-md hover:bg-gray-100 transition-colors z-20",title:"",children:d.jsx(Xu,{size:14})}),d.jsx("input",{type:"file",ref:u,className:"hidden",accept:"image/*",onChange:I})]}),d.jsxs("div",{className:"flex-1 min-w-0 pr-14",children:[g?d.jsxs("div",{className:"space-y-2",children:[d.jsx("input",{type:"text",value:y,onChange:T=>v(T.target.value),className:"w-full px-2 py-1 text-gray-900 rounded text-lg font-bold outline-none border border-white/50 focus:ring-2 focus:ring-white/50 bg-white/90",placeholder:"",autoFocus:!0}),d.jsxs("div",{className:"flex items-center bg-white/20 rounded px-2 py-1",children:[d.jsx(ao,{size:14,className:"text-white/70 mr-2"}),d.jsx("input",{type:"tel",value:w,onChange:T=>A(T.target.value),className:"w-full bg-transparent text-sm text-white placeholder-white/50 outline-none",placeholder:""})]}),d.jsxs("button",{onClick:O,className:"bg-white/20 hover:bg-white/30 text-white text-xs px-3 py-1.5 rounded-full flex items-center gap-1 mt-1 font-bold",children:[d.jsx(Wu,{size:12})," "]})]}):d.jsxs("div",{className:"group",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("h2",{className:"text-2xl font-bold truncate",children:e.name}),d.jsx("button",{onClick:()=>p(!0),className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-white/20 rounded shrink-0",children:d.jsx(s3,{size:14})})]}),d.jsxs("p",{className:"text-zen-100 text-sm font-medium",children:["@",e.username]}),ie.phoneNumber&&d.jsxs("p",{className:"text-zen-100 text-xs mt-1 flex items-center gap-1",children:[d.jsx(ao,{size:12})," ",ie.phoneNumber]})]}),!g&&ve&&d.jsxs("div",{className:`inline-flex items-start sm:items-center gap-1.5 mt-2 px-3 py-1.5 rounded-xl text-xs font-bold ${he==="UNLIMITED"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:[d.jsx("div",{className:"mt-0.5 sm:mt-0 shrink-0",children:he==="UNLIMITED"?d.jsx(f2,{size:14}):d.jsx(Rl,{size:14})}),he==="UNLIMITED"?d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-1 leading-tight",children:[d.jsx("span",{className:"whitespace-nowrap",children:""}),d.jsxs("span",{className:"text-[11px] sm:text-xs font-medium opacity-80 whitespace-nowrap",children:[" ",de||""]})]}):d.jsxs("span",{children:[": ",we," "]})]})]})]})]}),d.jsx("div",{className:"p-0 overflow-y-auto flex-1 bg-gray-50",children:be?d.jsxs("div",{className:"p-6",children:[d.jsxs("h3",{className:"text-gray-800 font-bold mb-4 flex items-center gap-2",children:[d.jsx(Bn,{className:"text-zen-600",size:20}),""]}),d.jsxs("button",{onClick:()=>P(!0),className:"w-full bg-white p-4 rounded-xl shadow-sm border border-gray-200 hover:border-zen-300 hover:shadow-md transition-all group text-left flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-12 h-12 bg-zen-50 rounded-full flex items-center justify-center text-zen-600 group-hover:bg-zen-600 group-hover:text-white transition-colors",children:d.jsx(h2,{size:24})}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-bold text-gray-800 text-lg group-hover:text-zen-700",children:""}),d.jsx("p",{className:"text-gray-500 text-sm",children:""})]})]}),d.jsx(l0,{className:"text-gray-300 group-hover:text-zen-500"})]}),d.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl border border-blue-100 text-sm text-blue-800",children:[d.jsx("p",{className:"font-bold mb-1",children:" "}),d.jsx("p",{children:""})]})]}):d.jsxs("div",{className:"p-6 space-y-8",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"text-gray-800 font-bold mb-4 flex items-center gap-2",children:[d.jsx(Ll,{className:"text-zen-600",size:20})," (",C.length,")"]}),C.length===0?d.jsxs("div",{className:"text-center py-8 bg-white rounded-xl border border-dashed border-gray-300",children:[d.jsx("p",{className:"text-gray-400 text-sm mb-2",children:""}),d.jsx("button",{onClick:i,className:"text-zen-600 font-bold text-sm hover:underline",children:""})]}):d.jsx("div",{className:"space-y-3",children:C.map((T,ue)=>{const me=["","","","","","",""][T.dayOfWeek===7?0:T.dayOfWeek];return d.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 hover:border-zen-300 transition-colors",children:d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsxs("span",{className:"text-xs font-bold px-2 py-0.5 rounded-full bg-zen-100 text-zen-700",children:[me," ",T.startTime]}),d.jsx("span",{className:"text-gray-400 text-xs",children:T.dateObj.toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"})})]}),d.jsx("h4",{className:"font-bold text-lg text-gray-800",children:T.title}),d.jsxs("p",{className:"text-gray-500 text-xs flex items-center gap-1 mt-1",children:[d.jsx(d0,{size:12})," ",T.location]})]}),d.jsx("button",{onClick:()=>r(T.id,void 0,T.dateObj),className:"text-red-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition-colors",title:"",children:d.jsx(na,{size:18})})]})},`${T.id}-${T.dateKey}-${ue}`)})})]}),k.length>0&&d.jsxs("div",{children:[d.jsxs("h3",{className:"text-gray-500 font-bold mb-4 flex items-center gap-2 text-sm uppercase tracking-wider",children:[d.jsx(h0,{className:"text-gray-400",size:18}),""]}),d.jsx("div",{className:"space-y-2 opacity-80",children:k.map((T,ue)=>{const me=["","","","","","",""][T.dayOfWeek===7?0:T.dayOfWeek];return d.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200 flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[d.jsx("span",{className:"text-xs font-bold text-gray-500",children:T.dateObj.toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"})}),d.jsxs("span",{className:"text-xs text-gray-400",children:[me," ",T.startTime]})]}),d.jsx("h4",{className:"font-bold text-sm text-gray-600",children:T.title})]}),d.jsx("span",{className:"text-[10px] font-bold bg-gray-200 text-gray-500 px-2 py-1 rounded",children:""})]},`hist-${T.id}-${T.dateKey}-${ue}`)})})]})]})})]}),q&&d.jsx(j3,{onClose:()=>P(!1)})]})},M3=({onClose:i})=>{const{notifyAdminPayment:e,currentUser:t}=ks(),[r,o]=te.useState(!1),[c,u]=te.useState(!1),[g,p]=te.useState(""),[y,v]=te.useState(""),w={bankCode:"822",bankName:"",account:"1234-5678-9012"},A=async()=>{if(y.length!==5){alert("");return}o(!0);const U=await e(y);o(!1),U?u(!0):alert("")},j=(U,q)=>{navigator.clipboard.writeText(U),p(q),setTimeout(()=>p(""),2e3)};return d.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden flex flex-col max-h-[90vh]",children:[d.jsxs("div",{className:"bg-zen-600 p-5 flex justify-between items-center text-white shrink-0",children:[d.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[d.jsx(u0,{size:24}),""]}),d.jsx("button",{onClick:i,className:"p-2 bg-white/20 hover:bg-white/30 rounded-full transition-colors",children:d.jsx(ns,{size:20})})]}),d.jsxs("div",{className:"p-6 overflow-y-auto bg-gray-50 flex-1 space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-gray-800 font-bold mb-3 flex items-center gap-2 text-sm uppercase tracking-wider",children:" "}),d.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[d.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[d.jsxs("div",{className:"flex justify-between items-center mb-1",children:[d.jsx("span",{className:"font-bold text-gray-800",children:""}),d.jsx("span",{className:"text-zen-600 font-bold",children:"$500"})]}),d.jsx("p",{className:"text-xs text-gray-500",children:" (1)"})]}),d.jsxs("div",{className:"bg-white p-4 rounded-xl border border-zen-200 shadow-sm ring-1 ring-zen-100",children:[d.jsxs("div",{className:"flex justify-between items-center mb-1",children:[d.jsx("span",{className:"font-bold text-gray-800",children:"10 "}),d.jsx("span",{className:"text-zen-600 font-bold",children:"$4,500"})]}),d.jsx("p",{className:"text-xs text-gray-500",children:" $450 3  (10)"})]}),d.jsxs("div",{className:"bg-gradient-to-r from-gray-800 to-gray-700 p-4 rounded-xl shadow-md text-white",children:[d.jsxs("div",{className:"flex justify-between items-center mb-1",children:[d.jsx("span",{className:"font-bold text-white",children:""}),d.jsx("span",{className:"text-yellow-400 font-bold",children:"$3,800 / "})]}),d.jsx("p",{className:"text-xs text-gray-300",children:"30 3 "})]})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-gray-800 font-bold mb-3 flex items-center gap-2 text-sm uppercase tracking-wider",children:" "}),d.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm space-y-3",children:[d.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-100",children:[d.jsx("span",{className:"text-gray-500 text-sm",children:""}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-mono font-bold text-lg",children:w.bankCode}),d.jsxs("span",{className:"text-sm font-bold text-gray-800",children:["(",w.bankName,")"]})]})]}),d.jsxs("div",{className:"flex justify-between items-center pt-1",children:[d.jsx("span",{className:"text-gray-500 text-sm",children:""}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-mono font-bold text-lg text-gray-800 tracking-wide",children:w.account}),d.jsx("button",{onClick:()=>j(w.account,"ACC"),className:"text-zen-600 hover:bg-zen-50 p-1.5 rounded transition-colors",title:"",children:g==="ACC"?d.jsx(vf,{size:16}):d.jsx(Kp,{size:16})})]})]}),d.jsx("div",{className:"mt-3 p-3 bg-yellow-50 rounded-lg text-xs text-yellow-800 leading-relaxed",children:" "})]})]}),d.jsx("div",{className:"pt-2",children:c?d.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6 text-center animate-in zoom-in",children:[d.jsx("div",{className:"w-12 h-12 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-3",children:d.jsx(vf,{size:24})}),d.jsx("h3",{className:"font-bold text-green-800 text-lg mb-1",children:""}),d.jsx("p",{className:"text-green-700 text-sm mb-4",children:""}),d.jsx("button",{onClick:i,className:"text-sm font-bold text-green-700 hover:underline",children:""})]}):d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:""}),d.jsx("input",{type:"text",maxLength:5,value:y,onChange:U=>v(U.target.value.replace(/\D/g,"")),placeholder:"12345",className:"w-full p-3 border border-gray-300 rounded-xl text-center text-lg font-bold tracking-widest focus:ring-2 focus:ring-zen-500 outline-none"})]}),d.jsx("button",{onClick:A,disabled:r||y.length!==5,className:"w-full bg-zen-600 text-white py-4 rounded-xl font-bold shadow-lg shadow-zen-200 hover:bg-zen-700 active:scale-95 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:r?d.jsxs(d.Fragment,{children:[d.jsx(vn,{size:20,className:"animate-spin"}),"..."]}):d.jsxs(d.Fragment,{children:[d.jsx(y2,{size:20}),""]})})]})})]})]})})},O3=({children:i})=>{const{currentUser:e,logout:t,isLoginModalOpen:r,setLoginModalOpen:o,appLogo:c,appBackgroundImage:u,updateAppLogo:g}=ks(),[p,y]=te.useState(!1),[v,w]=te.useState(!1),[A,j]=te.useState(!1),U=te.useRef(null),q=te.useRef(null),[P,ie]=te.useState(!1);te.useEffect(()=>{const C=k=>{U.current&&!U.current.contains(k.target)&&y(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const ve=()=>{t(),y(!1)},be=()=>{o(!0),y(!1)},he=()=>{w(!0),y(!1)},we=()=>{j(!0),y(!1)},de=C=>{var O;const k=(O=C.target.files)==null?void 0:O[0];if(!k)return;if(k.size>2*1024*1024){alert("Logo  2MB");return}ie(!0);const I=new FileReader;I.onload=T=>{var me;const ue=new Image;ue.onload=()=>{const V=document.createElement("canvas"),W=V.getContext("2d"),re=200;let ye=ue.width,ge=ue.height;ye>ge?ye>re&&(ge*=re/ye,ye=re):ge>re&&(ye*=re/ge,ge=re),V.width=ye,V.height=ge,W==null||W.drawImage(ue,0,0,ye,ge);const D=V.toDataURL("image/png");g(D).then(()=>ie(!1))},ue.src=(me=T.target)==null?void 0:me.result},I.readAsDataURL(k)},N=e.role===yt.ADMIN,R=u;return d.jsxs("div",{className:"relative bg-gray-50",children:[d.jsx("div",{className:"fixed inset-0 h-full z-0 bg-no-repeat bg-cover bg-top",style:{backgroundImage:R?`url('${R}')`:void 0}}),d.jsxs("div",{className:"relative z-10 flex flex-col h-[100dvh] overflow-hidden",children:[d.jsx("nav",{className:"shrink-0 bg-white/50 backdrop-blur-md border-b border-white/30 shadow-sm z-40",children:d.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex justify-between h-16",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-bold text-xl shadow-md overflow-hidden relative group transition-all ${N?"cursor-pointer hover:ring-2 hover:ring-zen-300":""} ${c?"bg-white/80":"bg-zen-600 text-white shadow-zen-200"}`,onClick:()=>{var C;return N&&((C=q.current)==null?void 0:C.click())},title:N?" Logo":"ZenFlow",children:[P&&d.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-20",children:d.jsx(vn,{size:16,className:"text-white animate-spin"})}),c?d.jsx("img",{src:c,alt:"Logo",className:"w-full h-full object-contain p-1"}):"Z",N&&d.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10",children:d.jsx(Xu,{size:16,className:"text-white"})}),d.jsx("input",{type:"file",ref:q,className:"hidden",accept:"image/*",onChange:de})]}),d.jsx("span",{className:"text-xl font-bold tracking-tight text-gray-800 drop-shadow-sm",children:"ZenFlow"})]}),d.jsx("div",{className:"flex items-center gap-4",children:d.jsxs("div",{className:"relative",ref:U,children:[d.jsxs("button",{onClick:()=>y(!p),className:"flex items-center gap-2 pl-2 pr-1 py-1 rounded-full hover:bg-white/40 transition-colors focus:outline-none",children:[d.jsxs("div",{className:"text-right hidden sm:block",children:[d.jsx("div",{className:"text-sm font-bold text-gray-800 leading-tight",children:e.name}),d.jsx("div",{className:"text-[10px] text-gray-600 font-semibold uppercase tracking-wider",children:e.role===yt.GUEST?"":e.role===yt.ADMIN?"":""})]}),d.jsxs("div",{className:"relative",children:[e.avatarUrl?d.jsx("img",{src:e.avatarUrl,className:`w-9 h-9 rounded-full border-2 ${e.role===yt.ADMIN?"border-zen-600":"border-white/80"} shadow-sm object-cover`,alt:"avatar"}):d.jsx("div",{className:`w-9 h-9 rounded-full border-2 ${e.role===yt.ADMIN?"border-zen-600":"border-white/80"} shadow-sm bg-white/50 text-gray-500 flex items-center justify-center`,children:N?d.jsx(Bn,{size:16}):d.jsx(qa,{size:16})}),d.jsx("div",{className:"absolute bottom-0 right-0 bg-white rounded-full p-0.5 shadow-sm border border-gray-100",children:d.jsx(o0,{size:10,className:"text-gray-500"})})]})]}),p&&d.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white/90 backdrop-blur-xl rounded-xl shadow-xl border border-white/50 py-1 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200 z-50",children:[d.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 sm:hidden",children:[d.jsx("p",{className:"text-sm font-bold text-gray-900",children:e.name}),d.jsx("p",{className:"text-xs text-gray-500",children:e.role})]}),e.role===yt.GUEST?d.jsxs("button",{onClick:be,className:"w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-zen-50 hover:text-zen-600 flex items-center gap-2 font-medium",children:[d.jsx(Xk,{size:16}),""]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"px-4 py-2 text-xs text-gray-400 font-semibold uppercase tracking-wider",children:""}),d.jsxs("button",{onClick:he,className:"w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-zen-50 hover:text-zen-600 flex items-center gap-2 font-medium border-b border-gray-100",children:[e.role===yt.STUDENT?d.jsx(tk,{size:16}):d.jsx(xk,{size:16})," / "]}),e.role===yt.STUDENT&&d.jsxs("button",{onClick:we,className:"w-full text-left px-4 py-2.5 text-sm text-zen-700 hover:bg-zen-50 flex items-center gap-2 font-bold border-b border-gray-100 bg-zen-50/50",children:[d.jsx(u0,{size:16}),""]}),d.jsxs("button",{onClick:ve,className:"w-full text-left px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2 font-medium",children:[d.jsx(Jk,{size:16}),""]})]})]})]})})]})})}),d.jsx("main",{className:"flex-1 w-full overflow-y-auto scroll-smooth",children:d.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[i,d.jsx("div",{className:"h-12 sm:h-0"})]})})]}),d.jsx(D3,{isOpen:r,onClose:()=>o(!1)}),v&&d.jsx(k3,{onClose:()=>w(!1)}),A&&d.jsx(M3,{onClose:()=>j(!1)})]})},V3=({session:i,instructor:e,targetDate:t,onAction:r,onEdit:o,isCompact:c=!1,displayAsSubstitute:u})=>{var Ve;const{currentUser:g,students:p,setLoginModalOpen:y,formatDateKey:v,updateClass:w}=ks(),[A,j]=te.useState(!1),[U,q]=te.useState(!1),[P,ie]=te.useState(i.description||"");te.useEffect(()=>{ie(i.description||"")},[i.description]);const ve=async()=>{P!==i.description&&await w(i.id,{description:P}),q(!1)},be=v(t),he=((Ve=i.bookings)==null?void 0:Ve[be])||[],we=he.includes(g.id),de=p.length>0?he.filter(Me=>p.some(Ye=>Ye.id===Me)).length:he.length,N=de>=i.capacity,R=g.role===yt.GUEST,C=g.role===yt.ADMIN,k=g.role===yt.STUDENT,I=g.role===yt.STUDENT?p.find(Me=>Me.id===g.id):null,O=(I==null?void 0:I.membershipType)||"CREDIT",T=(I==null?void 0:I.credits)||0,ue=I==null?void 0:I.unlimitedExpiry;v(new Date);const me=O==="UNLIMITED"&&(!ue||ue<be),V=i.pointsCost??1,W=O==="CREDIT"&&T<V,[re,ye]=i.startTimeStr.split(":").map(Number),ge=new Date(t);ge.setHours(re,ye,0,0);const D=re*60+ye+i.durationMinutes,B=Math.floor(D/60)%24,J=D%60,fe=(Me,Ye)=>{const Ge=String(Me).padStart(2,"0"),_e=String(Ye).padStart(2,"0");return`${Ge}:${_e}`},ce=fe(re,ye),Ce=fe(B,J),He=new Date,it=ge<He,at=new Date(t);at.setHours(9,0,0,0),at.setDate(at.getDate()-2);const Lt=He<at,Bt=async Me=>{if(Me.stopPropagation(),R){y(!0);return}it&&!C||(j(!0),await r(),j(!1))},Zt={Beginner:"bg-green-100 text-green-700",Intermediate:"bg-yellow-100 text-yellow-700",Advanced:"bg-red-100 text-red-700"}[i.difficulty]||"bg-gray-100 text-gray-700",Tn={Beginner:"",Intermediate:"",Advanced:""}[i.difficulty],Pt=()=>{if(C)return d.jsx("button",{onClick:Bt,disabled:A,className:"w-full py-2.5 rounded-xl font-bold text-sm bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 hover:text-zen-600 hover:border-zen-300 shadow-sm transition-all",children:A?d.jsx(vn,{className:"animate-spin mx-auto",size:16}):""});if(it&&!we)return null;if(it&&we)return d.jsx("span",{className:"text-gray-400 text-xs font-bold bg-gray-100 px-2 py-1 rounded-lg whitespace-nowrap",children:""});if(we)return d.jsx("button",{onClick:Bt,disabled:A,className:"w-full py-2.5 rounded-xl font-bold text-sm transition-all shadow-sm border bg-red-50 text-red-600 border-red-100 hover:bg-red-100",children:A?d.jsx(vn,{className:"animate-spin mx-auto",size:16}):""});if(N)return d.jsx("div",{className:"w-full py-2.5 rounded-xl font-bold text-sm bg-gray-100 text-gray-400 text-center border border-gray-200",children:""});let Me=!1,Ye="",Ge="";return k&&(Lt?(Me=!0,Ye="",Ge=""):me?(Me=!0,Ye=""):W&&(Me=!0,Ye="",Ge=` ${V} `)),d.jsx("button",{onClick:Me?void 0:Bt,disabled:A||Me,className:`w-full py-2.5 rounded-xl font-bold text-sm shadow-md transition-all flex flex-col items-center justify-center leading-none gap-1
                  ${Me?"bg-gray-100 text-gray-400 cursor-not-allowed border border-gray-200 shadow-none":"bg-zen-600 text-white hover:bg-zen-700 active:scale-95 shadow-zen-200"}`,children:A?d.jsx(vn,{className:"animate-spin",size:16}):d.jsxs(d.Fragment,{children:[d.jsx("span",{children:Ye}),Ge&&d.jsx("span",{className:"text-[10px] opacity-80 font-medium",children:Ge})]})})};if(c){let Me="bg-white border-gray-200",Ye="bg-gray-50 border-gray-100";return u?(Me="bg-[#fffdf5] border-amber-400 shadow-sm",Ye="bg-amber-100/50 border-amber-200",we&&!C?Me+=" ring-2 ring-zen-500 border-transparent":Me+=" ring-1 ring-amber-200"):we&&!C&&(Me="border-zen-500 ring-1 ring-zen-500 bg-zen-50/30"),d.jsxs("div",{onClick:C?r:void 0,className:`relative flex items-stretch rounded-xl border transition-all overflow-hidden
                ${it?"opacity-60 grayscale":"hover:border-zen-300 shadow-sm"}
                ${Me}
            `,children:[C&&o&&d.jsx("button",{onClick:Ge=>{Ge.stopPropagation(),o()},className:"absolute top-1 right-1 p-1.5 text-gray-400 hover:text-zen-600 hover:bg-white/50 rounded-lg transition-colors z-20",title:"",children:d.jsx(J1,{size:16})}),d.jsxs("div",{className:`w-[85px] flex flex-col items-center justify-center border-r px-2 py-3 shrink-0 ${Ye}`,children:[d.jsx("span",{className:"text-xl font-black text-gray-800 leading-none",children:ce}),d.jsx("span",{className:"text-xs font-medium text-gray-400 my-1",children:"-"}),d.jsx("span",{className:"text-lg font-bold text-gray-500 leading-none",children:Ce})]}),d.jsxs("div",{className:"flex-1 p-3 min-w-0 flex flex-col justify-center",children:[d.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1.5",children:[d.jsx("h3",{className:"font-bold text-lg text-gray-900 leading-tight break-words",children:i.title}),d.jsx("div",{className:"shrink-0 flex gap-1",children:u&&d.jsxs("span",{className:"bg-amber-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded shadow-sm flex items-center gap-0.5",children:[d.jsx(io,{size:10,className:"stroke-[3]"})," "]})})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-gray-600",children:[d.jsx("span",{className:"font-bold text-zen-700 text-sm mr-1",children:e.name}),d.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold ${Zt}`,children:Tn}),d.jsxs("span",{className:"bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded text-[10px] font-bold flex items-center gap-0.5",children:[d.jsx(Rl,{size:10})," ",V]}),d.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:["(",de,"/",i.capacity,")"]})]})]}),d.jsx("div",{className:"w-[80px] p-2 flex items-center justify-center border-l border-gray-100 bg-white/50",children:d.jsx(Pt,{})})]})}let oe="bg-white border-gray-200";return u?(oe="bg-[#fffdf5] border-amber-400",we&&!C&&(oe+=" ring-2 ring-zen-500 border-transparent")):we&&!C&&(oe="bg-zen-50/20 border-transparent ring-2 ring-zen-500"),d.jsxs("div",{onClick:C?r:void 0,className:`relative flex flex-row rounded-2xl border transition-all shadow-sm overflow-hidden min-h-[180px]
            ${it?"opacity-60":"hover:shadow-md hover:border-zen-300"}
            ${oe}
        `,children:[u&&d.jsxs("div",{className:"absolute top-0 left-0 bg-amber-500 text-white text-xs font-bold px-3 py-1 rounded-br-xl z-20 shadow-sm flex items-center gap-1",children:[d.jsx(io,{size:12})," "]}),C&&o&&d.jsx("button",{onClick:Me=>{Me.stopPropagation(),o()},className:"absolute top-2 right-2 p-2 text-gray-400 hover:text-zen-600 hover:bg-gray-100 rounded-lg transition-colors z-20",title:"",children:d.jsx(J1,{size:18})}),d.jsxs("div",{className:"w-[35%] bg-gray-50/50 border-r border-gray-100 p-4 flex flex-col justify-between shrink-0",children:[d.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-2 text-center mb-3 shadow-sm",children:[d.jsx("div",{className:"text-2xl font-black text-gray-800 leading-none mb-1",children:ce}),d.jsx("div",{className:"text-sm font-medium text-gray-500",children:Ce})]}),d.jsxs("div",{className:"flex flex-col items-center text-center mb-3",children:[d.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-white shadow-sm mb-1",children:e.imageUrl?d.jsx("img",{src:e.imageUrl,className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center text-gray-400",children:d.jsx(Bn,{size:20})})}),d.jsx("span",{className:"font-bold text-gray-800 text-sm leading-tight px-1",children:e.name}),d.jsx("span",{className:"text-[10px] text-gray-400",children:u?"":""})]}),d.jsx("div",{className:"mt-auto",children:d.jsx(Pt,{})})]}),d.jsxs("div",{className:"w-[65%] p-5 flex flex-col relative",children:[d.jsxs("div",{className:"mb-3 pr-8",children:[d.jsx("h3",{className:"text-2xl font-black text-gray-900 leading-tight mb-2 break-words",children:i.title}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-bold ${Zt}`,children:Tn}),d.jsxs("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded-md text-xs font-bold flex items-center gap-1",children:[d.jsx(Rl,{size:12})," ",V]}),d.jsxs("span",{className:"text-xs text-gray-400 font-medium flex items-center gap-1 mt-0.5",children:[d.jsx(Ju,{size:12})," ",de,"/",i.capacity]})]})]}),d.jsxs("div",{className:"flex-1 min-h-[60px] relative group/desc",children:[C&&!U&&d.jsx("button",{onClick:Me=>{Me.stopPropagation(),q(!0)},className:"absolute bottom-0 right-0 p-2 bg-green-600 text-white rounded-full shadow-md hover:bg-green-700 transition-all active:scale-95 z-10",title:"",children:d.jsx(i3,{size:14})}),U?d.jsxs("div",{className:"h-full flex flex-col gap-2",onClick:Me=>Me.stopPropagation(),children:[d.jsx("textarea",{value:P,onChange:Me=>ie(Me.target.value),className:"w-full h-full min-h-[80px] p-2 text-sm border border-zen-300 rounded-lg focus:ring-2 focus:ring-zen-500 outline-none bg-white resize-none",placeholder:"...",autoFocus:!0}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{onClick:()=>q(!1),className:"text-xs text-gray-500 hover:bg-gray-100 px-2 py-1 rounded",children:""}),d.jsxs("button",{onClick:ve,className:"text-xs bg-zen-600 text-white px-3 py-1 rounded flex items-center gap-1",children:[d.jsx(Wu,{size:12})," "]})]})]}):d.jsx("div",{className:"text-sm text-gray-600 leading-relaxed whitespace-pre-wrap h-full overflow-y-auto max-h-[120px] custom-scrollbar pr-8",children:i.description?i.description:d.jsx("span",{className:"text-gray-300 italic text-xs",children:"..."})})]}),d.jsxs("div",{className:"absolute bottom-3 left-0 text-[10px] text-gray-400 flex items-center gap-1 bg-white/50 px-2 py-1 rounded-full",children:[d.jsx(d0,{size:10})," ",i.location]})]})]})},_2=({isOpen:i,onClose:e,students:t,defaultMessage:r,title:o})=>{const[c,u]=te.useState(r),[g,p]=te.useState(null);if(!i)return null;const y=t.filter(j=>j.phoneNumber&&j.phoneNumber.length>0);t.length-y.length;const v=()=>{navigator.clipboard.writeText(c),p("MSG"),setTimeout(()=>p(null),2e3)},w=()=>{const j=y.map(U=>U.phoneNumber).join(",");navigator.clipboard.writeText(j),p("PHONES"),setTimeout(()=>p(null),2e3)},A=j=>{const q=/iPad|iPhone|iPod/.test(navigator.userAgent)?"&":"?",P=`sms:${j}${q}body=${encodeURIComponent(c)}`;window.location.href=P};return d.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in zoom-in duration-200",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]",children:[d.jsxs("div",{className:"bg-zen-600 p-5 flex justify-between items-center text-white",children:[d.jsxs("div",{children:[d.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[d.jsx(g2,{size:24}),o]}),d.jsxs("p",{className:"text-zen-100 text-xs mt-1",children:[" ",t.length," "]})]}),d.jsx("button",{onClick:e,className:"p-2 bg-white/20 hover:bg-white/30 rounded-full transition-colors",children:d.jsx(ns,{size:20})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:[d.jsxs("div",{className:"mb-6",children:[d.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 flex justify-between",children:[d.jsx("span",{children:""}),d.jsxs("button",{onClick:v,className:"text-zen-600 hover:text-zen-800 flex items-center gap-1 transition-colors",children:[g==="MSG"?d.jsx(Cu,{size:12}):d.jsx(Kp,{size:12}),g==="MSG"?"":""]})]}),d.jsx("textarea",{value:c,onChange:j=>u(j.target.value),className:"w-full p-4 rounded-xl border border-gray-200 focus:ring-2 focus:ring-zen-500 focus:outline-none min-h-[140px] text-base font-medium leading-relaxed text-gray-900 shadow-sm bg-white resize-none"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-end mb-2",children:[d.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase",children:[" (",y.length,")"]}),y.length>0&&d.jsxs("button",{onClick:w,className:"text-xs bg-white border border-gray-300 px-2 py-1 rounded text-gray-600 hover:bg-gray-50 flex items-center gap-1",children:[g==="PHONES"?d.jsx(Cu,{size:12}):d.jsx(Kp,{size:12}),""]})]}),d.jsxs("div",{className:"space-y-2",children:[y.map(j=>d.jsxs("div",{className:"bg-white p-3 rounded-xl border border-gray-200 shadow-sm flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-zen-50 flex items-center justify-center text-zen-600 font-bold text-xs",children:j.name.charAt(0)}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-bold text-gray-800",children:j.name}),d.jsx("p",{className:"text-xs text-gray-500 font-mono",children:j.phoneNumber})]})]}),d.jsxs("button",{onClick:()=>A(j.phoneNumber),className:"bg-green-500 hover:bg-green-600 text-white p-2 rounded-lg flex items-center gap-1 text-xs font-bold transition-colors shadow-sm active:scale-95",children:[d.jsx(y2,{size:14})," "]})]},j.id)),t.filter(j=>!j.phoneNumber).map(j=>d.jsx("div",{className:"bg-gray-100 p-3 rounded-xl border border-gray-200 flex items-center justify-between opacity-60",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-bold text-xs",children:j.name.charAt(0)}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-bold text-gray-600",children:j.name}),d.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[d.jsx(o3,{size:10})," "]})]})]})},j.id))]}),y.length===0&&d.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:""})]})]}),d.jsx("div",{className:"p-4 bg-white border-t border-gray-100 text-center",children:d.jsx("button",{onClick:e,className:"text-gray-500 font-bold text-sm hover:bg-gray-100 px-6 py-2 rounded-full transition-colors",children:""})})]})})},z3=({session:i,instructor:e,targetDate:t,onClose:r})=>{var Ne,lt;const{instructors:o,students:c,classes:u,updateClass:g,addInstructor:p,updateInstructor:y,deleteInstructor:v,bookClass:w,cancelClass:A,formatDateKey:j,checkInstructorConflict:U}=ks(),q=u.find(pe=>pe.id===i.id)||i,[P,ie]=te.useState("INSTRUCTOR"),ve=j(t),be=(Ne=q.substitutions)==null?void 0:Ne[ve],he=!!be,we=q.instructorId,de=be||null,[N,R]=te.useState(we),[C,k]=te.useState(de),[I,O]=te.useState(he?"SUBSTITUTE":"BASE"),T=o.find(pe=>pe.id===N)||{name:"",imageUrl:""},ue=o.find(pe=>pe.id===C),[me,V]=te.useState(!1),[W,re]=te.useState(""),[ye,ge]=te.useState(""),[D,B]=te.useState(null),[J,fe]=te.useState(""),[ce,Ce]=te.useState(null),[He,it]=te.useState(!1),[at,Lt]=te.useState(!1),[Bt,Zt]=te.useState(""),[Tn,Pt]=te.useState(""),oe=((lt=q.bookings)==null?void 0:lt[ve])||[],Ve=c.filter(pe=>oe.includes(pe.id)),Me=c.filter(pe=>!oe.includes(pe.id)),Ye=oe.length-Ve.length,Ge=Ye>0,_e=Me.filter(pe=>{var Fe,ke;const De=J.toLowerCase();return De?pe.name.toLowerCase().includes(De)||pe.id.toLowerCase().includes(De)||((Fe=pe.username)==null?void 0:Fe.toLowerCase().includes(De))||((ke=pe.phoneNumber)==null?void 0:ke.includes(De)):!1}),Ke=async()=>{var ke;if(N!==we){const Qe=U(N,q.dayOfWeek,q.startTimeStr,q.durationMinutes,q.id);if(Qe.conflict){alert(` 

${T.name} 
${Qe.className} (${Qe.time})`);return}}if(C&&C!==N){const Qe=U(C,q.dayOfWeek,q.startTimeStr,q.durationMinutes,q.id,t);if(Qe.conflict){alert(` 

${ue==null?void 0:ue.name}  ${ve} 
${Qe.className} (${Qe.time})`);return}}const pe={};N!==we&&(pe.instructorId=N);const De={...q.substitutions||{}};let Fe=!1;if(C&&C!==N?(C!==de&&(Fe=!0),De[ve]=C):(de&&(Fe=!0),delete De[ve]),pe.substitutions=De,await g(q.id,pe),Fe&&C&&Ve.length>0){const Qe=t.toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"}),Ze=["","","","","","",""][t.getDay()],vt=`${Qe} (${Ze}) ${q.startTimeStr}`,wt=((ke=o.find(xt=>xt.id===we))==null?void 0:ke.name)||"",qt=(ue==null?void 0:ue.name)||"",ln=`${vt} ${q.title} ${wt}  ${qt} `;Pt(""),Zt(ln),Lt(!0)}else r()},$=pe=>{I==="BASE"?(R(pe),C===pe&&k(null)):k(pe===N?null:pe)},ee=()=>{if(W&&ye){const pe=p({name:W,bio:ye});$(pe),V(!1),re(""),ge("")}},Z=(pe,De)=>{var Qe;const Fe=(Qe=pe.target.files)==null?void 0:Qe[0];if(!Fe)return;if(Fe.size>2*1024*1024){alert(" 2MB");return}B(De);const ke=new FileReader;ke.onload=Je=>{var vt;const Ze=new Image;Ze.onload=()=>{const wt=document.createElement("canvas"),qt=wt.getContext("2d"),ln=500,xt=500;let sn=Ze.width,xn=Ze.height;sn>xn?sn>ln&&(xn*=ln/sn,sn=ln):xn>xt&&(sn*=xt/xn,xn=xt),wt.width=sn,wt.height=xn,qt==null||qt.drawImage(Ze,0,0,sn,xn),y(De,{imageUrl:wt.toDataURL("image/jpeg",.8)}),B(null)},Ze.src=(vt=Je.target)==null?void 0:vt.result},ke.readAsDataURL(Fe)},xe=pe=>{var De;(De=document.getElementById(`file-upload-${pe}`))==null||De.click()},Te=async()=>{if(window.confirm(` ${Ye} ()

`)){const pe=Ve.map(De=>De.id);await g(q.id,{[`bookings.${ve}`]:pe})}},Re=()=>{const pe=t.toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"}),Fe=["","","","","","",""][t.getDay()],ke=` ${pe} (${Fe}) ${q.startTimeStr} ${q.title}`;Pt(""),Zt(ke),Lt(!0)},Le=()=>{const pe=t.toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"}),Fe=["","","","","","",""][t.getDay()];Pt(""),Zt(` ${pe} (${Fe}) ${q.title}...`),Lt(!0)};return at?d.jsx(_2,{isOpen:!0,onClose:r,students:Ve,defaultMessage:Bt,title:Tn}):d.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[d.jsxs("div",{className:"p-5 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx(Ll,{size:14,className:"text-gray-500"}),d.jsx("span",{className:"text-xs font-bold text-gray-600 bg-white border border-gray-200 px-2 py-0.5 rounded-full",children:t.toLocaleDateString("zh-TW",{year:"numeric",month:"numeric",day:"numeric"})}),d.jsxs("span",{className:"text-xs font-bold text-zen-600 bg-zen-50 border border-zen-200 px-2 py-0.5 rounded-full flex items-center gap-1",children:[d.jsx(Rl,{size:10}),q.pointsCost??1," "]})]}),d.jsx("h2",{className:"text-lg font-bold text-gray-800",children:q.title})]}),d.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-200",children:d.jsx(ns,{size:24})})]}),d.jsxs("div",{className:"flex border-b border-gray-200",children:[d.jsxs("button",{onClick:()=>ie("INSTRUCTOR"),className:`flex-1 py-3 text-sm font-semibold flex items-center justify-center gap-2 transition-colors ${P==="INSTRUCTOR"?"text-zen-600 border-b-2 border-zen-600 bg-white":"text-gray-500 bg-gray-50 hover:bg-gray-100"}`,children:[d.jsx(Bn,{size:18}),""]}),d.jsxs("button",{onClick:()=>ie("STUDENTS"),className:`flex-1 py-3 text-sm font-semibold flex items-center justify-center gap-2 transition-colors ${P==="STUDENTS"?"text-zen-600 border-b-2 border-zen-600 bg-white":"text-gray-500 bg-gray-50 hover:bg-gray-100"}`,children:[d.jsx(Ju,{size:18})," (",Ve.length,")",Ge&&d.jsx(io,{size:16,className:"text-red-500 animate-pulse"})]})]}),d.jsxs("div",{className:"p-0 overflow-y-auto flex-1 bg-white",children:[P==="INSTRUCTOR"&&d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{onClick:()=>O("BASE"),className:`flex-1 relative p-4 rounded-xl border-2 cursor-pointer transition-all flex flex-col items-center gap-2 group ${I==="BASE"?"border-green-500 bg-green-50/50 shadow-md ring-2 ring-green-100":"border-gray-200 hover:border-green-300 bg-white"}`,children:[d.jsx("div",{className:`absolute top-0 left-0 px-2 py-1 text-[10px] font-bold rounded-br-lg ${I==="BASE"?"bg-green-500 text-white":"bg-gray-200 text-gray-500"}`,children:""}),T.imageUrl?d.jsx("img",{src:T.imageUrl,className:"w-14 h-14 rounded-full border-2 border-white shadow-sm mt-2 object-cover"}):d.jsx("div",{className:"w-14 h-14 rounded-full border-2 border-white shadow-sm mt-2 bg-gray-200 flex items-center justify-center text-gray-400",children:d.jsx(Bn,{size:24})}),d.jsx("span",{className:`font-bold text-sm ${I==="BASE"?"text-green-800":"text-gray-700"}`,children:T.name}),d.jsx("span",{className:"text-[10px] text-gray-400 font-medium group-hover:text-green-600 transition-colors",children:""})]}),d.jsx(X4,{className:"text-gray-300",size:20}),d.jsxs("div",{onClick:()=>O("SUBSTITUTE"),className:`flex-1 relative p-4 rounded-xl border-2 cursor-pointer transition-all flex flex-col items-center gap-2 ${I==="SUBSTITUTE"?"border-amber-500 bg-amber-50/50 shadow-md ring-2 ring-amber-100":"border-gray-200 hover:border-amber-300 bg-white"}`,children:[d.jsx("div",{className:`absolute top-0 right-0 px-2 py-1 text-[10px] font-bold rounded-bl-lg ${I==="SUBSTITUTE"?"bg-amber-500 text-white":"bg-gray-200 text-gray-500"}`,children:""}),C&&ue?d.jsxs(d.Fragment,{children:[ue.imageUrl?d.jsx("img",{src:ue.imageUrl,className:"w-14 h-14 rounded-full border-2 border-white shadow-sm mt-2 object-cover"}):d.jsx("div",{className:"w-14 h-14 rounded-full border-2 border-white shadow-sm mt-2 bg-gray-200 flex items-center justify-center text-gray-400",children:d.jsx(Bn,{size:24})}),d.jsx("span",{className:`font-bold text-sm ${I==="SUBSTITUTE"?"text-amber-800":"text-gray-700"}`,children:ue.name}),d.jsx("button",{onClick:pe=>{pe.stopPropagation(),k(null)},className:"absolute top-2 left-2 p-1 text-gray-400 hover:text-red-500",title:"",children:d.jsx(ns,{size:14})})]}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-[88px] text-gray-400",children:[d.jsx(Bn,{size:32,className:"mb-1 opacity-20"}),d.jsx("span",{className:"text-xs",children:""})]})]})]}),d.jsxs("div",{className:"flex justify-between items-center pt-2",children:[d.jsx("label",{className:`text-sm font-bold ${I==="BASE"?"text-green-700":"text-amber-700"}`,children:I==="BASE"?"":""}),!me&&d.jsxs("button",{onClick:()=>V(!0),className:"text-xs flex items-center gap-1 text-zen-600 font-medium hover:underline",children:[d.jsx(p2,{size:14})," "]})]}),me&&d.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[d.jsxs("div",{className:"flex gap-2 mb-2",children:[d.jsx("input",{type:"text",placeholder:"",value:W,onChange:pe=>re(pe.target.value),className:"text-sm border rounded px-2 py-1 flex-1 text-gray-900 bg-white"}),d.jsx("input",{type:"text",placeholder:"",value:ye,onChange:pe=>ge(pe.target.value),className:"text-sm border rounded px-2 py-1 flex-1 text-gray-900 bg-white"})]}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{onClick:()=>V(!1),className:"text-xs text-gray-500",children:""}),d.jsx("button",{onClick:ee,className:"text-xs bg-zen-600 text-white px-3 py-1 rounded",children:""})]})]}),d.jsx("div",{className:"space-y-2 pb-6",children:o.map(pe=>{const De=I==="BASE"?pe.id===N:pe.id===C,Fe=I==="BASE"?"green":"amber",ke=De?`ring-1 ring-${Fe}-500 border-${Fe}-500 bg-${Fe}-50`:"border-gray-200 hover:bg-gray-50";return d.jsxs("div",{onClick:()=>$(pe.id),className:`flex items-center justify-between p-2 rounded-lg border cursor-pointer transition-all ${ke}`,children:[d.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[d.jsxs("div",{className:"relative group/avatar",onClick:Qe=>{Qe.stopPropagation(),xe(pe.id)},children:[d.jsx("div",{className:"w-9 h-9 rounded-full overflow-hidden bg-gray-200 relative flex items-center justify-center",children:D===pe.id?d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-10",children:d.jsx(vn,{size:12,className:"animate-spin text-white"})}):pe.imageUrl?d.jsx("img",{src:pe.imageUrl,className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center text-gray-400",children:d.jsx(Bn,{size:16})})}),d.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-full flex items-center justify-center opacity-0 group-hover/avatar:opacity-100 transition-opacity z-20",children:d.jsx(Xu,{size:14,className:"text-white"})}),d.jsx("input",{id:`file-upload-${pe.id}`,type:"file",className:"hidden",accept:"image/*",onChange:Qe=>Z(Qe,pe.id),onClick:Qe=>Qe.stopPropagation()})]}),d.jsx("span",{className:`text-sm ${De?`font-bold text-${Fe}-900`:"text-gray-700"}`,children:pe.name})]}),De&&d.jsx(Cu,{size:16,className:`text-${Fe}-600`}),!De&&d.jsx("button",{onClick:Qe=>{Qe.stopPropagation(),v(pe.id)},className:"text-gray-300 hover:text-red-500 p-1",children:d.jsx(na,{size:14})})]},pe.id)})})]}),P==="STUDENTS"&&d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"mb-6 grid grid-cols-2 gap-3",children:[d.jsxs("button",{onClick:Re,className:"flex items-center justify-center gap-2 p-3 rounded-xl border border-red-100 bg-red-50 text-red-600 hover:bg-red-100 hover:border-red-200 transition-all font-bold text-sm shadow-sm",children:[d.jsx(J4,{size:18}),""]}),d.jsxs("button",{onClick:Le,className:"flex items-center justify-center gap-2 p-3 rounded-xl border border-blue-100 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:border-blue-200 transition-all font-bold text-sm shadow-sm",children:[d.jsx(g2,{size:18}),""]})]}),d.jsxs("div",{className:"mb-4 flex gap-2 relative",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg bg-white focus-within:ring-2 focus-within:ring-zen-500 overflow-hidden",children:[d.jsx(f0,{size:16,className:"ml-3 text-gray-400 shrink-0"}),d.jsx("input",{type:"text",placeholder:ce?ce.name:" (/ID/)...",value:J,onChange:pe=>{fe(pe.target.value),it(!0),ce&&Ce(null)},onFocus:()=>it(!0),className:"w-full p-2 text-sm outline-none text-gray-900 bg-transparent"}),ce&&d.jsx("button",{onClick:()=>{Ce(null),fe("")},className:"p-2 text-gray-400 hover:text-red-500",children:d.jsx(ns,{size:16})})]}),He&&J&&d.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-48 overflow-y-auto",children:_e.length>0?_e.map(pe=>d.jsxs("div",{onClick:()=>{Ce(pe),fe(""),it(!1)},className:"p-2 hover:bg-gray-50 cursor-pointer flex justify-between items-center border-b border-gray-50 last:border-0",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-sm font-bold text-gray-800",children:pe.name}),d.jsxs("span",{className:"text-xs text-gray-400",children:["@",pe.username||pe.id]})]}),pe.phoneNumber&&d.jsx("span",{className:"text-xs text-gray-400 font-mono",children:pe.phoneNumber})]},pe.id)):d.jsx("div",{className:"p-3 text-xs text-gray-400 text-center",children:""})}),He&&d.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>it(!1)})]}),d.jsx("button",{disabled:!ce,onClick:async()=>{if(ce){const pe=await w(q.id,ce.id,t);pe.success?(Ce(null),fe("")):pe.message&&alert(pe.message)}},className:"bg-zen-600 text-white px-4 py-2 rounded-lg text-sm font-bold disabled:opacity-50 whitespace-nowrap",children:""})]}),Ge&&d.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center justify-between animate-in slide-in-from-top-2 shadow-sm",children:[d.jsxs("div",{className:"text-xs text-red-700",children:[d.jsxs("div",{className:"font-bold flex items-center gap-1 mb-1",children:[d.jsx(io,{size:14})," "]}),d.jsxs("div",{children:[" ",d.jsx("b",{children:Ye})," ()"]})]}),d.jsxs("button",{onClick:Te,className:"bg-white text-red-600 border border-red-200 px-3 py-1.5 rounded-lg text-xs font-bold hover:bg-red-50 shadow-sm flex items-center gap-1",children:[d.jsx(C3,{size:12}),""]})]}),d.jsxs("div",{className:"space-y-2",children:[Ve.map(pe=>d.jsxs("div",{className:"flex justify-between items-center p-3 border border-gray-200 rounded-lg bg-white",children:[d.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[pe.avatarUrl?d.jsx("img",{src:pe.avatarUrl,className:"w-8 h-8 rounded-full bg-gray-200 object-cover shrink-0"}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center shrink-0 text-gray-400",children:d.jsx(qa,{size:16})}),d.jsx("div",{className:"text-sm font-bold text-black",style:{color:"black"},children:pe.name})]}),d.jsx("button",{onClick:()=>A(q.id,pe.id,t),className:"text-red-500 text-xs font-bold hover:bg-red-50 px-3 py-1.5 rounded border border-red-100 shrink-0",children:""})]},pe.id)),Ve.length===0&&d.jsx("p",{className:"text-center text-gray-400 text-sm py-4",children:""})]})]})]}),d.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-end gap-3",children:[d.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg text-gray-600 hover:bg-gray-200 text-sm font-medium",children:""}),P==="INSTRUCTOR"&&d.jsx("button",{onClick:Ke,className:"px-6 py-2 rounded-lg bg-zen-600 text-white text-sm font-bold hover:bg-zen-700 shadow-md",children:""})]})]})})},P3=({onClose:i})=>{const{students:e,classes:t,addStudent:r,updateStudent:o,deleteStudent:c,cancelClass:u,resetStudentPassword:g,adminCreateStudent:p}=ks(),[y,v]=te.useState(""),[w,A]=te.useState(null),[j,U]=te.useState(!1),[q,P]=te.useState(!1),[ie,ve]=te.useState(!1),[be,he]=te.useState(!1),[we,de]=te.useState(!1),[N,R]=te.useState(!1),[C,k]=te.useState(!1),I=te.useRef(null),[O,T]=te.useState(!1),[ue,me]=te.useState(""),[V,W]=te.useState({name:"",username:"",email:"",password:"",phoneNumber:"",hasPaid:!1,avatarUrl:"",membershipType:"CREDIT",credits:0,unlimitedExpiry:""}),re=e.filter(oe=>{var Me,Ye,Ge;const Ve=y.toLowerCase();return oe.name.toLowerCase().includes(Ve)||((Me=oe.username)==null?void 0:Me.toLowerCase().includes(Ve))||((Ye=oe.email)==null?void 0:Ye.toLowerCase().includes(Ve))||oe.id.toLowerCase().includes(Ve)||((Ge=oe.phoneNumber)==null?void 0:Ge.includes(Ve))});e.find(oe=>oe.id===w);const ye=w||j,ge=w?t.flatMap(oe=>{const Ve=oe.bookings||{};return Object.entries(Ve).filter(([Me,Ye])=>Ye.includes(w)).map(([Me])=>{const[Ye,Ge,_e]=Me.split("-").map(Number),[Ke,$]=oe.startTimeStr.split(":").map(Number),ee=new Date(Ye,Ge-1,_e),Z=new Date(Ye,Ge-1,_e,Ke,$);return{classId:oe.id,title:oe.title,startTime:oe.startTimeStr,dayOfWeek:oe.dayOfWeek,dateKey:Me,dateObj:ee,fullDate:Z}})}):[],D=new Date,B=ge.filter(oe=>oe.fullDate>=D).sort((oe,Ve)=>oe.fullDate.getTime()-Ve.fullDate.getTime()),J=ge.filter(oe=>oe.fullDate<D).sort((oe,Ve)=>Ve.fullDate.getTime()-oe.fullDate.getTime()),fe=oe=>{A(oe.id),U(!1),P(!1),k(!1),ve(!1),R(!1);const Ve=oe.credits||0;me(Ve.toString()),W({name:oe.name,username:oe.username,email:oe.email||"",password:oe.password,phoneNumber:oe.phoneNumber||"",hasPaid:oe.hasPaid,avatarUrl:oe.avatarUrl,membershipType:oe.membershipType||"CREDIT",credits:Ve,unlimitedExpiry:oe.unlimitedExpiry||""})},ce=()=>{A(null),U(!1),k(!1),R(!1)},Ce=()=>{A(null),U(!0),P(!1),k(!1),R(!1),me("0"),W({name:"",username:"",email:"",password:"",phoneNumber:"",hasPaid:!1,avatarUrl:"",membershipType:"CREDIT",credits:0,unlimitedExpiry:""})},He=async()=>{if(V.name){he(!0),R(!1);try{const oe=ue===""?0:parseFloat(ue),Ve={...V,credits:oe},Me=Object.entries(Ve).reduce((Ye,[Ge,_e])=>(_e!==void 0&&(Ye[Ge]=_e),Ye),{});if(j)if(V.email){const Ye=V.password||Math.random().toString(36).slice(-8),Ge=await p(V.email,Ye,Me);Ge.success?(alert(` 

 ${V.email}
`),ce()):alert(`${Ge.message}`)}else{const Ye=r(Me);Ye&&(A(Ye),U(!1))}else w&&await o(w,Me);R(!0),setTimeout(()=>R(!1),2e3)}catch(oe){console.error("Save Error:",oe),alert("")}finally{he(!1)}}},it=async()=>{if(w){de(!0);try{const oe=await c(w);oe.success?(oe.message&&alert(oe.message),ce(),W({name:"",username:"",email:"",password:"",phoneNumber:"",hasPaid:!1,avatarUrl:""})):alert(oe.message||"")}catch(oe){console.error(oe),alert("")}finally{de(!1)}}},at=async()=>{w&&(await g(w),k(!1))},Lt=oe=>{var Ye;const Ve=(Ye=oe.target.files)==null?void 0:Ye[0];if(!Ve)return;if(Ve.size>2*1024*1024){alert(" 2MB");return}T(!0);const Me=new FileReader;Me.onload=Ge=>{var Ke;const _e=new Image;_e.onload=()=>{const $=document.createElement("canvas"),ee=$.getContext("2d");$.width=500,$.height=500,ee==null||ee.drawImage(_e,0,0,500,500);const Z=$.toDataURL("image/jpeg",.8);W(xe=>({...xe,avatarUrl:Z})),T(!1),w&&o(w,{avatarUrl:Z})},_e.src=(Ke=Ge.target)==null?void 0:Ke.result},Me.readAsDataURL(Ve)},Bt=oe=>{W(Ve=>({...Ve,membershipType:oe}))},Zt=oe=>{const Ve=oe.target.value;(Ve===""||/^\d*\.?\d*$/.test(Ve))&&(me(Ve),W(Me=>({...Me,credits:Ve===""?0:parseFloat(Ve)})))},Tn=oe=>{const Ve=ue===""?0:parseFloat(ue),Me=Math.max(0,Ve+oe);me(Me.toString()),W(Ye=>({...Ye,credits:Me}))},Pt=oe=>{const Ve=["","","","","","",""],Me=oe.dayOfWeek===7?"":Ve[oe.dayOfWeek];return d.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-xl hover:border-zen-300 transition-colors shadow-sm",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[d.jsxs("span",{className:"text-sm font-bold text-zen-700 bg-zen-50 px-2.5 py-1 rounded-full",children:[Me," ",oe.startTime]}),d.jsx("span",{className:"text-sm text-gray-400 flex items-center gap-1",children:oe.dateObj.toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"})})]}),d.jsx("p",{className:"text-base font-bold text-gray-800",children:oe.title})]}),d.jsx("button",{onClick:()=>u(oe.classId,w,oe.dateObj),className:"text-red-500 hover:bg-red-50 p-3 rounded-xl transition-colors bg-white border border-red-100",title:"",children:d.jsx(na,{size:20})})]},`${oe.classId}-${oe.dateKey}`)};return d.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-gray-100 sm:bg-black/50 sm:backdrop-blur-sm sm:p-4",children:d.jsxs("div",{className:"bg-white w-full h-full sm:rounded-2xl sm:shadow-2xl sm:max-w-5xl sm:h-[85vh] flex overflow-hidden relative",children:[d.jsxs("div",{className:`w-full md:w-1/3 border-r border-gray-200 bg-gray-50 flex flex-col ${ye?"hidden md:flex":"flex h-full"}`,children:[d.jsxs("div",{className:"p-4 border-b border-gray-200 bg-white sticky top-0 z-10 flex justify-between items-center",children:[d.jsx("div",{children:d.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[d.jsx(qa,{size:24,className:"text-zen-600"}),""]})}),d.jsx("button",{onClick:i,className:"md:hidden p-2 text-gray-500 hover:bg-gray-100 rounded-full",children:d.jsx(ns,{size:28})})]}),d.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:d.jsxs("div",{className:"relative",children:[d.jsx(f0,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),d.jsx("input",{type:"text",placeholder:" (/Email/)...",value:y,onChange:oe=>v(oe.target.value),className:"w-full pl-10 pr-4 py-3 text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-zen-500 text-gray-900 bg-white"})]})}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2 pb-20",children:[d.jsxs("button",{onClick:Ce,className:"w-full flex items-center gap-4 p-4 rounded-xl text-left text-zen-700 bg-zen-50 hover:bg-zen-100 border border-zen-200 transition-colors mb-2",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-zen-200 flex items-center justify-center",children:d.jsx(m0,{size:20})}),d.jsx("span",{className:"font-bold text-base",children:" ()"})]}),re.map(oe=>{const Ve=t.reduce((Ye,Ge)=>{const _e=Ge.bookings||{};return Ye+Object.values(_e).filter(Ke=>Ke.includes(oe.id)).length},0),Me=oe.membershipType==="UNLIMITED";return d.jsxs("button",{onClick:()=>fe(oe),className:`w-full flex items-center gap-4 p-4 rounded-xl text-left transition-colors ${w===oe.id?"bg-white shadow-md ring-1 ring-gray-200 z-10 border-l-4 border-l-zen-600":"hover:bg-gray-100 bg-white border border-gray-100"}`,children:[d.jsxs("div",{className:"relative",children:[oe.avatarUrl?d.jsx("img",{src:oe.avatarUrl,alt:oe.name,className:"w-12 h-12 rounded-full bg-gray-200 object-cover"}):d.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-gray-400",children:d.jsx(qa,{size:20})}),d.jsx("div",{className:`absolute -top-1 -right-1 w-4 h-4 rounded-full border-2 border-white ${Me?"bg-green-500":"bg-blue-500"}`,title:Me?"Unlimited":"Credit"})]}),d.jsxs("div",{className:"overflow-hidden flex-1",children:[d.jsxs("div",{className:"flex justify-between items-center mb-1",children:[d.jsx("p",{className:"font-bold text-lg text-gray-900 truncate",children:oe.name}),Ve>0&&d.jsxs("span",{className:"bg-zen-100 text-zen-700 text-xs font-bold px-2 py-0.5 rounded-full",children:[Ve," "]})]}),d.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[d.jsx("span",{className:"truncate",children:oe.email||oe.username}),oe.phoneNumber&&d.jsx("span",{className:"text-xs font-mono",children:oe.phoneNumber})]})]})]},oe.id)})]})]}),d.jsxs("div",{className:`flex-1 bg-white flex flex-col w-full h-full ${ye?"flex fixed inset-0 sm:static z-20":"hidden md:flex"}`,children:[d.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100 bg-white shadow-sm sm:shadow-none z-30 sticky top-0",children:[d.jsxs("button",{onClick:ce,className:"md:hidden flex items-center gap-1 text-gray-600 font-medium px-3 py-2 rounded-lg bg-gray-100 hover:bg-gray-200",children:[d.jsx(c0,{size:20}),""]}),d.jsx("div",{className:"flex-1"}),d.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 p-2 rounded-full hover:bg-gray-100",children:d.jsx(ns,{size:28})})]}),w||j?d.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-32 sm:px-12 sm:pb-12 bg-white",children:[d.jsxs("div",{className:"flex items-center gap-6 mb-8 mt-6",children:[d.jsxs("div",{className:"w-24 h-24 rounded-full bg-gray-100 flex items-center justify-center text-3xl font-bold text-gray-400 overflow-hidden relative group cursor-pointer border-4 border-white shadow-sm shrink-0",onClick:()=>{var oe;return(oe=I.current)==null?void 0:oe.click()},children:[O?d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-10",children:d.jsx(vn,{className:"animate-spin text-white",size:32})}):null,V.avatarUrl?d.jsx("img",{src:V.avatarUrl,alt:"avatar",className:"w-full h-full object-cover"}):d.jsx(qa,{size:48,className:"text-gray-300"}),d.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(Xu,{size:24,className:"text-white"})})]}),d.jsx("input",{type:"file",ref:I,hidden:!0,accept:"image/*",onChange:Lt}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 break-all line-clamp-2",children:V.name||(j?"":"")}),d.jsx("p",{className:"text-gray-500 text-base",children:j?"":`ID: ${w}`}),V.phoneNumber&&d.jsxs("p",{className:"text-zen-600 text-base font-medium flex items-center gap-1 mt-1",children:[d.jsx(ao,{size:16})," ",V.phoneNumber]})]})]}),d.jsxs("div",{className:"space-y-8 max-w-lg mx-auto sm:mx-0",children:[d.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 rounded-2xl border border-gray-200 shadow-sm",children:[d.jsxs("h3",{className:"text-base font-bold text-gray-700 mb-4 flex items-center gap-2",children:[d.jsx(u0,{size:20}),""]}),d.jsxs("div",{className:"flex bg-white rounded-xl p-1.5 border border-gray-200 mb-6",children:[d.jsxs("button",{onClick:()=>Bt("CREDIT"),className:`flex-1 py-3 text-sm font-bold rounded-lg flex items-center justify-center gap-2 transition-all ${V.membershipType==="CREDIT"?"bg-blue-100 text-blue-700 shadow-sm ring-2 ring-blue-500/20":"text-gray-500 hover:bg-gray-50"}`,children:[d.jsx(Rl,{size:18}),""]}),d.jsxs("button",{onClick:()=>Bt("UNLIMITED"),className:`flex-1 py-3 text-sm font-bold rounded-lg flex items-center justify-center gap-2 transition-all ${V.membershipType==="UNLIMITED"?"bg-green-100 text-green-700 shadow-sm ring-2 ring-green-500/20":"text-gray-500 hover:bg-gray-50"}`,children:[d.jsx(f2,{size:18}),""]})]}),V.membershipType==="UNLIMITED"?d.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2",children:[d.jsx("label",{className:"block text-sm font-bold text-gray-500 uppercase tracking-wider mb-2",children:""}),d.jsx("input",{type:"date",value:V.unlimitedExpiry||"",onChange:oe=>W({...V,unlimitedExpiry:oe.target.value}),className:"w-full p-4 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 outline-none text-gray-900 text-lg cursor-pointer"}),d.jsx("p",{className:"text-xs text-gray-400 mt-2",children:""})]}):d.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2",children:[d.jsx("label",{className:"block text-sm font-bold text-gray-500 uppercase tracking-wider mb-2",children:""}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[d.jsx("button",{onClick:()=>Tn(-1),className:"w-12 h-12 rounded-xl border bg-white hover:bg-gray-50 text-gray-600 text-xl font-bold flex items-center justify-center active:scale-95 transition-transform",children:"-"}),d.jsx("input",{type:"text",inputMode:"decimal",value:ue,onChange:Zt,className:"flex-1 min-w-0 p-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none text-gray-900 text-center font-bold text-2xl"}),d.jsx("button",{onClick:()=>Tn(1),className:"w-12 h-12 rounded-xl border bg-white hover:bg-gray-50 text-gray-600 text-xl font-bold flex items-center justify-center active:scale-95 transition-transform",children:"+"})]}),d.jsx("p",{className:"text-xs text-gray-400 mt-2",children:""})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold text-gray-500 uppercase tracking-wider mb-2",children:""}),d.jsx("input",{type:"text",value:V.name||"",onChange:oe=>W({...V,name:oe.target.value}),className:"w-full p-4 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-zen-500 focus:outline-none font-medium text-gray-900 text-lg",placeholder:""})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-bold text-gray-500 uppercase tracking-wider mb-2 flex justify-between",children:["Email ()",j&&!V.email&&d.jsx("span",{className:"text-red-500 text-[10px] self-end",children:" Email"})]}),d.jsxs("div",{className:"relative",children:[d.jsx(m2,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),d.jsx("input",{type:"email",value:V.email||"",onChange:oe=>W({...V,email:oe.target.value}),className:"w-full pl-12 pr-4 py-4 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-zen-500 focus:outline-none text-gray-900 text-base",placeholder:""})]}),j&&V.email&&d.jsxs("p",{className:"text-[10px] text-green-600 mt-1 flex items-center gap-1",children:[d.jsx(Cu,{size:10})," "]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold text-gray-500 uppercase tracking-wider mb-2",children:""}),d.jsxs("div",{className:"relative",children:[d.jsx(ao,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),d.jsx("input",{type:"tel",value:V.phoneNumber||"",onChange:oe=>W({...V,phoneNumber:oe.target.value}),className:"w-full pl-12 pr-4 py-4 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-zen-500 focus:outline-none text-gray-900 text-base",placeholder:"09xx..."})]})]})]}),j&&d.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-100 rounded-xl text-xs text-blue-800 leading-relaxed",children:["  ",d.jsx("b",{children:"Email"})," "]}),!j&&d.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl border border-yellow-100",children:[d.jsx("label",{className:"block text-sm font-bold text-yellow-700 uppercase tracking-wider mb-3",children:""}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"text-sm text-yellow-800",children:[d.jsx("p",{children:""}),d.jsx("p",{className:"text-xs mt-1 opacity-80",children:""})]}),d.jsxs("button",{type:"button",onClick:at,className:"flex items-center gap-2 bg-white border border-yellow-300 text-yellow-700 px-4 py-2 rounded-lg text-sm font-bold hover:bg-yellow-100 shadow-sm transition-colors",children:[d.jsx(Bk,{size:16}),""]})]})]})]}),!j&&w&&d.jsxs("div",{className:"pt-8 mt-8 border-t border-gray-100",children:[d.jsxs("h3",{className:"text-base font-bold text-gray-700 mb-4 flex items-center gap-2",children:[d.jsx(Ll,{size:20}),""]}),B.length===0&&J.length===0?d.jsx("p",{className:"text-sm text-gray-400 italic bg-gray-50 p-4 rounded-xl border border-dashed border-gray-200 text-center",children:""}):d.jsxs("div",{className:"space-y-4",children:[B.length>0&&d.jsxs("div",{className:"space-y-3",children:[d.jsxs("h4",{className:"text-sm font-bold text-zen-600 uppercase tracking-wider flex items-center gap-2",children:[d.jsx(d2,{size:14}),"  (",B.length,")"]}),B.map((oe,Ve)=>Pt(oe))]}),J.length>0&&d.jsxs("div",{className:"pt-2",children:[d.jsxs("button",{onClick:()=>ve(!ie),className:"flex items-center gap-2 text-sm font-bold text-gray-500 hover:text-gray-700 w-full p-2 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors justify-center border border-gray-200",children:[d.jsx(h0,{size:16}),ie?"":` (${J.length})`,ie?d.jsx(hk,{size:16}):d.jsx(o0,{size:16})]}),ie&&d.jsx("div",{className:"space-y-3 mt-3 animate-in slide-in-from-top-2 fade-in",children:J.map((oe,Ve)=>d.jsx("div",{className:"opacity-75 hover:opacity-100 transition-opacity",children:Pt(oe)},`${oe.classId}-${oe.dateKey}-hist`))})]})]})]}),d.jsxs("div",{className:"pt-6 flex flex-wrap items-center justify-between gap-4 border-t border-gray-100 mt-8 pb-10",children:[!j&&(q?d.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[d.jsx("button",{onClick:()=>P(!1),disabled:we,className:"flex-1 px-4 py-3 rounded-xl text-gray-600 bg-gray-100 text-base font-medium hover:bg-gray-200",children:""}),d.jsx("button",{onClick:it,disabled:we,className:"flex-1 px-4 py-3 rounded-xl text-white bg-red-600 text-base font-medium hover:bg-red-700 flex items-center justify-center gap-2 shadow-md",children:we?d.jsx(vn,{size:20,className:"animate-spin"}):""})]}):d.jsxs("button",{onClick:()=>P(!0),disabled:we,className:"text-red-500 hover:text-red-700 hover:bg-red-50 px-5 py-3 rounded-xl text-base font-medium flex items-center gap-2 transition-colors w-full sm:w-auto justify-center sm:justify-start border border-red-100 sm:border-none",children:[d.jsx(na,{size:20}),""]})),d.jsx("div",{className:"flex gap-3 w-full sm:w-auto ml-auto",children:d.jsx("button",{onClick:He,disabled:!V.name||be||we,className:`flex-1 px-8 py-3.5 rounded-xl font-bold shadow-lg shadow-zen-200 flex items-center justify-center gap-2 text-base transition-all
                                        ${N?"bg-green-600 text-white hover:bg-green-700":"bg-zen-600 text-white hover:bg-zen-700 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:be?d.jsxs(d.Fragment,{children:[d.jsx(vn,{size:20,className:"animate-spin"}),"..."]}):N?d.jsxs(d.Fragment,{children:[d.jsx(Cu,{size:20}),""]}):d.jsxs(d.Fragment,{children:[d.jsx(Wu,{size:20}),j?" & ":""]})})})]})]})]}):d.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-300 p-8 text-center",children:[d.jsx(qa,{size:80,className:"mb-6 text-gray-200"}),d.jsxs("p",{className:"text-xl font-medium text-gray-400",children:["",d.jsx("br",{}),""]})]})]})]})})},rl=({label:i,icon:e,children:t})=>d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:i}),d.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg focus-within:ring-2 focus-within:ring-zen-500 bg-white overflow-hidden transition-all hover:border-gray-400",children:[e&&d.jsx("div",{className:"pl-3 flex items-center justify-center text-gray-400 select-none",children:d.jsx(e,{size:16})}),d.jsx("div",{className:"flex-1 min-w-0",children:t})]})]}),U3=({classId:i,initialDayOfWeek:e,onClose:t})=>{const{classes:r,addClass:o,updateClass:c,deleteClass:u,deleteClassWithRefund:g,instructors:p,checkInstructorConflict:y,students:v,getNextClassDate:w,formatDateKey:A}=ks(),j=i?r.find(me=>me.id===i):void 0,[U,q]=te.useState(!1),[P,ie]=te.useState({title:"",description:"",dayOfWeek:1,startTimeStr:"10:00",durationMinutes:60,instructorId:"",capacity:20,location:"A ",difficulty:"Beginner",pointsCost:1}),[ve,be]=te.useState(!1),[he,we]=te.useState(!1),[de,N]=te.useState(""),[R,C]=te.useState([]);te.useEffect(()=>{var me;ie(j?{title:j.title,description:j.description||"",dayOfWeek:j.dayOfWeek,startTimeStr:j.startTimeStr,durationMinutes:j.durationMinutes,instructorId:j.instructorId,capacity:j.capacity,location:j.location,difficulty:j.difficulty,pointsCost:j.pointsCost??1}:{title:"",description:"",dayOfWeek:e||1,startTimeStr:"10:00",durationMinutes:60,instructorId:((me=p[0])==null?void 0:me.id)||"",capacity:20,location:"A ",difficulty:"Beginner",pointsCost:1})},[j,e,p]);const k=async me=>{me.preventDefault();const V=y(P.instructorId,P.dayOfWeek,P.startTimeStr,P.durationMinutes,j==null?void 0:j.id);if(V.conflict){alert(` 


${V.className} (${V.time})

`);return}q(!0);const W={...P,isSubstitute:!1,originalInstructorId:null};try{j?await c(j.id,W):await o(W),setTimeout(t,50)}catch(re){console.error(re),q(!1)}},I=async()=>{if(j){q(!0);const me=j.bookings||{},V=A(new Date),W=new Set;Object.entries(me).forEach(([ye,ge])=>{ye>=V&&ge.forEach(D=>W.add(D))});const re=v.filter(ye=>W.has(ye.id));if(re.length>0)try{g?await g(j.id):await u(j.id),C(re);const D=`${["","","","","","","",""][j.dayOfWeek]} ${j.startTimeStr} ${j.title}`;N(D),we(!0)}catch{alert(""),q(!1)}else await u(j.id),setTimeout(t,50)}},O=(me,V)=>{const[W,re]=P.startTimeStr.split(":");let ye=W,ge=re;me==="hour"&&(ye=V),me==="minute"&&(ge=V),ie({...P,startTimeStr:`${ye}:${ge}`})},T=P.startTimeStr.split(":")[0],ue=P.startTimeStr.split(":")[1];return he?d.jsx(_2,{isOpen:!0,onClose:t,students:R,defaultMessage:de,title:""}):d.jsx("div",{className:"fixed inset-0 z-[90] bg-black/50 backdrop-blur-sm overflow-y-auto",children:d.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg relative flex flex-col",children:[d.jsxs("div",{className:"p-5 border-b border-gray-100 flex justify-between items-center bg-gray-50 rounded-t-2xl sticky top-0 z-10",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-800",children:j?"":""}),d.jsx("button",{onClick:t,disabled:U,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50 p-2 hover:bg-gray-200 rounded-full transition-colors",children:d.jsx(ns,{size:24})})]}),d.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:""}),d.jsx("input",{required:!0,type:"text",value:P.title,onChange:me=>ie({...P,title:me.target.value}),className:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-zen-500 outline-none text-gray-900 bg-white",placeholder:"",disabled:U})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:""}),d.jsx("textarea",{value:P.description,onChange:me=>ie({...P,description:me.target.value}),className:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-zen-500 outline-none text-gray-900 bg-white min-h-[60px]",placeholder:"...",disabled:U})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(rl,{label:"",icon:Ll,children:d.jsxs("select",{required:!0,value:P.dayOfWeek,onChange:me=>ie({...P,dayOfWeek:parseInt(me.target.value,10)}),className:"w-full p-2.5 bg-transparent outline-none border-none text-gray-900 cursor-pointer [color-scheme:light]",disabled:U,children:[d.jsx("option",{value:1,children:""}),d.jsx("option",{value:2,children:""}),d.jsx("option",{value:3,children:""}),d.jsx("option",{value:4,children:""}),d.jsx("option",{value:5,children:""}),d.jsx("option",{value:6,children:""}),d.jsx("option",{value:7,children:""})]})}),d.jsx(rl,{label:" (24)",icon:d2,children:d.jsxs("div",{className:"flex w-full",children:[d.jsx("select",{value:T,onChange:me=>O("hour",me.target.value),className:"flex-1 p-2.5 bg-transparent outline-none border-none text-gray-900 cursor-pointer text-center appearance-none hover:bg-gray-50",disabled:U,children:Array.from({length:24}).map((me,V)=>d.jsx("option",{value:String(V).padStart(2,"0"),children:String(V).padStart(2,"0")},V))}),d.jsx("span",{className:"flex items-center text-gray-400 font-bold",children:":"}),d.jsx("select",{value:ue,onChange:me=>O("minute",me.target.value),className:"flex-1 p-2.5 bg-transparent outline-none border-none text-gray-900 cursor-pointer text-center appearance-none hover:bg-gray-50",disabled:U,children:Array.from({length:12}).map((me,V)=>d.jsx("option",{value:String(V*5).padStart(2,"0"),children:String(V*5).padStart(2,"0")},V*5))})]})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:" ()"}),d.jsx("input",{required:!0,type:"number",min:"15",step:"5",value:P.durationMinutes,onChange:me=>ie({...P,durationMinutes:parseInt(me.target.value)}),className:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-zen-500 outline-none text-gray-900 bg-white",disabled:U})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:""}),d.jsx("select",{value:P.instructorId,onChange:me=>ie({...P,instructorId:me.target.value}),className:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-zen-500 outline-none bg-white text-gray-900 cursor-pointer",disabled:U,children:p.map(me=>d.jsx("option",{value:me.id,children:me.name},me.id))})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(rl,{label:"",icon:Ju,children:d.jsx("input",{required:!0,type:"number",min:"1",value:P.capacity,onChange:me=>ie({...P,capacity:parseInt(me.target.value)}),className:"w-full p-2.5 bg-transparent outline-none border-none text-gray-900",disabled:U})}),d.jsx(rl,{label:" (Credits)",icon:Rl,children:d.jsx("input",{required:!0,type:"number",min:"0",step:"0.5",value:P.pointsCost,onChange:me=>ie({...P,pointsCost:parseFloat(me.target.value)}),className:"w-full p-2.5 bg-transparent outline-none border-none text-gray-900",disabled:U})})]}),d.jsx(rl,{label:"",icon:d0,children:d.jsxs("select",{required:!0,value:P.location,onChange:me=>ie({...P,location:me.target.value}),className:"w-full p-2.5 bg-transparent outline-none border-none text-gray-900 cursor-pointer",disabled:U,children:[d.jsx("option",{value:"A ",children:"A "}),d.jsx("option",{value:"B ",children:"B "}),d.jsx("option",{value:"C ",children:"C "}),d.jsx("option",{value:"D ",children:"D "}),d.jsx("option",{value:"E ",children:"E "})]})}),d.jsx(rl,{label:"",icon:ik,children:d.jsxs("select",{value:P.difficulty,onChange:me=>ie({...P,difficulty:me.target.value}),className:"w-full p-2.5 bg-transparent outline-none border-none text-gray-900 cursor-pointer",disabled:U,children:[d.jsx("option",{value:"Beginner",children:""}),d.jsx("option",{value:"Intermediate",children:""}),d.jsx("option",{value:"Advanced",children:""})]})}),d.jsxs("div",{className:"pt-4 flex items-center justify-between",children:[j?ve?d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{type:"button",onClick:()=>be(!1),disabled:U,className:"px-3 py-2 rounded-lg text-gray-600 bg-gray-100 text-sm font-medium hover:bg-gray-200 transition-colors",children:""}),d.jsxs("button",{type:"button",onClick:I,disabled:U,className:"px-3 py-2 rounded-lg text-white bg-red-600 text-sm font-medium hover:bg-red-700 flex items-center gap-1 shadow-md transition-colors",children:[U?d.jsx(vn,{size:16,className:"animate-spin"}):d.jsx(na,{size:16}),""]})]}):d.jsxs("button",{type:"button",onClick:()=>be(!0),disabled:U,className:"text-red-500 hover:bg-red-50 px-3 py-2.5 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",children:[d.jsx(na,{size:18}),""]}):d.jsx("div",{}),d.jsxs("button",{type:"submit",disabled:U,className:"bg-zen-600 text-white px-6 py-2.5 rounded-xl font-bold hover:bg-zen-700 shadow-lg shadow-zen-200 flex items-center gap-2 transition-transform active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed",children:[U?d.jsx(vn,{size:18,className:"animate-spin"}):d.jsx(Wu,{size:18}),j?"":""]})]})]})]})})})},L3=({onClose:i})=>{var k;const{instructors:e,addInstructor:t,updateInstructor:r,deleteInstructor:o}=ks(),[c,u]=te.useState(""),[g,p]=te.useState(null),[y,v]=te.useState(!1),[w,A]=te.useState(!1),j=te.useRef(null),[U,q]=te.useState(!1),[P,ie]=te.useState({name:"",bio:"",phoneNumber:"",defaultRate:800,imageUrl:""}),ve=e.filter(I=>{var O;return I.name.toLowerCase().includes(c.toLowerCase())||((O=I.phoneNumber)==null?void 0:O.includes(c))});e.find(I=>I.id===g);const be=g||y,he=I=>{p(I.id),v(!1),A(!1),ie({name:I.name,bio:I.bio,phoneNumber:I.phoneNumber||"",defaultRate:I.defaultRate||800,imageUrl:I.imageUrl})},we=()=>{p(null),v(!1)},de=()=>{p(null),v(!0),A(!1),ie({name:"",bio:"",phoneNumber:"",defaultRate:800,imageUrl:""})},N=()=>{if(P.name)if(y){const I=t(P);p(I),v(!1)}else g&&r(g,P)},R=()=>{g&&(o(g),we(),ie({name:"",bio:"",phoneNumber:"",defaultRate:800,imageUrl:""}))},C=I=>{var ue;const O=(ue=I.target.files)==null?void 0:ue[0];if(!O)return;if(O.size>2*1024*1024){alert(" 2MB");return}q(!0);const T=new FileReader;T.onload=me=>{var W;const V=new Image;V.onload=()=>{const re=document.createElement("canvas"),ye=re.getContext("2d"),ge=500,D=500;let B=V.width,J=V.height;B>J?B>ge&&(J*=ge/B,B=ge):J>D&&(B*=D/J,J=D),re.width=B,re.height=J,ye==null||ye.drawImage(V,0,0,B,J);const fe=re.toDataURL("image/jpeg",.8);ie(ce=>({...ce,imageUrl:fe})),q(!1),g&&r(g,{imageUrl:fe})},V.src=(W=me.target)==null?void 0:W.result},T.readAsDataURL(O)};return d.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-gray-100 sm:bg-black/50 sm:backdrop-blur-sm sm:p-4",children:d.jsxs("div",{className:"bg-white w-full h-full sm:rounded-2xl sm:shadow-2xl sm:max-w-5xl sm:h-[85vh] flex overflow-hidden relative",children:[d.jsxs("div",{className:`w-full md:w-1/3 border-r border-gray-200 bg-gray-50 flex flex-col ${be?"hidden md:flex":"flex h-full"}`,children:[d.jsxs("div",{className:"p-4 border-b border-gray-200 bg-white sticky top-0 z-10 flex justify-between items-center",children:[d.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[d.jsx(Bn,{size:24,className:"text-zen-600"}),""]}),d.jsx("button",{onClick:i,className:"md:hidden p-2 text-gray-500 hover:bg-gray-100 rounded-full",children:d.jsx(ns,{size:28})})]}),d.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:d.jsxs("div",{className:"relative",children:[d.jsx(f0,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),d.jsx("input",{type:"text",placeholder:" (/)...",value:c,onChange:I=>u(I.target.value),className:"w-full pl-10 pr-4 py-3 text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-zen-500 text-gray-900 bg-white"})]})}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2 pb-20",children:[d.jsxs("button",{onClick:de,className:"w-full flex items-center gap-4 p-4 rounded-xl text-left text-zen-700 bg-zen-50 hover:bg-zen-100 border border-zen-200 transition-colors mb-2",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-zen-200 flex items-center justify-center",children:d.jsx(m0,{size:20})}),d.jsx("span",{className:"font-bold text-base",children:""})]}),ve.map(I=>d.jsxs("button",{onClick:()=>he(I),className:`w-full flex items-center gap-4 p-4 rounded-xl text-left transition-colors ${g===I.id?"bg-white shadow-md ring-1 ring-gray-200 z-10 border-l-4 border-l-zen-600":"hover:bg-gray-100 bg-white border border-gray-100"}`,children:[I.imageUrl?d.jsx("img",{src:I.imageUrl,alt:I.name,className:"w-12 h-12 rounded-full bg-gray-200 object-cover"}):d.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-gray-400",children:d.jsx(Bn,{size:20})}),d.jsxs("div",{className:"overflow-hidden flex-1",children:[d.jsx("p",{className:"font-bold text-lg text-gray-900 truncate",children:I.name}),d.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[d.jsxs("span",{className:"truncate",children:["$",I.defaultRate,"/hr"]}),I.phoneNumber&&d.jsx("span",{className:"text-xs font-mono",children:I.phoneNumber})]})]})]},I.id))]})]}),d.jsxs("div",{className:`flex-1 bg-white flex flex-col w-full h-full ${be?"flex fixed inset-0 sm:static z-20":"hidden md:flex"}`,children:[d.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100 bg-white shadow-sm sm:shadow-none z-30 sticky top-0",children:[d.jsxs("button",{onClick:we,className:"md:hidden flex items-center gap-1 text-gray-600 font-medium px-3 py-2 rounded-lg bg-gray-100 hover:bg-gray-200",children:[d.jsx(c0,{size:20}),""]}),d.jsx("div",{className:"flex-1"}),d.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 p-2 rounded-full hover:bg-gray-100",children:d.jsx(ns,{size:28})})]}),g||y?d.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-32 sm:px-12 sm:pb-12 bg-white",children:[d.jsxs("div",{className:"flex items-center gap-6 mb-8 mt-6",children:[d.jsxs("div",{className:"w-24 h-24 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden relative group cursor-pointer border-4 border-white shadow-sm shrink-0",onClick:()=>{var I;return(I=j.current)==null?void 0:I.click()},children:[U?d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-10",children:d.jsx(vn,{className:"animate-spin text-white",size:32})}):null,P.imageUrl?d.jsx("img",{src:P.imageUrl,alt:"avatar",className:"w-full h-full object-cover"}):d.jsx(Bn,{size:48,className:"text-gray-300"}),d.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(Xu,{size:24,className:"text-white"})})]}),d.jsx("input",{type:"file",ref:j,hidden:!0,accept:"image/*",onChange:C}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 break-all line-clamp-2",children:P.name||(y?"":"")}),d.jsx("p",{className:"text-gray-500 text-base",children:y?"":`ID: ${g}`}),P.phoneNumber&&d.jsxs("p",{className:"text-zen-600 text-base font-medium flex items-center gap-1 mt-1",children:[d.jsx(ao,{size:16})," ",P.phoneNumber]})]})]}),d.jsxs("div",{className:"space-y-8 max-w-lg mx-auto sm:mx-0",children:[d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold text-gray-500 uppercase tracking-wider mb-2",children:""}),d.jsx("input",{type:"text",value:P.name||"",onChange:I=>ie({...P,name:I.target.value}),className:"w-full p-4 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-zen-500 focus:outline-none font-medium text-gray-900 text-lg",placeholder:"Sarah Jenks"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold text-gray-500 uppercase tracking-wider mb-2",children:""}),d.jsxs("div",{className:"relative",children:[d.jsx(ao,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),d.jsx("input",{type:"tel",value:P.phoneNumber||"",onChange:I=>ie({...P,phoneNumber:I.target.value}),className:"w-full pl-12 pr-4 py-4 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-zen-500 focus:outline-none text-gray-900 text-lg",placeholder:"09xx..."})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold text-gray-500 uppercase tracking-wider mb-2",children:" ($)"}),d.jsxs("div",{className:"relative",children:[d.jsx(Ik,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),d.jsx("input",{type:"number",value:((k=P.defaultRate)==null?void 0:k.toString())??"",onChange:I=>{const O=I.target.value;if(O===""){ie({...P,defaultRate:void 0});return}const T=parseInt(O,10);ie({...P,defaultRate:isNaN(T)?0:T})},className:"w-full pl-12 pr-4 py-4 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-zen-500 focus:outline-none font-mono text-gray-900 text-lg",style:{colorScheme:"light"}})]}),d.jsx("p",{className:"text-xs text-gray-400 mt-2",children:""})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold text-gray-500 uppercase tracking-wider mb-2",children:""}),d.jsx("textarea",{value:P.bio||"",onChange:I=>ie({...P,bio:I.target.value}),className:"w-full p-4 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-zen-500 focus:outline-none text-gray-900 min-h-[140px] text-base leading-relaxed",placeholder:"..."})]})]}),d.jsxs("div",{className:"pt-6 flex flex-wrap items-center justify-between gap-4 border-t border-gray-100 mt-8 pb-10",children:[!y&&(w?d.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[d.jsx("button",{onClick:()=>A(!1),className:"flex-1 px-4 py-3 rounded-xl text-gray-600 bg-gray-100 text-base font-medium hover:bg-gray-200",children:""}),d.jsx("button",{onClick:R,className:"flex-1 px-4 py-3 rounded-xl text-white bg-red-600 text-base font-medium hover:bg-red-700 flex items-center justify-center gap-2 shadow-md",children:""})]}):d.jsxs("button",{onClick:()=>A(!0),className:"text-red-500 hover:text-red-700 hover:bg-red-50 px-5 py-3 rounded-xl text-base font-medium flex items-center gap-2 transition-colors w-full sm:w-auto justify-center sm:justify-start border border-red-100 sm:border-none",children:[d.jsx(na,{size:20}),""]})),d.jsx("div",{className:"flex gap-3 w-full sm:w-auto ml-auto",children:d.jsxs("button",{onClick:N,disabled:!P.name,className:"flex-1 bg-zen-600 text-white px-8 py-3.5 rounded-xl font-bold hover:bg-zen-700 shadow-lg shadow-zen-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed text-base",children:[d.jsx(Wu,{size:20}),y?"":""]})})]})]})]}):d.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-300 p-8 text-center",children:[d.jsx(Bn,{size:80,className:"mb-6 text-gray-200"}),d.jsxs("p",{className:"text-xl font-medium text-gray-400",children:["",d.jsx("br",{}),""]})]})]})]})})},B3=({onClose:i})=>{const{students:e,instructors:t,classes:r,fetchArchivedClasses:o,allClassesHistory:c,pruneArchivedClasses:u,cleanupInactiveStudents:g,formatDateKey:p}=ks(),[y,v]=te.useState(!1),[w,A]=te.useState("IDLE"),[j,U]=te.useState(3),[q,P]=te.useState({deletedDocs:0,cleanedRecords:0}),[ie,ve]=te.useState("IDLE"),[be,he]=te.useState(null),[we,de]=te.useState(0),N=(re,ye,ge)=>{const D=[ye.join(","),...ge.map(Ce=>Ce.map(He=>`"${String(He??"").replace(/"/g,'""')}"`).join(","))].join(`
`),B=new Blob(["\uFEFF"+D],{type:"text/csv;charset=utf-8;"}),J=URL.createObjectURL(B),fe=document.createElement("a");fe.href=J;const ce=new Date().toISOString().split("T")[0].replace(/-/g,"");fe.setAttribute("download",`${re}_${ce}.csv`),document.body.appendChild(fe),fe.click(),document.body.removeChild(fe)},R=()=>{const re=["ID","","","","","","","",""],ye=e.map(ge=>[ge.id,ge.name,ge.phoneNumber||"",ge.username||"",ge.role,ge.membershipType==="UNLIMITED"?"":"",ge.credits||0,ge.unlimitedExpiry||"",ge.hasPaid?"":""]);N("ZenFlow_Students",re,ye)},C=()=>{const re=["ID","","",""],ye=t.map(ge=>[ge.id,ge.name,ge.defaultRate||800,ge.bio]);N("ZenFlow_Instructors",re,ye)},k=()=>{const re=["ID","","","","()","","","","",""],ge=[...r].sort((D,B)=>D.dayOfWeek!==B.dayOfWeek?D.dayOfWeek-B.dayOfWeek:D.startTimeStr.localeCompare(B.startTimeStr)).map(D=>{var J;const B=((J=t.find(fe=>fe.id===D.instructorId))==null?void 0:J.name)||"";return[D.id,D.title,D.dayOfWeek,D.startTimeStr,D.durationMinutes,B,D.location,D.difficulty,D.pointsCost??1,D.capacity]});N("ZenFlow_Schedule",re,ge)},I=async()=>{v(!0),await o(),v(!1);const re=["","","","","","","","",""],ye=[],ge=["","","","","","",""];c.forEach(D=>{if(!D.bookings)return;const B=D.bookings;Object.entries(B).forEach(([J,fe])=>{var it,at;const ce=new Date(J),Ce=ge[ce.getDay()];let He=((it=t.find(Lt=>Lt.id===D.instructorId))==null?void 0:it.name)||"";if(D.substitutions&&D.substitutions[J]){const Lt=(at=t.find(Bt=>Bt.id===D.substitutions[J]))==null?void 0:at.name;Lt&&(He=`${Lt} ()`)}fe.forEach(Lt=>{const Bt=e.find(Zt=>Zt.id===Lt);Bt&&ye.push([J,Ce,D.startTimeStr,D.title,He,Bt.name,Bt.phoneNumber||"",Bt.membershipType==="UNLIMITED"?"":"",(D.pointsCost??1).toString()])})})}),ye.sort((D,B)=>B[0].localeCompare(D[0])),N("ZenFlow_Master_Booking_Log",re,ye)},O=async()=>{v(!0),await o(),v(!1);const re=ye=>{const ge=new Set;try{return JSON.stringify(ye,(D,B)=>{if(typeof B=="object"&&B!==null){try{if(B.window===B||B instanceof HTMLElement)return}catch{return}if(ge.has(B))return;ge.add(B)}return B},2)}catch(D){return console.error("Stringify failed",D),"{}"}};try{const ye={timestamp:new Date().toISOString(),version:"1.0",students:e,instructors:t,classes:c},ge=re(ye),D=new Blob([ge],{type:"application/json"}),B=URL.createObjectURL(D),J=document.createElement("a");J.href=B;const fe=new Date().toISOString().split("T")[0].replace(/-/g,"");J.setAttribute("download",`ZenFlow_Full_Backup_${fe}.json`),document.body.appendChild(J),J.click(),document.body.removeChild(J)}catch(ye){console.error("Backup failed",ye),alert("")}},T=()=>{A("CONFIRM")},ue=async()=>{A("PRUNING");try{const re=await u(j);P(re),A("SUCCESS")}catch(re){alert(""),console.error(re),A("IDLE")}},me=async()=>{ve("CONFIRM")},V=async()=>{ve("PROCESSING");try{const re=await g();de(re.count),ve("SUCCESS")}catch(re){console.error(re),alert(""),ve("IDLE")}},W=()=>{const re=p(new Date),ye=new Set;r.forEach(J=>{J.bookings&&Object.entries(J.bookings).forEach(([fe,ce])=>{fe>=re&&ce.forEach(Ce=>ye.add(Ce))})});const ge=e.filter(J=>!(J.role!=="STUDENT"||ye.has(J.id)||(J.credits||0)>0||J.membershipType==="UNLIMITED"&&J.unlimitedExpiry&&J.unlimitedExpiry>=re));if(ge.length===0){alert("");return}const D=["User UID","Email","Name","Reason"],B=ge.map(J=>[J.id,J.email||"No Email",J.name,"Inactive (No credits/bookings)"]);N("Auth_Users_To_Delete",D,B)};return d.jsx("div",{className:"fixed inset-0 z-[90] bg-black/50 backdrop-blur-sm overflow-y-auto",children:d.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"bg-white p-5 border-b border-gray-100 flex justify-between items-center sticky top-0 z-10",children:[d.jsxs("div",{children:[d.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[d.jsx(Ru,{className:"text-zen-600",size:24}),""]}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]}),d.jsx("button",{onClick:i,className:"p-2 text-gray-400 hover:bg-gray-100 rounded-full",children:d.jsx(ns,{size:24})})]}),d.jsxs("div",{className:"p-6 space-y-4 bg-gray-50",children:[y&&d.jsxs("div",{className:"flex items-center justify-center p-4 bg-yellow-50 text-yellow-700 rounded-lg text-sm mb-4",children:[d.jsx(vn,{className:"animate-spin mr-2",size:16}),"..."]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider ml-1",children:" (CSV)"}),d.jsxs("button",{onClick:R,className:"w-full bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:shadow-md hover:border-zen-300 transition-all flex items-center justify-between group",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:d.jsx(Ju,{size:20})}),d.jsx("div",{className:"text-left",children:d.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:""})})]}),d.jsx(cp,{className:"text-gray-300 group-hover:text-blue-500",size:20})]}),d.jsxs("button",{onClick:C,className:"w-full bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:shadow-md hover:border-zen-300 transition-all flex items-center justify-between group",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 bg-purple-50 text-purple-600 rounded-full flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition-colors",children:d.jsx(Bn,{size:20})}),d.jsx("div",{className:"text-left",children:d.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:""})})]}),d.jsx(cp,{className:"text-gray-300 group-hover:text-purple-500",size:20})]}),d.jsxs("button",{onClick:k,className:"w-full bg-white p-4 rounded-xl border border-gray-200 shadow-sm hover:shadow-md hover:border-zen-300 transition-all flex items-center justify-between group",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 bg-green-50 text-green-600 rounded-full flex items-center justify-center group-hover:bg-green-600 group-hover:text-white transition-colors",children:d.jsx(Ll,{size:20})}),d.jsx("div",{className:"text-left",children:d.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:""})})]}),d.jsx(cp,{className:"text-gray-300 group-hover:text-green-500",size:20})]})]}),d.jsx("div",{className:"border-t border-gray-200 my-4"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider ml-1",children:" / "}),d.jsxs("button",{onClick:I,disabled:y,className:"w-full bg-zen-50 p-4 rounded-xl border border-zen-200 shadow-sm hover:shadow-md hover:border-zen-400 transition-all flex items-center justify-between group disabled:opacity-50",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 bg-white text-zen-600 rounded-full flex items-center justify-center border border-zen-100 group-hover:bg-zen-600 group-hover:text-white transition-colors",children:d.jsx(y3,{size:20})}),d.jsxs("div",{className:"text-left",children:[d.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:" (CSV)"}),d.jsx("p",{className:"text-xs text-gray-500",children:""})]})]}),d.jsx(jk,{className:"text-zen-400 group-hover:text-zen-600",size:20})]}),d.jsxs("button",{onClick:O,disabled:y,className:"w-full bg-gray-800 p-4 rounded-xl border border-gray-700 shadow-sm hover:shadow-md hover:bg-gray-900 transition-all flex items-center justify-between group disabled:opacity-50",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 bg-gray-700 text-gray-300 rounded-full flex items-center justify-center group-hover:text-white transition-colors",children:d.jsx(Sk,{size:20})}),d.jsxs("div",{className:"text-left",children:[d.jsx("h3",{className:"font-bold text-white text-sm",children:" (.json)"}),d.jsx("p",{className:"text-xs text-gray-400",children:""})]})]}),d.jsx(Ru,{className:"text-gray-500 group-hover:text-white",size:20})]})]}),d.jsx("div",{className:"border-t border-gray-200 my-4"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("p",{className:"text-xs font-bold text-red-400 uppercase tracking-wider ml-1 flex items-center gap-1",children:[d.jsx(up,{size:12})," "]}),w==="IDLE"&&d.jsxs("div",{className:"bg-red-50 border border-red-100 p-4 rounded-xl transition-all",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("h3",{className:"font-bold text-red-800 text-sm",children:""}),d.jsxs("select",{value:j,onChange:re=>U(Number(re.target.value)),className:"text-xs border border-red-200 rounded px-2 py-1 bg-white text-red-800 outline-none focus:ring-1 focus:ring-red-500 cursor-pointer",children:[d.jsx("option",{value:2,children:"2 "}),d.jsx("option",{value:3,children:"3 "}),d.jsx("option",{value:6,children:"6 "}),d.jsx("option",{value:12,children:"1 "})]})]}),d.jsxs("p",{className:"text-xs text-red-600/80 mb-3 leading-relaxed",children:["",d.jsxs("b",{children:[j,""]}),"",d.jsx("br",{}),"",d.jsx("b",{children:""}),""]}),d.jsxs("button",{onClick:T,className:"w-full bg-white border border-red-200 text-red-600 py-2 rounded-lg text-xs font-bold hover:bg-red-600 hover:text-white transition-colors flex items-center justify-center gap-2 shadow-sm",children:[d.jsx(na,{size:14}),""]})]}),w==="CONFIRM"&&d.jsxs("div",{className:"bg-red-100 border border-red-200 p-4 rounded-xl animate-in zoom-in-95",children:[d.jsxs("h3",{className:"font-bold text-red-800 text-sm mb-2 flex items-center gap-2",children:[d.jsx(up,{size:16})," "]}),d.jsxs("p",{className:"text-xs text-red-700 mb-4 leading-relaxed",children:[" ",j," ",d.jsx("br",{}),""]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>A("IDLE"),className:"flex-1 bg-white border border-red-200 text-gray-600 py-2 rounded-lg text-xs font-bold hover:bg-gray-50",children:""}),d.jsx("button",{onClick:ue,className:"flex-1 bg-red-600 text-white py-2 rounded-lg text-xs font-bold hover:bg-red-700 shadow-md",children:""})]})]}),w==="PRUNING"&&d.jsxs("div",{className:"bg-red-50 border border-red-100 p-6 rounded-xl flex flex-col items-center justify-center text-red-600 animate-pulse",children:[d.jsx(vn,{size:24,className:"animate-spin mb-2"}),d.jsx("span",{className:"text-sm font-bold",children:"..."}),d.jsx("span",{className:"text-xs opacity-70 mt-1",children:""})]}),w==="SUCCESS"&&d.jsxs("div",{className:"bg-green-50 border border-green-200 p-4 rounded-xl animate-in slide-in-from-bottom-2",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2 text-green-800 font-bold text-sm",children:[d.jsx(vf,{size:16}),""]}),d.jsxs("ul",{className:"text-xs text-green-700 space-y-1 mb-3 list-disc pl-4",children:[d.jsxs("li",{children:[" ",d.jsx("b",{children:q.deletedDocs})," "]}),d.jsxs("li",{children:[" ",d.jsx("b",{children:q.cleanedRecords})," "]})]}),d.jsx("button",{onClick:()=>A("IDLE"),className:"w-full bg-white border border-green-200 text-green-700 py-2 rounded-lg text-xs font-bold hover:bg-green-100",children:""})]}),ie==="IDLE"&&d.jsxs("div",{className:"bg-orange-50 border border-orange-100 p-4 rounded-xl transition-all space-y-3",children:[d.jsx("div",{className:"flex items-center justify-between mb-1",children:d.jsx("h3",{className:"font-bold text-orange-800 text-sm",children:""})}),d.jsx("p",{className:"text-xs text-orange-700/80 leading-relaxed",children:"1. 2.() 3."}),d.jsxs("button",{onClick:me,className:"w-full bg-white border border-orange-200 text-orange-600 py-2 rounded-lg text-xs font-bold hover:bg-orange-600 hover:text-white transition-colors flex items-center justify-center gap-2 shadow-sm",children:[d.jsx(w3,{size:14})," DB "]}),d.jsxs("button",{onClick:W,className:"w-full bg-orange-100 border border-orange-300 text-orange-800 py-2 rounded-lg text-xs font-bold hover:bg-orange-200 transition-colors flex items-center justify-center gap-2 shadow-sm",title:" Auth ",children:[d.jsx(Rk,{size:14})," Auth UID  (CSV)"]})]}),ie==="CONFIRM"&&d.jsxs("div",{className:"bg-orange-100 border border-orange-200 p-4 rounded-xl animate-in zoom-in-95",children:[d.jsxs("h3",{className:"font-bold text-orange-800 text-sm mb-2 flex items-center gap-2",children:[d.jsx(up,{size:16})," "]}),d.jsxs("p",{className:"text-xs text-orange-800 mb-4 leading-relaxed",children:["",d.jsx("br",{}),""]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>ve("IDLE"),className:"flex-1 bg-white border border-orange-200 text-gray-600 py-2 rounded-lg text-xs font-bold hover:bg-gray-50",children:""}),d.jsx("button",{onClick:V,className:"flex-1 bg-orange-600 text-white py-2 rounded-lg text-xs font-bold hover:bg-orange-700 shadow-md",children:""})]})]}),ie==="PROCESSING"&&d.jsxs("div",{className:"bg-orange-50 border border-orange-100 p-6 rounded-xl flex flex-col items-center justify-center text-orange-600 animate-pulse",children:[d.jsx(vn,{size:24,className:"animate-spin mb-2"}),d.jsx("span",{className:"text-sm font-bold",children:"..."})]}),ie==="SUCCESS"&&d.jsxs("div",{className:"bg-green-50 border border-green-200 p-4 rounded-xl animate-in slide-in-from-bottom-2",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2 text-green-800 font-bold text-sm",children:[d.jsx(vf,{size:16}),""]}),d.jsxs("p",{className:"text-xs text-green-700 mb-3",children:[" ",d.jsx("b",{children:we})," "]}),d.jsx("button",{onClick:()=>ve("IDLE"),className:"w-full bg-white border border-green-200 text-green-700 py-2 rounded-lg text-xs font-bold hover:bg-green-100",children:""})]})]})]}),d.jsx("div",{className:"p-4 bg-white border-t border-gray-100 flex justify-end",children:d.jsx("button",{onClick:i,className:"text-gray-500 font-bold text-sm px-4 py-2 hover:bg-gray-100 rounded-lg",children:""})})]})})})},q3=()=>{const{classes:i,instructors:e,currentUser:t,bookClass:r,cancelClass:o,dataSource:c,formatDateKey:u,allClassesHistory:g,fetchArchivedClasses:p,updateAppBackgroundImage:y}=ks(),[v,w]=te.useState(null),[A,j]=te.useState(null),[U,q]=te.useState(!1),[P,ie]=te.useState(null),[ve,be]=te.useState(1),[he,we]=te.useState(!1),[de,N]=te.useState(!1),[R,C]=te.useState(!1),[k,I]=te.useState(!1),[O,T]=te.useState(!1),ue=te.useRef(null),[me,V]=te.useState("compact"),[W,re]=te.useState(()=>{const _e=new Date;return _e.setHours(0,0,0,0),_e}),ye=te.useRef(null),[ge,D]=te.useState(!1),B=te.useRef(0),J=te.useMemo(()=>{const _e=[],Ke=new Date;Ke.setHours(0,0,0,0);const $=120;for(let ee=-$;ee<=$;ee++){const Z=new Date(Ke);Z.setDate(Ke.getDate()+ee),_e.push(Z)}return _e},[]);te.useLayoutEffect(()=>{const _e=ye.current;if(!_e)return;const Ke=u(W),$=document.getElementById(`date-btn-${Ke}`);if($){const ee=$.offsetLeft-_e.clientWidth/2+$.clientWidth/2;ge?_e.scrollTo({left:ee,behavior:"smooth"}):(_e.scrollLeft=ee,B.current=_e.clientWidth,setTimeout(()=>{D(!0)},50))}},[W,ge,u]),te.useEffect(()=>{const _e=ye.current;if(!_e)return;const Ke=new ResizeObserver($=>{for(const ee of $){const Z=ee.contentRect.width;if(Math.abs(Z-B.current)>2){B.current=Z;const xe=u(W),Te=document.getElementById(`date-btn-${xe}`);if(Te){const Re=Te.offsetLeft-Z/2+Te.clientWidth/2;_e.scrollLeft=Re}}}});return Ke.observe(_e),()=>Ke.disconnect()},[W,u]);const fe=_e=>{const Ke=new Date(W);Ke.setDate(Ke.getDate()+_e*7),re(Ke)},ce=()=>{const _e=new Date;_e.setHours(0,0,0,0),re(_e)},Ce=()=>{const _e=new Date(W),Ke=_e.getDay()||7,$=new Date(_e);$.setDate(_e.getDate()-Ke+1);const ee=new Date($);ee.setDate($.getDate()+6);const Z=xe=>`${xe.getFullYear()}/${(xe.getMonth()+1).toString().padStart(2,"0")}/${xe.getDate().toString().padStart(2,"0")}`;return`${Z($)} - ${Z(ee)}`},He=async(_e,Ke)=>{var xe;const $=u(Ke),Z=(((xe=_e.bookings)==null?void 0:xe[$])||[]).includes(t.id);if(t.role===yt.ADMIN)w(_e),j(Ke);else if(Z)await o(_e.id,void 0,Ke);else{const Te=await r(_e.id,void 0,Ke);!Te.success&&Te.message&&alert(Te.message)}},it=_e=>{ie(_e),q(!0)},at=_e=>{ie(null);const Ke=new Date().getDay()||7;be(_e||Ke),q(!0)},Lt=async()=>{I(!0),await p(),I(!1),alert("")},Bt=_e=>{var ee;const Ke=(ee=_e.target.files)==null?void 0:ee[0];if(!Ke)return;if(Ke.size>5*1024*1024){alert(" ( < 5MB)");return}T(!0);const $=new FileReader;$.onload=Z=>{var Te;const xe=new Image;xe.onload=()=>{const Re=document.createElement("canvas"),Le=Re.getContext("2d"),Ne=1280,lt=1280;let pe=xe.width,De=xe.height;pe>De?pe>Ne&&(De*=Ne/pe,pe=Ne):De>lt&&(pe*=lt/De,De=lt),Re.width=pe,Re.height=De,Le==null||Le.drawImage(xe,0,0,pe,De);const Fe=Re.toDataURL("image/jpeg",.6);y(Fe).then(()=>{T(!1),alert("")})},xe.src=(Te=Z.target)==null?void 0:Te.result},$.readAsDataURL(Ke)},Zt=["","","","","","",""],Tn=t.role===yt.STUDENT,Pt=u(W),oe=W.getDay()||7,Ve=new Date().toDateString()===W.toDateString(),Me=Zt[oe-1],Ye=g.filter(_e=>!(Number(_e.dayOfWeek)!==oe||_e.createdAt&&_e.createdAt>Pt||_e.archived&&_e.archivedAt&&_e.archivedAt<=Pt)).sort((_e,Ke)=>_e.startTimeStr.localeCompare(Ke.startTimeStr)),Ge=new Date;return Ge.setHours(0,0,0,0),d.jsxs("div",{className:"space-y-4 pb-32",children:[d.jsx("header",{className:"mb-4",children:d.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[d.jsx("div",{className:"w-full lg:w-auto lg:flex-1 min-w-0",children:d.jsxs("div",{className:"bg-white/40 backdrop-blur-md p-3 pl-4 rounded-xl shadow-sm border border-white/40 w-full flex justify-between items-center gap-3",children:[d.jsxs("div",{className:"min-w-0 flex-1 overflow-hidden",children:[d.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 flex items-center gap-2",children:[d.jsx("span",{className:"whitespace-nowrap",children:t.role===yt.ADMIN?"":""}),c==="local"&&d.jsxs("span",{className:"text-[10px] bg-red-100 text-red-600 px-2 py-1 rounded-full border border-red-200 flex items-center gap-1 font-mono align-middle whitespace-nowrap",children:[d.jsx(I3,{size:10})," "]})]}),d.jsxs("p",{className:"text-gray-700 mt-1 flex items-center gap-2 text-sm font-medium whitespace-nowrap overflow-x-auto hide-scrollbar pr-2",children:[d.jsx(Ll,{size:16,className:"text-zen-700 shrink-0"}),d.jsx("span",{children:t.role===yt.ADMIN?"":" ( 09:00 )"})]})]}),d.jsxs("div",{className:"bg-white/60 p-1 rounded-lg border border-white/50 flex shrink-0 shadow-sm self-start sm:self-center",children:[d.jsx("button",{onClick:()=>V("normal"),className:`p-2 rounded-md transition-all ${me==="normal"?"bg-zen-100/80 text-zen-800 shadow-sm":"text-gray-600 hover:text-gray-800 hover:bg-white/40"}`,title:"",children:d.jsx(Fk,{size:18})}),d.jsx("button",{onClick:()=>V("compact"),className:`p-2 rounded-md transition-all ${me==="compact"?"bg-zen-100/80 text-zen-800 shadow-sm":"text-gray-600 hover:text-gray-800 hover:bg-white/40"}`,title:"",children:d.jsx(Gk,{size:18})})]})]})}),d.jsx("div",{className:"w-full lg:w-auto flex justify-center shrink-0",children:d.jsxs("div",{className:"flex items-center bg-white/40 backdrop-blur-md p-1 rounded-xl border border-white/40 shadow-sm w-full lg:w-auto max-w-md justify-between lg:justify-center",children:[d.jsx("button",{onClick:()=>fe(-1),className:"p-3 hover:bg-white/50 rounded-lg text-gray-700 shrink-0",children:d.jsx(c0,{size:20})}),d.jsx("div",{className:"px-2 font-bold text-base text-gray-800 text-center font-mono tracking-tight whitespace-nowrap flex-1",children:Ce()}),d.jsx("button",{onClick:()=>fe(1),className:"p-3 hover:bg-white/50 rounded-lg text-gray-700 shrink-0",children:d.jsx(l0,{size:20})}),d.jsx("div",{className:"w-px h-6 bg-gray-400/30 mx-1 shrink-0"}),d.jsx("button",{onClick:ce,className:"p-3 hover:bg-white/50 rounded-lg text-gray-700 shrink-0",title:"",children:d.jsx(h3,{size:18})})]})}),d.jsx("div",{className:"w-full lg:w-auto lg:flex-1 flex flex-row items-center gap-2 overflow-x-auto hide-scrollbar",children:t.role===yt.ADMIN&&d.jsxs("div",{className:"flex gap-2 shrink-0 lg:ml-auto",children:[d.jsxs("button",{onClick:()=>at(),className:"flex items-center justify-center gap-2 bg-zen-600 text-white px-4 py-3 rounded-xl font-bold hover:bg-zen-700 shadow-lg shadow-zen-200 transition-all text-sm whitespace-nowrap",title:"",children:[d.jsx(yk,{size:20}),d.jsx("span",{className:"hidden xl:inline",children:""})]}),d.jsx("button",{onClick:()=>N(!0),className:"flex items-center justify-center gap-2 bg-white/60 backdrop-blur-md border border-white/50 shadow-sm text-gray-700 px-4 py-3 rounded-xl font-bold hover:bg-white hover:border-white transition-all text-sm whitespace-nowrap",title:"",children:d.jsx(Bn,{size:20,className:"text-zen-700"})}),d.jsx("button",{onClick:()=>we(!0),className:"flex items-center justify-center gap-2 bg-white/60 backdrop-blur-md border border-white/50 shadow-sm text-gray-700 px-4 py-3 rounded-xl font-bold hover:bg-white hover:border-white transition-all text-sm whitespace-nowrap",title:"",children:d.jsx(Ju,{size:20,className:"text-zen-700"})}),d.jsx("button",{onClick:()=>C(!0),className:"flex items-center justify-center gap-2 bg-white/60 backdrop-blur-md border border-white/50 shadow-sm text-gray-700 px-4 py-3 rounded-xl font-bold hover:bg-white hover:border-white transition-all text-sm whitespace-nowrap",title:"",children:d.jsx(Ru,{size:20,className:"text-zen-700"})}),d.jsxs("button",{onClick:()=>{var _e;return(_e=ue.current)==null?void 0:_e.click()},disabled:O,className:"flex items-center justify-center gap-2 bg-white/60 backdrop-blur-md border border-white/50 shadow-sm text-gray-700 px-4 py-3 rounded-xl font-bold hover:bg-white hover:border-white transition-all text-sm whitespace-nowrap",title:"",children:[O?d.jsx(vn,{size:20,className:"animate-spin text-zen-700"}):d.jsx(Pk,{size:20,className:"text-zen-700"}),d.jsx("input",{ref:ue,type:"file",className:"hidden",accept:"image/*",onChange:Bt})]}),d.jsx("button",{onClick:Lt,disabled:k,className:"flex items-center justify-center gap-2 bg-white/60 backdrop-blur-md border border-white/50 shadow-sm text-gray-700 px-4 py-3 rounded-xl font-bold hover:bg-white hover:border-white transition-all text-sm whitespace-nowrap",title:"",children:k?d.jsx(vn,{size:20,className:"animate-spin text-zen-700"}):d.jsx(h0,{size:20,className:"text-zen-700"})})]})})]})}),d.jsx("div",{ref:ye,className:`relative flex overflow-x-auto pb-2 px-0 mb-2 snap-x snap-mandatory hide-scrollbar transition-opacity duration-300 ${ge?"opacity-100":"opacity-0"}`,children:J.map(_e=>{const Ke=u(_e),$=new Date(_e);$.setHours(0,0,0,0);const ee=$<Ge,Z=W.toDateString()===_e.toDateString(),xe=_e.getDay()||7,Te=Zt[xe-1],Re=$.getTime()===Ge.getTime();let Le="",Ne="";return Z?(Le="bg-zen-600 border-zen-600 shadow-md scale-100 z-10",Ne="text-white"):ee?(Le="bg-transparent border-transparent opacity-60 hover:bg-white/20",Ne="text-gray-500 font-medium"):(Le="bg-white/80 backdrop-blur-md border-white/50 shadow-sm hover:bg-white",Ne="text-gray-800"),d.jsx("div",{id:`date-btn-${Ke}`,className:"flex-shrink-0 snap-center px-1 w-[20%] lg:w-[14.285%]",children:d.jsxs("button",{onClick:()=>re(_e),className:`w-full h-[4.5rem] rounded-2xl border flex flex-col items-center justify-center transition-all duration-200 active:scale-95 ${Le}`,children:[d.jsx("span",{className:`text-sm font-bold mb-0.5 ${Ne}`,children:Te}),d.jsx("span",{className:`text-lg font-black font-mono leading-none ${Z?"text-white/90":ee?"text-gray-400":"text-gray-900"}`,children:_e.getDate()}),Re&&d.jsx("div",{className:`mt-1 w-1 h-1 rounded-full ${Z?"bg-white":"bg-zen-500"}`})]})},Ke)})}),d.jsx("div",{className:"grid grid-cols-1 gap-4 items-start",children:d.jsxs("div",{id:`day-column-${Pt}`,className:`flex flex-col min-h-[100px] rounded-2xl border shadow-sm relative transition-colors ${Ve?"bg-zen-50/80 border-zen-200 backdrop-blur-sm":"bg-gray-50/70 border-gray-100 backdrop-blur-sm"}`,children:[d.jsxs("div",{className:`p-3 border-b flex flex-col items-center justify-center sticky top-0 z-10 rounded-t-2xl shadow-sm h-16 ${Ve?"bg-zen-100/90 border-zen-200":"bg-white/90 border-gray-100"}`,children:[d.jsx("span",{className:`font-black text-lg ${Ve?"text-zen-800":"text-gray-800"}`,children:Me}),d.jsx("span",{className:`text-sm font-mono ${Ve?"text-zen-700 font-bold":"text-gray-500"}`,children:W.toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"})}),t.role===yt.ADMIN&&d.jsx("button",{onClick:()=>at(oe),className:"absolute top-2 right-2 text-zen-600 hover:bg-zen-50 p-2 rounded-full transition-colors",title:`${Me}`,children:d.jsx(p2,{size:18})})]}),d.jsx("div",{className:`p-3 flex-1 ${me==="compact"?"space-y-2":"space-y-4"}`,children:Ye.length>0?Ye.map(_e=>{var xe;const Ke=(xe=_e.substitutions)==null?void 0:xe[Pt],$=!!Ke,ee=$?Ke:_e.instructorId,Z=e.find(Te=>Te.id===ee)||{id:"unknown",name:"Unknown",bio:"",imageUrl:"https://via.placeholder.com/100"};return d.jsx(V3,{session:_e,instructor:Z,targetDate:W,onAction:()=>He(_e,W),onEdit:()=>it(_e.id),isCompact:me==="compact",displayAsSubstitute:$},_e.id)}):d.jsx("div",{className:"flex flex-col items-center justify-center py-8 text-gray-500 text-sm italic space-y-1",children:d.jsx("span",{children:Tn?"":""})})})]})}),v&&e.length>0&&A&&d.jsx(z3,{session:v,targetDate:A,instructor:e.find(_e=>_e.id===v.instructorId),onClose:()=>{w(null),j(null)}}),U&&d.jsx(U3,{classId:P,initialDayOfWeek:ve,onClose:()=>q(!1)},`editor-${U?"open":"closed"}-${P||"new"}-${ve}`),he&&d.jsx(P3,{onClose:()=>we(!1)}),de&&d.jsx(L3,{onClose:()=>N(!1)}),R&&d.jsx(B3,{onClose:()=>C(!1)})]})},F3=()=>d.jsx(F4,{children:d.jsx(O3,{children:d.jsx(q3,{})})}),x2=document.getElementById("root");if(!x2)throw new Error("Could not find root element to mount to");const H3=aA.createRoot(x2);H3.render(d.jsx(ew.StrictMode,{children:d.jsx(F3,{})}));
